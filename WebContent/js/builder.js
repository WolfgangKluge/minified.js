if(/^u/.test(typeof define)){var def={};this.define=function(f,k){def[f]=k()};this.require=function(f){return def[f]}}
define("minified",function(){function f(j){return j.substr(0,3)}function k(j){return null!=j?""+j:""}function p(j){return"string"==typeof j}function h(j){return!!j&&"object"==typeof j}function l(j){return"number"==typeof j}function r(j){return h(j)&&!!j.getDay}function n(j){return!0===j||!1===j}function e(j){var a=typeof j;return"object"==a?!(!j||!j.getDay):"string"==a||"number"==a||n(j)}function m(j){return!!j&&null!=j.length&&!p(j)&&!(j&&j.nodeType)&&!M(j)}function s(j){return j}function q(j){return j+
1}function v(j,a,b){return k(j).replace(a,null!=b?b:"")}function w(j){return v(j,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function x(j){return v(j,/^\s+|\s+$/g)}function B(j,a){for(var b in j)j.hasOwnProperty(b)&&a(b,j[b]);return j}function D(j,a){if(j)for(var b=0;b<j.length;b++)a(j[b],b);return j}function N(j,a){var b=[],c=M(a)?a:function(j){return a!=j};D(j,function(j,a){c(j,a)&&b.push(j)});return b}function X(j,a,b){var c=[];j(a,function(j,a){m(j=b(j,a))?D(j,function(j){c.push(j)}):null!=j&&c.push(j)});
return c}function T(j,a){return X(D,j,a)}function Y(j){var a=[];B(j,function(j){a.push(j)});return a}function C(j,a){var b=[];D(j,function(j,c){b.push(a(j,c))});return b}function U(j,a){if(m(j)){var b=R(a);return G(R(j).sub(0,b.length),b)}return null!=a&&j.substr(0,a.length)==a}function Z(j,a){if(m(j)){var b=R(a);return R(j).sub(-b.length).equals(b)||!b.length}return null!=a&&j.substr(j.length-a.length)==a}function y(a){var b=a.length;return C(a,function(){return a[--b]})}function H(a,b,c){if(!a)return[];
var d=a.length,g=0>b?d+b:b,t=null==c?d:0<=c?c:d+c;return N(a,function(a,j){return j>=g&&j<t})}function O(a,b){var c={};D(a,function(a){c[a]=b});return c}function V(a,b,c){B(a,function(a,j){if(null==b[a]||!c)b[a]=j});return b}function A(a,b){for(var c=M(b)?b:function(a,j){if(b===a)return j},d,g=0;g<a.length;g++)if(null!=(d=c(a[g],g)))return d}function z(a){return C(a,s)}function F(){var a=this;return function(){return new S(E(a,arguments))}}function aa(a){var b={};return N(a,function(a){if(b[a])return!1;
b[a]=1;return!0})}function I(a,b){var c=O(b,1);return N(a,function(a){var b=c[a];c[a]=0;return b})}function P(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function G(a,b){var c=M(a)?a():a,d=M(b)?b():b;if(c==d)return!0;if(null==c||null==d)return!1;if(e(c)||e(d))return r(c)&&r(d)&&c.getTime()==d.getTime();if(m(c))return c.length!=d.length?!1:!A(c,function(a,b){if(!G(a,d[b]))return!0});if(m(d))return!1;var g=Y(c),t=g.length,u=0;B(d,function(){u++});return t!=u?!1:!A(g,function(a){if(!G(c[a],
d[a]))return!0})}function W(a,b,c){return a.apply(c&&b,C(c||b,s))}function E(a,b,c){return C(a,function(a){return M(a)?W(a,b,c):ba})}function ca(a,b,c,d){return function(){return W(a,b,T([c,arguments,d],s))}}function a(a,c){return b(c,0,0,0,a)}function b(a,b,c,d,g,t,u){function m(a){var b=a.length;return b>u?m(a.substr(0,b-u))+(t||",")+a.substr(b-u):a}var e=0>a,k=/(\d+)(\.(.*))?/.exec((e?-a:a).toFixed(b));a=k[1];for(d=(d||".")+k[3];a.length<(g||1);)a="0"+a;u&&(a=m(a));return(e?"-":"")+a+(b?c?v(d,
/[.,]?0+$/):d:"")}function c(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function d(a,b){if(1==arguments.length)return d(null,a);if(/^\?/.test(a)){if(""==x(b))return null;a=a.substr(1)}var c,g=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(v(v(v(b,","==g?/\./g:/,/g),g,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?ba:c}function g(a){return new Date(a.getTime())}function t(a,b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function u(a,
b,c){return 3>arguments.length?u(new Date,a,b):t(g(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function L(a,b,c){var d=b.getTime(),g=c.getTime(),u=g-d;if(0>u)return-L(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return u/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(u/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);d=t(new Date(d),b,a);for(u=a;u<1.2*a+4;u++)if(t(d,b,1).getTime()>g)return u}function ha(a){return v(a,/['"\t\n\r]/g,function(a){return la[a]})}function ea(a,
b){if(fa[a])return fa[a];var c="with(_.isObject(obj)?obj:{}){"+C(a.split(/{{|}}}?/),function(a,b){var c,d=x(a),j=v(d,/^{/),d=d==j?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(j))?"each("+(""==x(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(j))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(j))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(j))?c[1]?"}\n":"});\n":(c=/^#(.*)/.exec(j))?c[1]:(c=/(.*)::\s*(.*)/.exec(j))?"print("+d+'_.formatValue("'+
ha(c[2])+'",'+(""==x(c[1])?"this":c[1])+(d&&")")+"));\n":"print("+d+(""==x(j)?"this":j)+(d&&")")+");\n";if(""!=a)return'print("'+ha(a)+'");\n'}).join("")+"}",d=new Function("obj","each","esc","print","_",c);return fa[a]=function(a,c){var j=[];d.call(c||a,a,function(a,b){m(a)?D(a,function(a,c){b.call(a,a,c)}):B(a,function(a,c){b.call(c,a,c)})},b||s,function(){W(j.push,j,arguments)},R);return j.join("")}}function da(a){return v(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function Q(a){return function(b,
c){return new S(a(this,b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function K(a){return function(b,c,d){return new S(a(b,c,d))}}function M(a){return"function"==typeof a}function S(a,b){for(var c=0,d=0;d<a.length;d++){var g=a[d];if(b&&m(g))for(var u=0;u<g.length;u++)this[c++]=g[u];else this[c++]=g}this.length=c;this._=!0}function R(){return new S(arguments,!0)}var ba,ga="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ia=C(ga,f),ja=
"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=C(ja,f),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},fa={};V({each:J(D),filter:Q(N),collect:Q(T),map:Q(C),toObject:J(O),equals:J(G),sub:Q(H),reverse:Q(y),find:J(A),startsWith:J(U),endsWith:J(Z),contains:J(P),call:Q(E),array:J(z),unite:J(F),uniq:Q(aa),intersection:Q(I),join:function(a){return C(this,s).join(a)},sort:function(a){return new S(C(this,s).sort(a))},tap:function(a){a(this);return this}},
S.prototype);R={filter:K(N),collect:K(T),collectObj:K(function(a,b){return X(B,a,b)}),map:K(C),sub:K(H),reverse:K(y),each:D,toObject:O,find:A,contains:P,startsWith:U,endsWith:Z,equals:G,keys:K(Y),values:K(function(a,b){var c=[];b?D(b,function(b){c.push(a[b])}):B(a,function(a,b){c.push(b)});return c}),call:K(E),array:z,unite:F,uniq:K(aa),intersection:K(I),bind:ca,partial:function(a,b,c){return ca(a,null,b,c)},once:function(a){var b=0;return function(){if(!b++)return W(a,this,arguments)}},nonOp:s,eachObj:B,
mapObj:function(a,b){var c={};B(a,function(a,d){c[a]=b(a,d)});return c},filterObj:function(a,b){var c={},d=M(b)?b:function(a){return b!=a};B(a,function(a,b){d(a,b)&&(c[a]=b)});return c},isList:m,isFunction:M,isObject:h,isNumber:l,isBool:n,isDate:r,isValue:e,isString:p,toString:k,toList:function(a){return m(a)?a:null!=a?[a]:[]},dateClone:g,dateAdd:u,dateDiff:L,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:b,pad:a,formatValue:function(d,
g){d=v(d,/^\?/);if(r(g)){var t,e,f=d,h=g,L={y:["FullYear",s],M:["Month",q],n:["Month",ia],N:["Month",ga],d:["Date",s],m:["Minutes",s],H:["Hours",s],h:["Hours",function(a){return a%12||12}],K:["Hours",q],k:["Hours",function(a){return a%12+1}],s:["Seconds",s],S:["Milliseconds",s],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(b){if(t)return t;var c=0<b?b:-b;return(0>b?"+":"-")+a(2,Math.floor(c/60))+a(2,c%60)}]};if(e=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(d))t=
e[1],h=u(g,"minutes",c(e,2,g)),f=e[4];return v(f,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(b,c,d,g){if(c=L[c])b=h["get"+(m(c)?c[0]:c)].call(h),g=g&&g.split(","),b=m(c[1])?(g||c[1])[b]:c[1](b,g),null!=b&&!p(b)&&(b=a(d.length+1,b));return b})}return A(d.split(/\s*\|\s*/),function(a){var c,d;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=g;var j=parseFloat(c[3]);if(isNaN(j)||!l(a))a=null==a?"null":k(a),j=c[3];if(c[1]){if(!c[2]&&a==j||"<"==c[1]&&a>j||">"==c[1]&&a<j)return null}else if(a!=j)return null;
a=c[4]}if(l(g)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){d=k(c[1])+k(c[2]);var j=k(c[1]).length?v(d,/[.,]/g).length:1,u=v(v(d,/^.*[0#]/),/[^,.]/g),t=k(c[3]).length+k(c[4]).length,m,e;if(d=/([.,])[^.,]+[.,]/.exec(c[0]))m=d[1],e=d[0].length-2;m=b(g,t,k(c[3]).length,u,j,m,e);e=a;a=c.index;c=k(c[0]).length;return e.substr(0,a)+m+e.substr(a+c)}return a})},parseDate:function(a,b){var d={y:0,M:[1,1],n:[1,ia],N:[1,ga],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},g={},t=1,e,k,f;if(/^\?/.test(a)){if(""==
x(b))return null;a=a.substr(1)}if(f=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))e=f,a=f[3];if(!(f=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(g[t++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(k=t,t+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(g[t++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":w(a)})).exec(b)))return ba;for(var h=[0,0,0,0,0,0,0],L=1;L<t;L++){var p=f[L],l=
g[L];if(m(l)){var s=l[0],n=d[s],q=n[0],l=A(l[1]||n[1],function(a,b){return U(p.toLowerCase(),a.toLowerCase())?b:null});if(null==l)return ba;h[q]="a"==s?h[q]+12*l:l}else l&&(s=parseInt(p),n=d[l],m(n)?h[n[0]]+=s-n[1]:h[n]+=s)}d=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);return u(d,"minutes",-c(e,1,d)-c(f,k,d))},parseNumber:d,copyObj:V,coal:function(){return A(arguments,s)},trim:x,escapeRegExp:w,escapeHtml:da,format:function(a,b){return ea(a)(b)},template:ea,htmlTemlplate:function(a){return ea(a,da)}};
return{_:R,M:S}});/^u/.test(typeof define)&&(def={},this.define=function(f,k){def[f]=k()},this.require=function(f){return def[f]});
define("minified",function(){function f(a){return null!=a?""+a:""}function k(a){return"string"==typeof a}function p(a){return a&&a.nodeType}function h(a){return a&&null!=a.length&&!k(a)&&!p(a)&&!w(a)}function l(a){return a}function r(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function n(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function e(a,b){var c=[],d=w(b)?b:function(a){return b!=a};n(a,function(a,b){d(a,b)&&c.push(a)});return c}function m(a,b){var c=[];n(a,function(a,
g){h(a=b(a,g))?n(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function s(a,b){var c=[];r(a,function(a,g){h(a=b(a,g))?n(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function q(a,b,c){return f(a).replace(b,c||"")}function v(a,b){var c=null!=a&&RegExp("\\b"+a+"\\b","i");return function(a){return!c||c.test(a[b])}}function w(a){return"function"==typeof a&&!a.item}function x(a){return parseFloat(q(a,/^[^\d-]+/))}function B(a){return a.minified=a.minified||++aa}function D(a,b){function c(a){if(p(a)&&
!g[t=B(a)])d.push(a),g[t]=!0}var d=[],g={},t;n(a,function(a){a=b(a);h(a)?n(a,c):c(a)});return d}function N(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function X(a){a()}function T(a,b){n(b,function(a){a.e.detachEvent("on"+a.n,a.h)})}function Y(){n(P,X);P=null}function C(a){P?P.push(a):z.setTimeout(a,0)}function U(a,b,c,d){return function(){var g=y(F.createElement(a));h(b)||"object"!=typeof b?g.add(b):
g.set(b).add(c);d&&d(g);return g}}function Z(a){return ca[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function y(a,b,c){return w(a)?C(a):new A(H(a,b,c))}function H(a,b,c){function d(a){a=function da(a){return h(a)?m(a,da):a}(a);return g?e(a,function(a){for(;a=a.parentNode;){if(a===g)return!0;if(c)return!1}}):a}var g,t,u,f;if(b&&1!=(b=H(b)).length)return D(b,function(b){return H(a,b,c)});g=b&&b[0];if(!k(a))return d(h(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return D(b,function(a){return H(a,
g,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return H(b[2],H(b[1],g),c);if(a!=(b=q(a,/^#/)))return d([F.getElementById(b)]);g=g||F;t=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];f=b[2];b=(u=g.getElementsByClassName&&f)?g.getElementsByClassName(f):g.getElementsByTagName(t||"*");if(t=u?t:f)b=e(b,v(t,u?"nodeName":"className"));return g?d(b):b}function O(a,b){var c;if(w(a))return a;if(!a||k(a)&&("*"==a||(c=/^([\w-]*)\.([\w-]+)$/.exec(a))||(c=/^([\w-]+)$/.exec(a)))){var d=v(c&&c[1],"nodeName"),g=v(c&&c[2],"className");
return function(a){return 1==p(a)&&d(a)&&g(a)}}var t={};y(a,b).each(function(a){t[B(a)]=!0});return function(c){return b?null!=y(a,b).find(c):t[B(c)]}}function V(){var a,b=[],c=[],d=function(d,g){null==a&&(a=d,b=g,z.setTimeout(function(){n(c,X)},0))},g=d.then=function(d,g){var m=V(),e=function(){try{var c=a?d:g;if(w(c)){var e=c.apply(null,b);e&&w(e.then)?e.then(function(a){m(!0,[a])},function(a){m(!1,[a])}):m(!0,[e])}else m(a,b)}catch(h){m(!1,[h])}};null!=a?z.setTimeout(e,0):c.push(e);return m};d.error=
function(a){return g(0,a)};return d}function A(a){for(var b=this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var z=this,F=document,aa=1,I={},P=[],G=[],W=z.requestAnimationFrame||function(a){z.setTimeout(a,33)},E=!!F.all&&!P.map,ca={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return n(this,a)},filter:function(a){return new A(e(this,a))},collect:function(a){return new A(m(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,d=0<=b?b:this.length+(b||0);return this.filter(function(a,
b){return b>=c&&b<d})},find:function(a){for(var b,c=w(a)?a:function(b,c){if(a===b)return c},d=0;d<this.length;d++)if(null!=(b=c(this[d],d)))return b},remove:function(){n(this,function(a){if(E&&1==p(a)){var b=function(a){T(0,I[a.minified]);delete I[a.minified]};n(H("*",a),b);b(a)}a.parentNode.removeChild(a)})},text:function(){function a(b){var c=p(b);return 1==c?m(b.childNodes,a):5>c?b.data:null}return m(this,a).join("")},trav:function(a,b,c){var d=O("number"==typeof b?null:b),g="number"==typeof b?
b:c||1E9;return new A(D(this,function(b){for(var c=[];(b=b[a])&&c.length<g;)d(b)&&c.push(b);return c}))},select:function(a,b){return y(a,this,b)},is:function(a){var b=O(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(O(a))},get:function(a,b){var c=this,d=c[0];if(d){if(k(a)){var g=q(q(a,/^%/,"data-"),/^[$@]/),e;e="$"==a?d.className:"$$"==a?E?d.style.cssText:d.getAttribute("style"):/\$\$/.test(a)&&("hidden"==d.style.visibility||"none"==d.style.display)?0:"$$fade"==
a?isNaN(e=E?x(d.style.filter)/100:x(d.style.opacity))?1:e:"$$slide"==a?c.get("$height"):/^\$/.test(a)?z.getComputedStyle?z.getComputedStyle(d,null).getPropertyValue(q(g,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(d.currentStyle||d.style)[g]:/^[@%]/.test(a)?d.getAttribute(g):d[g];return b?x(e):e}var m={};(h(a)?n:r)(a,function(a){m[a]=c.get(a,b)});return m}},set:function(a,b){var c=this,d;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(d=x(b))?"visible":"hidden",$display:"block"}).set("$$fade"==
a?E?{$filter:"alpha(opacity = "+100*d+")",$zoom:1}:{$opacity:d}:{$height:/px/.test(b)?b:function(a,b,c){return d*(d&&N(y(c)))+"px"},$overflow:"hidden"}):n(c,function(c,d){var e=q(q(a,/^%/,"data-"),/^[@$]/),m=c.className||"",h=/^\$/.test(a)?c.style:c,f=w(b)?b(y(c).get(a),d,c):b;"$"==a?null!=f&&(n(f.split(/\s+/),function(a){var b=q(a,/^[+-]/),c=m;m=q(m,RegExp("\\b"+b+"\\b","i"));if(/^\+/.test(a)||b==a&&c==m)m+=" "+b}),c.className=q(m,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?h.cssText=f:null!=f?c.setAttribute("style",
f):c.removeAttribute("style"):/^[@%]/.test(a)?null!=f?h.setAttribute(e,f):h.removeAttribute(e):h[e]=f}):k(a)||w(a)?c.set("$",a):r(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return n(this,function(c,d){var g;(function u(a){h(a)?n(a,u):w(a)?u(a(c,d)):null!=a&&(a=p(a)?a:F.createTextNode(a),g?g.parentNode.insertBefore(a,g.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),g=a)})(p(a)&&d?null:a)})},fill:function(a){return n(this,function(a){y(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,
function(a,c,d){d.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,d){d.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,d){d.replaceChild(a,c)})},clone:function(a){return new A(m(this,function(b){var c=p(b);if(1==c){var d={$:b.className||null,$$:E?b.style.cssText:b.getAttribute("style")};n(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=
c&&b.getAttribute(c))&&(d["@"+c]=a.value)});return U(b.tagName,d,y(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,d){var g=this,m=[],e=/-?[\d.]+/,h,k=V(),l=w(c)?c:function(a,b,d){return a+d*(b-a)*(c+(1-c)*d*(3-2*d))};d=d||{};d.time=0;d.stop=function(){h();k(!1)};b=b||500;c=c||0;n(g,function(b){var c={o:y(b),e:{}};r(c.s=c.o.get(a),function(b,d){var g=a[b];"$$slide"==b&&(g=g*N(c.o)+"px");c.e[b]=/^[+-]=/.test(g)?q(g.substr(2),e,x(d)+x(q(g,/\+?=/))):g});m.push(c)});h=y.loop(function(a){function c(a,
b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(q(a,/[^\d,]+/g).split(",")[b])}d.time=a;a>=b||0>a?(n(m,function(a){a.o.set(a.e)}),h(),d.time=null,k(!0,[g])):n(m,function(d){r(d.s,function(g,m){var h="rgb(",k=d.e[g],n=a/b;if(/^#|rgb\(/.test(k))for(var s=0;3>s;s++)h+=Math.round(l(c(m,s),c(k,s),n))+(2>s?",":")");else h=q(k,e,f(l(x(m),x(k),n)));d.o.set(g,h)})})});return k},toggle:function(a,b,c,d){var g=this,m={},e=!1,h=/\b(?=\w)/g,f;return b?g.set(a)&&function(h){if(h!==
e)return f=(e=!0===h||!1===h?h:!e)?b:a,w(f)?f(g,c,d):c?g.animate(f,m.stop?m.stop()||m.time:c,d,m):g.set(f)&&void 0}:g.toggle(q(a,h,"-"),q(a,h,"+"))},values:function(a){var b=a||{};this.each(function(a){var d=a.name,g=f(a.value),e=b[d];if(/form/i.test(a.tagName))y(m(a.elements,l)).values(b);else if(d&&(!/kbox|dio/i.test(a.type)||a.checked))h(e)?e.push(g):b[d]=null==e?g:[e,g]});return b},on:function(a,b,c,d){return this.each(function(g,m){n(a.split(/\s/),function(a){var e=q(a,/\|/),h=w(b)||null,f=h?
b:c,k=h&&d&&c,l=h&&(d||c),n=e==a,s=h?null:O(b,g),h=function(a,b){var c=a||z.event,d,g=b||c.target;if(!s||s(g))if((d=(!f.apply(k||g,l||[c,m])||l)&&n)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return d};a={e:g,h:h,n:e};(f.M=f.M||[]).push(a);E?(g.attachEvent("on"+e,h),e=B(g),(I[e]=I[e]||[]).push(a)):(g.addEventListener(e,h,!1),(g.minified2=g.minified2||[]).push(a))})})},onOver:function(a){var b=this,c=[];return b.on("|mouseover |mouseout",function(d,
g){var e="mouseout"!=d.type,m=d.relatedTarget||d.toElement;if(c[g]!==e&&(e||!m||m!=b[g]&&!y(m).trav("parentNode",b[g]).length))c[g]=e,a.call(this,e,g)})},trigger:function(a,b){return this.each(function(c){for(var d,g=c;g&&!d;)n(E?I[g.minified]:g.minified2,function(g){g.n==a&&(d=d||g.h(b,c))}),g=g.parentNode})}},function(a,b){A.prototype[a]=b});r({request:function(a,b,c,d,g,e){var l,n=c,q=0,v=V();try{l=z.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(d=d||{},!k(c)&&
!p(c)&&(n=s(c,function J(a,b){return h(b)?m(b,function(b){return J(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!p(c)&&(!k(c)&&!d["Content-Type"])&&(d["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+n,n=null)),l.open(a,b,!0,g,e),r(d,function(a,b){l.setRequestHeader(a,b)}),l.onreadystatechange=function(){4==l.readyState&&!q++&&(200==l.status?v(!0,[l.responseText,l.responseXML]):v(!1,[l.status,l.statusText,l.responseText]))},l.send(n)}catch(x){q||
v(!1,[0,null,f(x)])}return v},toJSON:function b(c){return null==c?""+c:k(c=c.valueOf())?'"'+q(c,/[\\\"\x00-\x1f\x22\x5c]/g,Z)+'"':h(c)?"["+m(c,b).join()+"]":"object"==typeof c?"{"+s(c,function(c,g){return b(c)+":"+b(g)}).join()+"}":f(c)},parseJSON:z.JSON?z.JSON.parse:function(b){b=q(b,/[\x00\xad\u0600-\uffff]/g,Z);if(/^[[\],:{}\s]*$/.test(q(q(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:C,setCookie:function(b,c,d,g,e,m){F.cookie=b+"="+(m?c:escape(c))+
(d?"; expires="+("object"==typeof d?d:new Date((new Date).getTime()+864E5*d)).toUTCString():"")+"; path="+(g?escapeURI(g):"/")+(e?"; domain="+escape(e):"")},getCookie:function(b,c){var d,g=(d=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(F.cookie))&&d[2];return c?g:g&&unescape(g)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<G.length;b++)G[b]===c&&G.splice(b--,1)}};2>G.push(c)&&function g(){n(G,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&W(g)}();return c.s},
off:function(b){n(b.M,function(b){E?(b.e.detachEvent("on"+b.n,b.h),I[b.e.minified]=e(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),b.e.minified2=e(b.e.minified2,b))});b.M=null}},function(b,c){y[b]=c});z.onload=Y;F.addEventListener&&F.addEventListener("DOMContentLoaded",Y,!1);z.unload=function(){n(I,T)};return{$:y,$$:function(b){return H(b)[0]},EE:U,M:A}});var _=require("minified")._;
function parseSourceSections(f){function k(){return{id:"anon"+p++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}f=f.split("\n");var p=100,h=[],l=k(),r=!1;_.each(f,function(f){if(r&&/^.*\*\/\s*$/.test(f))r=!1;else if(r){var e=f.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),m=e.match(/^\s*@([a-z]+)/);m?(m=m[1],e=_.trim(e.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==m||"example"==m?l[m].push(e):"requires"==m?e.length&&_.each(e.split(/\s+/),function(e){l.requires[e]=1}):"param"==
m?l.params.push({name:e.replace(/\s.*$/,""),desc:e.replace(/^\S+\s+/,"")}):"return"==m?l.params.push({name:"@return",desc:e}):"function"==m?l.params[l.params.length-1].funcs.push(e):l[m]=""!=e?e:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(e):l.example.length?l.example[l.example.length-1]+="\n"+e:l.desc+=e+"\n"}else/^\s*\/\*\$/.test(f)&&!/\*\/\s*$/.test(f)&&(r=!0,h.push(l),l=k());l.src.push(f)});h.push(l);return h}
function createSectionMap(f){var k={};_.each(f,function(f){k[f.id]=f});return k}function completeRequirements(f,k){var p=0;_.each(f,function(h){_.eachObj(h.requires,function(f){var r=k[f];if(!r)throw Error('Unknown id in requirement: "'+f+'"');_.eachObj(r.requires,function(f){h.requires[f]||(p++,h.requires[f]=1)})})});0<p?completeRequirements(f,k):_.each(f,function(h){_.eachObj(h.requires,function(f){k[f].requiredBy[h.id]=1})})}
function calculateDependencies(f,k){var p={};_.eachObj(k,function(h){k[h]&&(p[h]=1,_.eachObj(f[h].requires,function(f){p[f]=1}))});return p}function createDefaultConfigurationMap(f,k){var p={};_.each(f,function(f){if(f.configurable&&("default"==f.configurable||k))p[f.id]=1});return p}
function compile(f,k,p){var h="",l=calculateDependencies(k,p),r=[],n=!0;_.filter(f,function(e){return l[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))n||(h+="\n"),n=!0;else{var f=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(f&&"cond"==f[2]&&!!l[f[4]]!=("!"==f[3]))h+=f[1]+f[5]+"\n";else{var k=!1,p=!0;f&&"condblock"==f[2]?r.push(!!l[f[4]]!=("!"==f[3])):/^\s*\/\/\s*@condend\b/.test(e)&&(k=!0);for(f=0;f<r.length;f++)if(!r[f]){p=
!1;break}p&&(h+=e+"\n");k&&r.pop()}n=!1}})});return h}function prepareSections(f){f=parseSourceSections(f);var k=createSectionMap(f);completeRequirements(f,k);var p=createDefaultConfigurationMap(f);return{sections:f,sectionMap:k,enabledSections:p}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(f,k){var p=_.filter(f,function(e){return e.configurable}),h=_.filter(_.keys(k),function(e){return k[e]}),l,r=[];h.length==p.length?(l=CONFIG_COMMENT+CONFIG_ALL,r=[]):h.length/3>p.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(p,function(e){return!k[e.id]}).collect(function(e){return e.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,r=h);var n="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,e=50;_(r).sort().each(function(f){e<f.length?
(e=70,n+="\n// - "+f+", "):(n+=f+", ",e-=f.length+2)});return n=n.replace(/,\s*$/,".\n")}function fixConfig(f,k){_.eachObj(k,function(p){f[p]?_.copyObj(f[p].requires,k):delete k[p]});return k}
function deserializeEnabledSections(f,k,p){function h(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var l=h(CONFIG_START+".*"),r=h(CONFIG_ALL.replace(/\./,"\\.")),n=h(CONFIG_ALL_EXCEPT+"\\s*"),e=h(CONFIG_ONLY+"\\s*"),m=h(CONFIG_COMMENT);p=p.split("\n");for(var s=0;s<p.length;s++){var q=p[s];if(/^\s*\/\/s*/.test(q)&&(q=q.replace(/^\s*\/\/\s*/,""),l.test(q)&&s+1<p.length)){for(var q="",v=s+1;v<p.length;v++)if(m.test(p[v])){if(q+=p[v].replace(m,""),/\s*\.\s*$/.test(p[v]))break}else break;if(r.test(q))return createDefaultConfigurationMap(f,
!0);q=q.replace(/\s*\.\s*$/,"");if(n.test(q)){var w=createDefaultConfigurationMap(f,!0);_.each(q.replace(n,"").split(/\s*,\s*/),function(e){delete w[e]});return fixConfig(k,w)}if(e.test(q))return w={},_.each(q.replace(e,"").split(/\s*,\s*/),function(e){k[e]&&(w[e]=1)}),fixConfig(k,w)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(f,k,p){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:f,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:k?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){p&&p($.parseJSON(f))},function(f,k,r){window.console&&console.log("error",f,k,r);p&&p(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(f){function k(){$(".modCheck").each(function(e){var f=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&f++});e.checked=0<f})}function p(e){var h=f.sectionMap[e.id.substr(4)];e.checked?_.eachObj(h.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(h.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(f){f.checked&&(e[f.id.substr(4)]=1)});var h=compile(f.sections,
f.sectionMap,e),k=serializeEnabledSections(f.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(h,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=k+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=k+h,$("#resultPlain").fill((h.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(l){console.log(l)}return!1});
var h=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",h,[!1]);$("#loadConfig").on("|click",h,[!0]);$("#recreate").on("click",function(){try{var e=$$("#configSrc").value,h=deserializeEnabledSections(f.sections,f.sectionMap,e);h?(_.eachObj(f.sectionMap,function(e){var f=$$("#sec-"+e);f&&(f.checked=!!h[e])}),k()):alert("Can not find configuration in source.")}catch(l){console.log(l)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[h=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(h).on("change",function(){var e=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=e;p(f)});k();return!0});var n;_.filter(f.sections,function(e){return e.group==GROUPS[l]&&e.configurable}).sort(function(e,f){var h=e.name||e.id,k=f.name||f.id;return h==k?0:h>k?1:
-1}).each(function(e){function h(e,k){var l=_.filter(_.keys(k),function(e){return!!k[e].name});if(!l.length)return null;var m=0,n=e;_.each(l,function(e){m++<Math.min(l.length,8)&&(1<m&&(n=m==Math.min(l.length,8)?n+" and ":n+", "),n=8==m&&8<l.length?n+"more":n+(f.sectionMap[e].name||f.sectionMap[e].id))});return n+="."}var l=h("Required by ",e.requiredBy),q=h("Requires ",e.requires);r.add(EE("div",{className:"sectionDescriptor"},[n=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+e.id,
checked:"default"==e.configurable?"checked":null})(),EE("label",{"@for":"sec-"+e.id},e.name||e.id),EE("div",{className:"requirements"},[l?[l,EE("br")]:null,q])]));$(n).on("change",function(){p(this);k();return!0})})}}
$(function(){var f=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);f&&10>parseInt(f[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(f){setUpConfigurationUI(prepareSections(f))}).error(function(f){window.console&&console.log(f)})});
