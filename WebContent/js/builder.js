if(/^u/.test(typeof define)){var def={};this.define=function(g,e){def[g]=e()};this.require=function(g){return def[g]}}
define("minifiedUtil",function(){function g(q){return q.substr(0,3)}function e(q){return null!=q?""+q:""}function m(q){return"string"==typeof q}function n(q){return!!q&&"object"==typeof q}function l(q){return"number"==typeof q}function t(q){return n(q)&&!!q.getDay}function u(q){return!0===q||!1===q}function j(q){var a=typeof q;return"object"==a?!(!q||!q.getDay):"string"==a||"number"==a||u(q)}function h(q){return!!q&&null!=q.length&&!m(q)&&!(q&&q.nodeType)&&!R(q)}function k(q){return q}function w(q){return q+
1}function p(q,a,b){return e(q).replace(a,null!=b?b:"")}function r(q){return p(q,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function H(q){return p(q,/^\s+|\s+$/g)}function x(q,a){for(var b in q)q.hasOwnProperty(b)&&a(b,q[b]);return q}function A(a,b){if(a)for(var c=0;c<a.length;c++)b(a[c],c);return a}function M(a,b){var c=[],d=R(b)?b:function(a){return b!=a};A(a,function(a,q){d(a,q)&&c.push(a)});return c}function X(a,b,c){var d=[];a(b,function(a,q){h(a=c(a,q))?A(a,function(a){d.push(a)}):null!=a&&d.push(a)});
return d}function U(a,b){return X(A,a,b)}function Y(a){var b=[];x(a,function(a){b.push(a)});return b}function B(a,b){var c=[];A(a,function(a,q){c.push(b(a,q))});return c}function V(a,b){if(h(a)){var c=S(b);return I(S(a).sub(0,c.length),c)}return null!=b&&a.substr(0,b.length)==b}function Z(a,b){if(h(a)){var c=S(b);return S(a).sub(-c.length).equals(c)||!c.length}return null!=b&&a.substr(a.length-b.length)==b}function aa(a){var b=a.length;return B(a,function(){return a[--b]})}function y(a,b,c){if(!a)return[];
var d=a.length,f=0>b?d+b:b,s=null==c?d:0<=c?c:d+c;return M(a,function(a,b){return b>=f&&b<s})}function E(a,b){var c={};A(a,function(a){c[a]=b});return c}function P(a,b,c){x(a,function(a,q){if(null==b[a]||!c)b[a]=q});return b}function J(a,b){for(var c=R(b)?b:function(a,c){if(b===a)return c},d,f=0;f<a.length;f++)if(null!=(d=c(a[f],f)))return d}function N(a){return B(a,k)}function z(a){return function(){return new Q(ba(a,arguments))}}function F(a){var b={};return M(a,function(a){if(b[a])return!1;b[a]=
1;return!0})}function ca(a,b){var c=E(b,1);return M(a,function(a){var b=c[a];c[a]=0;return b})}function K(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function I(a,b){var c=R(a)?a():a,d=R(b)?b():b;if(c==d)return!0;if(null==c||null==d)return!1;if(j(c)||j(d))return t(c)&&t(d)&&c.getTime()==d.getTime();if(h(c))return c.length!=d.length?!1:!J(c,function(a,b){if(!I(a,d[b]))return!0});if(h(d))return!1;var f=Y(c),s=f.length,v=0;x(d,function(){v++});return s!=v?!1:!J(f,function(a){if(!I(c[a],
d[a]))return!0})}function T(a,b,c){return a.apply(c&&b,B(c||b,k))}function ba(a,b,c){return B(a,function(a){return R(a)?T(a,b,c):da})}function G(a,b,c,d){return function(){return T(a,b,U([c,arguments,d],k))}}function W(b,c){return a(c,0,0,0,b)}function a(a,b,c,d,f,s,v){function h(a){var b=a.length;return b>v?h(a.substr(0,b-v))+(s||",")+a.substr(b-v):a}var k=0>a,j=/(\d+)(\.(.*))?/.exec((k?-a:a).toFixed(b));a=j[1];for(d=(d||".")+j[3];a.length<(f||1);)a="0"+a;v&&(a=h(a));return(k?"-":"")+a+(b?c?p(d,
/[.,]?0+$/):d:"")}function b(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function c(a,b){if(1==arguments.length)return c(null,a);if(/^\?/.test(a)){if(""==H(b))return null;a=a.substr(1)}var d,f=(d=/[0#]([.,])[_9]/.exec(a))?d[1]:(d=/^[.,]$/.exec(a))?d[0]:".";d=parseFloat(p(p(p(b,","==f?/\./g:/,/g),f,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(d)?da:d}function d(a){return new Date(a.getTime())}function f(a,b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function s(a,
b,c){return 3>arguments.length?s(new Date,a,b):f(d(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function v(a,b,c){var d=b.getTime(),s=c.getTime(),h=s-d;if(0>h)return-v(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return h/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(h/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);d=f(new Date(d),b,a);for(h=a;h<1.2*a+4;h++)if(f(d,b,1).getTime()>s)return h}function D(a){return p(a,/['"\t\n\r]/g,function(a){return la[a]})}function ea(a,
b){if(fa[a])return fa[a];var c="with(_.isObject(obj)?obj:{}){"+B(a.split(/{{|}}}?/),function(a,b){var c,d=H(a),f=p(d,/^{/),d=d==f?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(f))?"each("+(""==H(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(f))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(f))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(f))?c[1]?"}\n":"});\n":(c=/^#(.*)/.exec(f))?c[1]:(c=/(.*)::\s*(.*)/.exec(f))?"print("+d+'_.formatValue("'+
D(c[2])+'",'+(""==H(c[1])?"this":c[1])+(d&&")")+"));\n":"print("+d+(""==H(f)?"this":f)+(d&&")")+");\n";if(""!=a)return'print("'+D(a)+'");\n'}).join("")+"}",d=new Function("obj","each","esc","print","_",c);return fa[a]=function(a,c){var f=[];d.call(c||a,a,function(a,b){h(a)?A(a,function(a,c){b.call(a,a,c)}):x(a,function(a,c){b.call(c,a,c)})},b||k,function(){T(f.push,f,arguments)},S);return f.join("")}}function ha(a){return p(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function L(a){return function(b,
c){return new Q(a(this,b,c))}}function O(a){return function(b,c){return a(this,b,c)}}function C(a){return function(b,c,d){return new Q(a(b,c,d))}}function R(a){return"function"==typeof a}function Q(a,b){for(var c=0,d=0;d<a.length;d++){var f=a[d];if(b&&h(f))for(var s=0;s<f.length;s++)this[c++]=f[s];else this[c++]=f}this.length=c;this._=!0}function S(){return new Q(arguments,!0)}var da,ga="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ia=B(ga,g),ja=
"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=B(ja,g),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},fa={};P({each:O(A),filter:L(M),collect:L(U),map:L(B),toObject:O(E),equals:O(I),sub:L(y),reverse:L(aa),find:O(J),startsWith:O(V),endsWith:O(Z),contains:O(K),call:L(ba),array:O(N),unite:O(z),uniq:L(F),intersection:L(ca),join:function(a){return B(this,k).join(a)},sort:function(a){return new Q(B(this,k).sort(a))}},Q.prototype);P({filter:C(M),collect:C(U),
collectObj:C(function(a,b){return X(x,a,b)}),map:C(B),sub:C(y),reverse:C(aa),each:A,toObject:E,find:J,contains:K,startsWith:V,endsWith:Z,equals:I,keys:C(Y),values:C(function(a,b){var c=[];b?A(b,function(b){c.push(a[b])}):x(a,function(a,b){c.push(b)});return c}),call:C(ba),array:N,unite:z,uniq:C(F),intersection:C(ca),copyObj:P,range:function(a,b){for(var c=[],d=null==b?a:b,f=null!=b?a:0;f<d;f++)c.push(f);return new Q(c)},bind:G,partial:function(a,b,c){return G(a,null,b,c)},eachObj:x,mapObj:function(a,
b){var c={};x(a,function(a,d){c[a]=b(a,d)});return c},filterObj:function(a,b){var c={};x(a,function(a,d){b(a,d)&&(c[a]=d)});return c},isList:h,isFunction:R,isObject:n,isNumber:l,isBool:u,isDate:t,isValue:j,isString:m,toString:e,dateClone:d,dateAdd:s,dateDiff:v,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:W,formatValue:function(c,d){c=p(c,/^\?/);if(t(d)){var f,v,j=c,D=d,n={y:["FullYear",k],Y:["FullYear",function(a){return a%100}],M:["Month",
w],n:["Month",ia],N:["Month",ga],d:["Date",k],m:["Minutes",k],H:["Hours",k],h:["Hours",function(a){return a%12||12}],k:["Hours",w],K:["Hours",function(a){return a%12}],s:["Seconds",k],S:["Milliseconds",k],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(a){if(f)return f;var b=0<a?a:-a;return(0>a?"+":"-")+W(2,Math.floor(b/60))+W(2,b%60)}]};if(v=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(c))f=v[1],D=s(d,"minutes",b(v,2,d)),j=v[4];return p(j,/(\w)(\1*)(?:\[([^\]]+)\])?/g,
function(a,b,c,d){if(b=n[b])a=D["get"+(h(b)?b[0]:b)].call(D),d=d&&d.split(","),a=h(b[1])?(d||b[1])[a]:b[1](a,d),null!=a&&!m(a)&&(a=W(c.length+1,a));return a})}return J(c.split(/\s*\|\s*/),function(b){var c,f;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(b)){b=d;var s=parseFloat(c[3]);if(isNaN(s)||!l(b))b=null==b?"null":e(b),s=c[3];if(c[1]){if(!c[2]&&b==s||"<"==c[1]&&b>s||">"==c[1]&&b<s)return null}else if(b!=s)return null;b=c[4]}if(l(d)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(b))){f=e(c[1])+e(c[2]);
var s=e(c[1]).length?p(f,/[.,]/g).length:1,h=p(p(f,/^.*[0#]/),/[^,.]/g),v=e(c[3]).length+e(c[4]).length,k,j;if(f=/([.,])[^.,]+[.,]/.exec(c[0]))k=f[1],j=f[0].length-2;k=a(d,v,e(c[3]).length,h,s,k,j);j=b;b=c.index;c=e(c[0]).length;return j.substr(0,b)+k+j.substr(b+c)}return b})},parseDate:function(a,c){var d={y:0,Y:[0,-2E3],M:[1,1],n:[1,ia],N:[1,ga],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},f={},v=1,k,j,D;if(/^\?/.test(a)){if(""==H(c))return null;a=a.substr(1)}if(D=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))k=
D,a=D[3];if(!(D=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(f[v++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(j=v,v+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(f[v++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":r(a)})).exec(c)))return da;for(var e=[0,0,0,0,0,0,0],n=1;n<v;n++){var l=D[n],g=f[n];if(h(g)){var m=g[0],p=d[m],C=p[0],g=J(g[1]||p[1],function(a,b){return V(l.toLowerCase(),
a.toLowerCase())?b:null});if(null==g)return da;e[C]="a"==m?e[C]+12*g:g}else g&&(m=parseInt(l),p=d[g],h(p)?e[p[0]]+=m-p[1]:e[p]+=m)}d=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);return s(d,"minutes",-b(k,1,d)-b(D,j,d))},parseNumber:c,trim:H,escapeRegExp:r,escapeHtml:ha,format:function(a,b){return ea(a)(b)},template:ea,formatHtml:function(a,b){return ea(a,ha)(b)}},S);return{_:S,M:Q}});/^u/.test(typeof define)&&(def={},this.define=function(g,e){def[g]=e()},this.require=function(g){return def[g]});
define("minified",function(){function g(){return 1}function e(a){return null!=a?""+a:""}function m(a){return"string"==typeof a}function n(a){return a&&a.nodeType}function l(a){return a&&null!=a.length&&!m(a)&&!n(a)&&!p(a)}function t(a){return a}function u(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function j(a,b){var c=[];r(a,function(a,f){b(a,f)&&c.push(a)});return c}function h(a,b,c){var d=[];a(b,function(a,b){r(c(a,b),function(a){d.push(a)})});return d}function k(a,b,c){return e(a).replace(b,
c||"")}function w(a,b){var c=RegExp("\\b"+a+"\\b","i");return a?function(a){return c.test(a[b])}:g}function p(a){return"function"==typeof a&&!a.item}function r(a,b){if(l(a))for(var c=0;c<a.length;c++)b(a[c],c);else null!=a&&b(a,0);return a}function H(a,b){for(var c=0;a&&c<a.length;c++)a[c]===b&&a.splice(c--,1)}function x(a){return parseFloat(k(a,/^[^\d-]+/))}function A(a){return a.minified=a.minified||++ca}function M(a,b){var c=[],d={},f;r(a,function(a){r(b(a),function(a){if(n(a)&&!d[f=A(a)])c.push(a),
d[f]=!0})});return c}function X(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function U(a){a()}function Y(a,b){r(b,function(a){a.e.detachEvent("on"+a.n,a.h)})}function B(){r(I,U);I=null}function V(a){I?I.push(a):z.setTimeout(a,0)}function Z(a,b,c,d){return function(){var f=y(F.createElement(a));l(b)||"object"!=typeof b?f.add(b):f.set(b).add(c);d&&d(f);return f}}function aa(a){return W[a]||"\\u"+("0000"+
a.charCodeAt(0).toString(16)).slice(-4)}function y(a,b,c){return p(a)?V(a):new N(E(a,b,c))}function E(a,b,c){function d(a){a=h(r,a,function L(a){return l(a)?h(r,a,L):a});return f?j(a,function(a){for(;a=a.parentNode;){if(a===f)return!0;if(c)return!1}}):a}var f,s,v,e;if(b&&1!=(b=E(b)).length)return M(b,function(b){return E(a,b,c)});f=b&&b[0];if(!m(a))return d(a);if(1<(b=a.split(/\s*,\s*/)).length)return M(b,function(a){return E(a,f,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return E(b[2],E(b[1],f),c);if(a!=
(b=k(a,/^#/)))return d(F.getElementById(b));f=f||F;s=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];e=b[2];b=(v=f.getElementsByClassName&&e)?f.getElementsByClassName(e):f.getElementsByTagName(s||"*");if(s=v?s:e)b=j(b,w(s,v?"nodeName":"className"));return f?d(b):b}function P(a,b){var c,d={};if(p(a))return a;if(!a||m(a)&&("*"==a||(c=/^([\w-]*)\.([\w-]+)$/.exec(a))||(c=/^([\w-]+)$/.exec(a)))){var f=w(c&&c[1],"nodeName"),s=w(c&&c[2],"className");return function(a){return 1==n(a)&&f(a)&&s(a)}}if(b)return function(c){return null!=
y(a,b).find(c)};y(a).each(function(a){d[A(a)]=!0});return function(a){return d[A(a)]}}function J(){var a,b=[],c=[],d=function(d,f){null==a&&(a=d,b=f,z.setTimeout(function(){r(c,U)},0))},f=d.then=function(d,f){var h=J(),k=function(){try{var c=a?d:f;if(p(c)){var k=c.apply(null,b);k&&p(k.then)?k.then(function(a){h(!0,[a])},function(a){h(!1,[a])}):h(!0,[k])}else h(a,b)}catch(e){h(!1,[e])}};null!=a?z.setTimeout(k,0):c.push(k);return h};d.error=function(a){return f(0,a)};return d}function N(a){for(var b=
this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var z=this,F=document,ca=1,K={},I=[],T=[],ba=z.requestAnimationFrame||function(a){z.setTimeout(a,33)},G=!!F.all&&!I.map,W={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};u({each:function(a){return r(this,a)},filter:function(a){return new N(j(this,a))},collect:function(a){return new N(h(r,this,a))},sub:function(a,b){var c=0>a?this.length+a:a,d=0<=b?b:this.length+(b||0);return this.filter(function(a,b){return b>=c&&b<d})},find:function(a){for(var b,
c=p(a)?a:function(b,c){if(a===b)return c},d=0;d<this.length;d++)if(null!=(b=c(this[d],d)))return b},remove:function(){r(this,function(a){G&&1==n(a)&&(r(E("*",a),function(a){Y(0,K[a.minified]);delete K[a.minified]}),removeEvents(a));a.parentNode.removeChild(a)})},text:function(){function a(b){var c=n(b);return 1==c?h(r,b.childNodes,a):5>c?b.data:null}return h(r,this,a).join("")},trav:function(a,b,c){var d=P("number"==typeof b?null:b),f="number"==typeof b?b:c||1E9;return new N(M(this,function(b){for(var c=
[];(b=b[a])&&c.length<f;)d(b)&&c.push(b);return c}))},select:function(a,b){return y(a,this,b)},is:function(a){var b=P(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(P(a))},get:function(a,b){var c=this,d=c[0];if(d){if(m(a)){var f=k(k(a,/^%/,"data-"),/^[$@]/),h;h="$"==a?d.className:"$$"==a?G?d.style.cssText:d.getAttribute("style"):/\$\$/.test(a)&&("hidden"==d.style.visibility||"none"==d.style.display)?0:"$$fade"==a?isNaN(h=G?x(d.style.filter)/100:x(d.style.opacity))?
1:h:"$$slide"==a?c.get("$height"):/^\$/.test(a)?z.getComputedStyle?z.getComputedStyle(d,null).getPropertyValue(k(f,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(d.currentStyle||d.style)[f]:/^[@%]/.test(a)?d.getAttribute(f):d[f];return b?x(h):h}var e={};(l(a)?r:u)(a,function(a){e[a]=c.get(a,b)});return e}},set:function(a,b){var c=this,d;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(d=x(b))?"visible":"hidden",$display:"block"}).set("$$fade"==a?G?{$filter:"alpha(opacity = "+100*d+")",
$zoom:1}:{$opacity:d}:{$height:/px/.test(b)?b:function(a,b,c){return d*(d&&X(y(c)))+"px"},$overflow:"hidden"}):r(c,function(c,d){var h=k(k(a,/^%/,"data-"),/^[@$]/),e=c.className||"",j=/^\$/.test(a)?c.style:c,g=p(b)?b(y(c).get(a),d,c):b;"$"==a?null!=g&&(r(g.split(/\s+/),function(a){var b=k(a,/^[+-]/),c=e;e=k(e,RegExp("\\b"+b+"\\b","i"));if(/^\+/.test(a)||b==a&&c==e)e+=" "+b}),c.className=k(e,/^\s+|\s+(?=\s|$)/g)):"$$"==a?G?j.cssText=g:null!=g?c.setAttribute("style",g):c.removeAttribute("style"):/^[@%]/.test(a)?
null!=g?j.setAttribute(h,g):j.removeAttribute(h):j[h]=g}):m(a)||p(a)?c.set("$",a):u(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return this.each(function(c,d){var f;(function v(a){l(a)?r(a,v):p(a)?v(a(c,d)):null!=a&&(a=n(a)?a:F.createTextNode(a),f?f.parentNode.insertBefore(a,f.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),f=a)})(n(a)&&d?null:a)})},fill:function(a){return this.each(function(a){y(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,
c,d){d.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,d){d.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,d){d.replaceChild(a,c)})},clone:function(a){return this.collect(function(b){var c=n(b);if(1==c){var d={$:b.className||null,$$:G?b.style.cssText:b.getAttribute("style")};r(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&
(d["@"+c]=a.value)});return Z(b.tagName,d,y(b.childNodes).clone(),a)}return 5>c?b.data:null})},animate:function(a,b,c,d){var f=this,h=[],j=/-?[\d.]+/,g,n=J(),l=p(c)?c:function(a,b,d){return a+d*(b-a)*(c+(1-c)*d*(3-2*d))};d=d||{};d.time=0;d.stop=function(){g();n(!1)};b=b||500;c=c||0;r(f,function(b){var c={o:y(b),e:{}};u(c.s=c.o.get(a),function(b,d){var f=a[b];"$$slide"==b&&(f=f*X(c.o)+"px");c.e[b]=/^[+-]=/.test(f)?k(f.substr(2),j,x(d)+x(k(f,/\+?=/))):f});h.push(c)});g=y.loop(function(a){function c(a,
b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(k(a,/[^\d,]+/g).split(",")[b])}d.time=a;a>=b||0>a?(r(h,function(a){a.o.set(a.e)}),g(),d.time=null,n(!0,[f])):r(h,function(d){u(d.s,function(f,h){var g="rgb(",n=d.e[f],m=a/b;if(/^#|rgb\(/.test(n))for(var p=0;3>p;p++)g+=Math.round(l(c(h,p),c(n,p),m))+(2>p?",":")");else g=k(n,j,e(l(x(h),x(n),m)));d.o.set(f,g)})})});return n},toggle:function(a,b,c,d){var f=this,h={},e=!1,g=/\b(?=\w)/g,j;return b?f.set(a)&&function(k){if(k!==
e)return j=(e=!0===k||!1===k?k:!e)?b:a,p(j)?j(f,c,d):c?f.animate(j,h.stop?h.stop()||h.time:c,d,h):f.set(j)&&void 0}:f.toggle(k(a,g,"-"),k(a,g,"+"))},values:function(a){var b=a||{};this.each(function(a){var d=a.name,f=e(a.value),k=b[d];if(/form/i.test(a.tagName))y(h(r,a.elements,t)).values(b);else if(d&&(!/kbox|dio/i.test(a.type)||a.checked))l(k)?k.push(f):b[d]=null==k?f:[k,f]});return b},offset:function(){for(var a=this[0],b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},
on:function(a,b,c,d){return this.each(function(f,h){r(a.split(/\s/),function(a){var e=k(a,/\|/),j=p(b)||null,n=j?b:c,l=j&&d&&c,m=j&&(d||c),r=e==a,u=j?g:P(b,f);a=function(a,b){var c=a||z.event,d,f=b||c.target;if(u(f)&&(d=(!n.apply(l||f,m||[c,h])||m)&&r)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return d};j=handlerDescription;(n.M=n.M||[]).push(j);G?(f.attachEvent("on"+e,a),e=A(f),a=handlerDescription,(K[e]=K[e]||[]).push(a)):(f.addEventListener(e,
a,!1),e=handlerDescription,(f.minified2=f.minified2||[]).push(e))})})},onOver:function(a){var b=this,c=[];return b.on("|mouseover |mouseout",function(d,f){var h="mouseout"!=d.type,e=d.relatedTarget||d.toElement;if(c[f]!==h&&(h||!e||e!=b[f]&&!y(e).trav("parentNode",b[f]).length))c[f]=h,a.call(this,h,f)})},trigger:function(a,b){return this.each(function(c){for(var d,f=c;f&&!d;)r(G?K[f.minified]:f.minified2,function(f){f.n==a&&(d=d||f.h(b,c))}),f=f.parentNode})}},function(a,b){N.prototype[a]=b});u({request:function(a,
b,c,d,f,k){var j,g=c,l=0,p=J();try{j=z.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(d=d||{},!m(c)&&!n(c)&&(g=h(u,c,function(a,b){return h(r,b,function(b){return encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")})}).join("&")),/post/i.test(a)?!n(c)&&(!m(c)&&!d["Content-Type"])&&(d["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+g,g=null)),j.open(a,b,!0,f,k),u(d,function(a,b){j.setRequestHeader(a,b)}),j.onreadystatechange=function(){4==
j.readyState&&!l++&&(200==j.status?p(!0,[j.responseText,j.responseXML]):p(!1,[j.status,j.statusText,j.responseText]))},j.send(g)}catch(w){l||p(!1,[0,null,e(w)])}return p},toJSON:function b(c){return null==c?""+c:m(c=c.valueOf())?'"'+k(c,/[\\\"\x00-\x1f\x22\x5c]/g,aa)+'"':l(c)?"["+h(r,c,b).join()+"]":"object"==typeof c?"{"+h(u,c,function(c,f){return b(c)+":"+b(f)}).join()+"}":e(c)},parseJSON:z.JSON?z.JSON.parse:function(b){b=k(b,/[\x00\xad\u0600-\uffff]/g,aa);if(/^[[\],:{}\s]*$/.test(k(k(b,/\\["\\\/bfnrtu]/g),
/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:V,setCookie:function(b,c,d,f,h,j){F.cookie=b+"="+(j?c:escape(c))+(d?"; expires="+("object"==typeof d?d:new Date((new Date).getTime()+864E5*d)).toUTCString():"")+"; path="+(f?escapeURI(f):"/")+(h?"; domain="+escape(h):"")},getCookie:function(b,c){var d,f=(d=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(F.cookie))&&d[2];return c?f:f&&unescape(f)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){H(T,c)}};2>T.push(c)&&
function f(){r(T,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&ba(f)}();return c.s},off:function(b){r(b.M,function(b){G?(b.e.detachEvent("on"+b.n,b.h),H(K[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),H(b.e.minified2,b))});b.M=null}},function(b,c){y[b]=c});z.onload=B;F.addEventListener&&F.addEventListener("DOMContentLoaded",B,!1);z.unload=function(){r(K,Y)};return{$:y,$$:function(b){return E(b)[0]},EE:Z,M:N}});var _=(require("minifiedUtil")||require("minified"))._;
function parseSourceSections(g){function e(){return{id:"anon"+m++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}g=g.split("\n");var m=100,n=[],l=e(),t=!1;_.each(g,function(g){if(t&&/^.*\*\/\s*$/.test(g))t=!1;else if(t){var j=g.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),h=j.match(/^\s*@([a-z]+)/);h?(h=h[1],j=_.trim(j.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==h||"example"==h?l[h].push(j):"requires"==h?j.length&&_.each(j.split(/\s+/),function(h){l.requires[h]=1}):"param"==
h?l.params.push({name:j.replace(/\s.*$/,""),desc:j.replace(/^\S+\s+/,"")}):"return"==h?l.params.push({name:"@return",desc:j}):"function"==h?l.params[l.params.length-1].funcs.push(j):l[h]=""!=j?j:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(j):l.example.length?l.example[l.example.length-1]+="\n"+j:l.desc+=j+"\n"}else/^\s*\/\*\$/.test(g)&&!/\*\/\s*$/.test(g)&&(t=!0,n.push(l),l=e());l.src.push(g)});n.push(l);return n}
function createSectionMap(g){var e={};_.each(g,function(g){e[g.id]=g});return e}function completeRequirements(g,e){var m=0;_.each(g,function(g){_.eachObj(g.requires,function(l){var t=e[l];if(!t)throw Error('Unknown id in requirement: "'+l+'"');_.eachObj(t.requires,function(e){g.requires[e]||(m++,g.requires[e]=1)})})});0<m?completeRequirements(g,e):_.each(g,function(g){_.eachObj(g.requires,function(l){e[l].requiredBy[g.id]=1})})}
function calculateDependencies(g,e){var m={};_.eachObj(e,function(n){e[n]&&(m[n]=1,_.eachObj(g[n].requires,function(e){m[e]=1}))});return m}function createDefaultConfigurationMap(g,e){var m={};_.each(g,function(g){if(g.configurable&&("default"==g.configurable||e))m[g.id]=1});return m}
function compile(g,e,m){var n="",l=calculateDependencies(e,m),t=[],u=!0;_.filter(g,function(e){return l[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(h){if(/^\s*$/.test(h))u||(n+="\n"),u=!0;else{var e=h.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(e&&"cond"==e[2]&&!!l[e[4]]!=("!"==e[3]))n+=e[1]+e[5]+"\n";else{var g=!1,j=!0;e&&"condblock"==e[2]?t.push(!!l[e[4]]!=("!"==e[3])):/^\s*\/\/\s*@condend\b/.test(h)&&(g=!0);for(e=0;e<t.length;e++)if(!t[e]){j=
!1;break}j&&(n+=h+"\n");g&&t.pop()}u=!1}})});return n}function prepareSections(g){g=parseSourceSections(g);var e=createSectionMap(g);completeRequirements(g,e);var m=createDefaultConfigurationMap(g);return{sections:g,sectionMap:e,enabledSections:m}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(g,e){var m=_.filter(g,function(e){return e.configurable}),n=_.filter(_.keys(e),function(h){return e[h]}),l,t=[];n.length==m.length?(l=CONFIG_COMMENT+CONFIG_ALL,t=[]):n.length/3>m.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,t=_.filter(m,function(h){return!e[h.id]}).collect(function(e){return e.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,t=n);var u="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,j=50;_(t).sort().each(function(e){j<e.length?
(j=70,u+="\n// - "+e+", "):(u+=e+", ",j-=e.length+2)});return u=u.replace(/,\s*$/,".\n")}function fixConfig(g,e){_.eachObj(e,function(m){g[m]?_.copyObj(g[m].requires,e):delete e[m]});return e}
function deserializeEnabledSections(g,e,m){function n(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var l=n(CONFIG_START+".*"),t=n(CONFIG_ALL.replace(/\./,"\\.")),u=n(CONFIG_ALL_EXCEPT+"\\s*"),j=n(CONFIG_ONLY+"\\s*"),h=n(CONFIG_COMMENT);m=m.split("\n");for(var k=0;k<m.length;k++){var w=m[k];if(/^\s*\/\/s*/.test(w)&&(w=w.replace(/^\s*\/\/\s*/,""),l.test(w)&&k+1<m.length)){for(var w="",p=k+1;p<m.length;p++)if(h.test(m[p])){if(w+=m[p].replace(h,""),/\s*\.\s*$/.test(m[p]))break}else break;if(t.test(w))return createDefaultConfigurationMap(g,
!0);w=w.replace(/\s*\.\s*$/,"");if(u.test(w)){var r=createDefaultConfigurationMap(g,!0);_.each(w.replace(u,"").split(/\s*,\s*/),function(e){delete r[e]});return fixConfig(e,r)}if(j.test(w))return r={},_.each(w.replace(j,"").split(/\s*,\s*/),function(h){e[h]&&(r[h]=1)}),fixConfig(e,r)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(g,e,m){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:g,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:e?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(e){m&&m($.parseJSON(e))},function(e,g,t){window.console&&console.log("error",e,g,t);m&&m(null)}).error(function(e){window.console&&console.log(e)})}
function setUpConfigurationUI(g){function e(){$(".modCheck").each(function(e){var h=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&h++});e.checked=0<h})}function m(e){var h=g.sectionMap[e.id.substr(4)];e.checked?_.eachObj(h.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(h.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(h){h.checked&&(e[h.id.substr(4)]=1)});var h=compile(g.sections,
g.sectionMap,e),k=serializeEnabledSections(g.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(h,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=k+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=k+h,$("#resultPlain").fill((h.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(l){console.log(l)}return!1});
var n=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",n,[!1]);$("#loadConfig").on("|click",n,[!0]);$("#recreate").on("click",function(){try{var j=$$("#configSrc").value,h=deserializeEnabledSections(g.sections,g.sectionMap,j);h?(_.eachObj(g.sectionMap,function(e){var g=$$("#sec-"+e);g&&(g.checked=!!h[e])}),e()):alert("Can not find configuration in source.")}catch(k){console.log(k)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var t;$("#sectionCheckboxes").add(t=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[n=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(n).on("change",function(){var g=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(e){e.checked=g;m(e)});e();return!0});var u;_.filter(g.sections,function(e){return e.group==GROUPS[l]&&e.configurable}).sort(function(e,g){var k=e.name||e.id,l=g.name||g.id;return k==l?0:k>l?1:
-1}).each(function(j){function h(e,h){var j=_.filter(_.keys(h),function(e){return!!h[e].name});if(!j.length)return null;var k=0,l=e;_.each(j,function(e){k++<Math.min(j.length,8)&&(1<k&&(l=k==Math.min(j.length,8)?l+" and ":l+", "),l=8==k&&8<j.length?l+"more":l+(g.sectionMap[e].name||g.sectionMap[e].id))});return l+="."}var k=h("Required by ",j.requiredBy),l=h("Requires ",j.requires);t.add(EE("div",{className:"sectionDescriptor"},[u=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+j.id,
checked:"default"==j.configurable?"checked":null})(),EE("label",{"@for":"sec-"+j.id},j.name||j.id),EE("div",{className:"requirements"},[k?[k,EE("br")]:null,l])]));$(u).on("change",function(){m(this);e();return!0})})}}
$(function(){var g=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);g&&10>parseInt(g[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(e){setUpConfigurationUI(prepareSections(e))}).error(function(e){window.console&&console.log(e)})});
