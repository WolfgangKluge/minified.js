if(/^u/.test(typeof define)){var def={};this.define=function(d,k){def[d]=k()};this.require=function(d){return def[d]}}
define("minifiedUtil",function(){function d(j){return j.substr(0,3)}function k(j){return null!=j?""+j:""}function h(j){return"string"==typeof j}function m(j){return!!j&&"object"==typeof j}function n(j){return"number"==typeof j}function q(j){return m(j)&&!!j.getDay}function u(j){return!0===j||!1===j}function l(j){var a=typeof j;return"object"==a?!(!j||!j.getDay):"string"==a||"number"==a||u(j)}function p(j){return!!j&&null!=j.length&&!h(j)&&!(j&&j.nodeType)&&!Q(j)}function g(j){return j}function r(j){return j+
1}function s(j,a,b){return k(j).replace(a,null!=b?b:"")}function E(j){return s(j,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function G(j){return s(j,/^\s+|\s+$/g)}function z(j,a){for(var b in j)j.hasOwnProperty(b)&&a(b,j[b]);return j}function B(j,a){if(j)for(var b=0;b<j.length;b++)a(j[b],b);return j}function K(j,a){var b=[],c=Q(a)?a:function(j){return a!=j};B(j,function(j,a){c(j,a)&&b.push(j)});return b}function X(j,a,b){var c=[];j(a,function(j,a){p(j=b(j,a))?B(j,function(j){c.push(j)}):null!=j&&c.push(j)});
return c}function S(j,a){return X(B,j,a)}function Y(j){var a=[];z(j,function(j){a.push(j)});return a}function C(j,a){var b=[];B(j,function(j,c){b.push(a(j,c))});return b}function T(j,a){if(p(j)){var b=R(a);return A(R(j).sub(0,b.length),b)}return null!=a&&j.substr(0,a.length)==a}function Z(j,a){if(p(j)){var b=R(a);return R(j).sub(-b.length).equals(b)||!b.length}return null!=a&&j.substr(j.length-a.length)==a}function aa(a){var b=a.length;return C(a,function(){return a[--b]})}function x(a,b,c){if(!a)return[];
var e=D(a,b,0),f=D(a,c,a.length);return K(a,function(a,j){return j>=e&&j<f})}function F(a,b){var c={};B(a,function(a){c[a]=b});return c}function L(a,b,c){z(a,function(a,j){if(null==b[a]||!c)b[a]=j});return b}function U(a){return Q(a)?a:function(b,c){if(a===b)return c}}function D(a,b,c){return null==b?c:0>b?a.length+b:b}function w(a,b,c,e){b=U(b);e=D(a,e,a.length);for(var f=D(a,c,0);f<e;f++)if(null!=(c=b(a[f],f)))return c}function y(a,b,c,e){b=U(b);e=D(a,e,-1);for(var f=D(a,c,a.length-1);f>e;f--)if(null!=
(c=b(a[f],f)))return c}function ca(a){return C(a,g)}function I(b){return function(){return new M(a(b,arguments))}}function N(a){var b={};return K(a,function(a){if(b[a])return!1;b[a]=1;return!0})}function V(a,b){var c=F(b,1);return K(a,function(a){var b=c[a];c[a]=0;return b})}function da(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function A(a,b){var c=Q(a)?a():a,e=Q(b)?b():b;if(c==e)return!0;if(null==c||null==e)return!1;if(l(c)||l(e))return q(c)&&q(e)&&c.getTime()==e.getTime();if(p(c))return c.length!=
e.length?!1:!w(c,function(a,b){if(!A(a,e[b]))return!0});if(p(e))return!1;var f=Y(c),g=f.length,t=0;z(e,function(){t++});return g!=t?!1:!w(f,function(a){if(!A(c[a],e[a]))return!0})}function ba(a,b,c){return a.apply(c&&b,C(c||b,g))}function a(a,b,c){return C(a,function(a){return Q(a)?ba(a,b,c):ea})}function b(a,b,c,e){return function(){return ba(a,b,S([c,arguments,e],g))}}function c(a,b){return f(b,0,0,0,a)}function f(a,b,c,e,f,p,g){function t(a){var b=a.length;return b>g?t(a.substr(0,b-g))+(p||",")+
a.substr(b-g):a}var v=0>a,l=/(\d+)(\.(.*))?/.exec((v?-a:a).toFixed(b));a=l[1];for(e=(e||".")+l[3];a.length<(f||1);)a="0"+a;g&&(a=t(a));return(v?"-":"")+a+(b?c?s(e,/[.,]?0+$/):e:"")}function e(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function v(a,b){if(1==arguments.length)return v(null,a);if(/^\?/.test(a)){if(""==G(b))return null;a=a.substr(1)}var c,e=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(s(s(s(b,","==e?/\./g:/,/g),
e,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?ea:c}function t(a){return new Date(a.getTime())}function O(a,b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function fa(a,b,c){return 3>arguments.length?fa(new Date,a,b):O(t(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function ja(a,b,c){var e=b.getTime(),f=c.getTime(),g=f-e;if(0>g)return-ja(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return g/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(g/{fullYear:31536E6,month:2628E6,
date:864E5}[a]-2);e=O(new Date(e),b,a);for(g=a;g<1.2*a+4;g++)if(O(e,b,1).getTime()>f)return g}function ga(a){return s(a,/['"\t\n\r]/g,function(a){return oa[a]})}function W(a,b){if(ha[a])return ha[a];var c="with(_.isObject(obj)?obj:{}){"+C(a.split(/{{|}}}?/),function(a,b){var c,e=G(a),j=s(e,/^{/),e=e==j?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(j))?"each("+(""==G(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(j))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(j))?
"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(j))?c[1]?"}\n":"});\n":(c=/^(var\s.*)/.exec(j))?c[1]+";":(c=/^#(.*)/.exec(j))?c[1]:(c=/(.*)::\s*(.*)/.exec(j))?"print("+e+'_.formatValue("'+ga(c[2])+'",'+(""==G(c[1])?"this":c[1])+(e&&")")+"));\n":"print("+e+(""==G(j)?"this":j)+(e&&")")+");\n";if(""!=a)return'print("'+ga(a)+'");\n'}).join("")+"}",e=new Function("obj","each","esc","print","_",c);return ha[a]=function(a,c){var j=[];e.call(c||a,a,function(a,b){p(a)?B(a,function(a,c){b.call(a,a,
c)}):z(a,function(a,c){b.call(c,a,c)})},b||g,function(){ba(j.push,j,arguments)},R);return j.join("")}}function ka(a){return s(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function P(a){return function(b,c){return new M(a(this,b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function H(a){return function(b,c,e){return new M(a(b,c,e))}}function Q(a){return"function"==typeof a}function M(a,b){for(var c=0,e=0;e<a.length;e++){var f=a[e];if(b&&p(f))for(var g=0;g<f.length;g++)this[c++]=
f[g];else this[c++]=f}this.length=c;this._=!0}function R(){return new M(arguments,!0)}var ea,ia="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),la=C(ia,d),ma="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),pa=C(ma,d),na=["am","pm"],oa={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ha={};L({each:J(B),filter:P(K),collect:P(S),map:P(C),toObject:J(F),equals:J(A),sub:P(x),reverse:P(aa),find:J(w),findLast:J(y),startsWith:J(T),
endsWith:J(Z),contains:J(da),call:P(a),array:J(ca),unite:J(I),uniq:P(N),intersection:P(V),join:function(a){return C(this,g).join(a)},sort:function(a){return new M(C(this,g).sort(a))}},M.prototype);L({filter:H(K),collect:H(S),collectObj:H(function(a,b){return X(z,a,b)}),map:H(C),sub:H(x),reverse:H(aa),each:B,toObject:F,find:w,findLast:y,contains:da,startsWith:T,endsWith:Z,equals:A,keys:H(Y),values:H(function(a,b){var c=[];b?B(b,function(b){c.push(a[b])}):z(a,function(a,b){c.push(b)});return c}),call:H(a),
array:ca,unite:I,uniq:H(N),intersection:H(V),copyObj:L,range:function(a,b){for(var c=[],e=null==b?a:b,f=null!=b?a:0;f<e;f++)c.push(f);return new M(c)},bind:b,partial:function(a,c,e){return b(a,null,c,e)},eachObj:z,mapObj:function(a,b){var c={};z(a,function(a,e){c[a]=b(a,e)});return c},filterObj:function(a,b){var c={};z(a,function(a,e){b(a,e)&&(c[a]=e)});return c},isList:p,isFunction:Q,isObject:m,isNumber:n,isBool:u,isDate:q,isValue:l,isString:h,toString:k,dateClone:t,dateAdd:fa,dateDiff:ja,dateMidnight:function(a){a=
a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:c,formatValue:function(a,b){a=s(a,/^\?/);if(q(b)){var t,v,l=a,d=b,O={y:["FullYear",g],Y:["FullYear",function(a){return a%100}],M:["Month",r],n:["Month",la],N:["Month",ia],d:["Date",g],m:["Minutes",g],H:["Hours",g],h:["Hours",function(a){return a%12||12}],k:["Hours",r],K:["Hours",function(a){return a%12}],s:["Seconds",g],S:["Milliseconds",g],a:["Hours",function(a,b){return(b||na)[12>a?0:1]}],w:["Day",pa],W:["Day",ma],z:["TimezoneOffset",
function(a){if(t)return t;var b=0<a?a:-a;return(0>a?"+":"-")+c(2,Math.floor(b/60))+c(2,b%60)}]};if(v=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))t=v[1],d=fa(b,"minutes",e(v,2,b)),l=v[4];return s(l,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,e,f){if(b=O[b])a=d["get"+(p(b)?b[0]:b)].call(d),f=f&&f.split(","),a=p(b[1])?(f||b[1])[a]:b[1](a,f),null!=a&&!h(a)&&(a=c(e.length+1,a));return a})}return w(a.split(/\s*\|\s*/),function(a){var c,e;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var j=parseFloat(c[3]);
if(isNaN(j)||!n(a))a=null==a?"null":k(a),j=c[3];if(c[1]){if(!c[2]&&a==j||"<"==c[1]&&a>j||">"==c[1]&&a<j)return null}else if(a!=j)return null;a=c[4]}if(n(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){e=k(c[1])+k(c[2]);var j=k(c[1]).length?s(e,/[.,]/g).length:1,g=s(s(e,/^.*[0#]/),/[^,.]/g),p=k(c[3]).length+k(c[4]).length,t,v;if(e=/([.,])[^.,]+[.,]/.exec(c[0]))t=e[1],v=e[0].length-2;t=f(b,p,k(c[3]).length,g,j,t,v);v=a;a=c.index;c=k(c[0]).length;return v.substr(0,a)+t+v.substr(a+c)}return a})},parseDate:function(a,
b){var c={y:0,Y:[0,-2E3],M:[1,1],n:[1,la],N:[1,ia],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,na]},f={},g=1,t,v,l;if(/^\?/.test(a)){if(""==G(b))return null;a=a.substr(1)}if(l=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))t=l,a=l[3];if(!(l=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,e){return/[dmhkyhs]/i.test(b)?(f[g++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(v=g,g+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(f[g++]=[b,e&&e.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?
"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":E(a)})).exec(b)))return ea;for(var d=[0,0,0,0,0,0,0],k=1;k<g;k++){var O=l[k],h=f[k];if(p(h)){var n=h[0],m=c[n],W=m[0],h=w(h[1]||m[1],function(a,b){return T(O.toLowerCase(),a.toLowerCase())?b:null});if(null==h)return ea;d[W]="a"==n?d[W]+12*h:h}else h&&(n=parseInt(O),m=c[h],p(m)?d[m[0]]+=n-m[1]:d[m]+=n)}c=new Date(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);return fa(c,"minutes",-e(t,1,c)-e(l,v,c))},parseNumber:v,trim:G,escapeRegExp:E,escapeHtml:ka,format:function(a,
b){return W(a)(b)},template:W,formatHtml:function(a,b){return W(a,ka)(b)}},R);return{_:R,M:M}});/^u/.test(typeof define)&&(def={},this.define=function(d,k){def[d]=k()},this.require=function(d){return def[d]});
define("minified",function(){function d(a){return null!=a?""+a:""}function k(a){return"string"==typeof a}function h(a){return a&&a.nodeType}function m(a){return a&&null!=a.length&&!k(a)&&!h(a)&&!r(a)}function n(a){return a}function q(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function u(a,b){var c=[];g(a,function(a,e){b(a,e)&&c.push(a)});return c}function l(a,b,c){var f=[];a(b,function(a,b){g(c(a,b),function(a){f.push(a)})});return f}function p(a,b,c){return d(a).replace(b,c||"")}function g(a,
b){if(m(a))for(var c=0;c<a.length;c++)b(a[c],c);else null!=a&&b(a,0);return a}function r(a){return"function"==typeof a&&!a.item}function s(){return 1}function E(a,b){var c=RegExp("\\b"+a+"\\b","i");return a?function(a){return c.test(a[b])}:s}function G(a,b){for(var c=0;a&&c<a.length;c++)a[c]===b&&a.splice(c--,1)}function z(a){return parseFloat(p(a,/^[^\d-]+/))}function B(a){return a.minified=a.minified||++ca}function K(a,b){var c=[],f={},e;g(a,function(a){g(b(a),function(a){if(h(a)&&!f[e=B(a)])c.push(a),
f[e]=!0})});return c}function X(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function S(a){a()}function Y(a,b){g(b,function(a){a.e.detachEvent("on"+a.n,a.h)})}function C(){g(N,S);N=null}function T(a){N?N.push(a):w.setTimeout(a,0)}function Z(a,b,c,f){return function(){var e=x(y.createElement(a));m(b)||null!=b&&"object"!=typeof b?e.add(b):e.set(b).add(c);f&&f(e);return e}}function aa(a){return ba[a]||"\\u"+
("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function x(a,b,c){return r(a)?T(a):new D(F(a,b,c))}function F(a,b,c){function f(a){a=l(g,a,function ga(a){return m(a)?l(g,a,ga):a});return e?u(a,function(a){for(;a=a.parentNode;){if(a===e)return!0;if(c)return!1}}):a}var e,v,t,d;if(b&&1!=(b=F(b)).length)return K(b,function(b){return F(a,b,c)});e=b&&b[0];if(!k(a))return f(a);if(1<(b=a.split(/\s*,\s*/)).length)return K(b,function(a){return F(a,e,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return F(b[2],F(b[1],e),
c);if(a!=(b=p(a,/^#/)))return f(y.getElementById(b));e=e||y;v=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];d=b[2];b=(t=e.getElementsByClassName&&d)?e.getElementsByClassName(d):e.getElementsByTagName(v||"*");if(v=t?v:d)b=u(b,E(v,t?"nodeName":"className"));return e?f(b):b}function L(a,b){var c,f={};if(r(a))return a;if(!a||k(a)&&("*"==a||(c=/^([\w-]*)\.([\w-]+)$/.exec(a))||(c=/^([\w-]+)$/.exec(a)))){var e=E(c&&c[1],"nodeName"),g=E(c&&c[2],"className");return function(a){return 1==h(a)&&e(a)&&g(a)}}if(b)return function(c){return null!=
x(a,b).find(c)};x(a).each(function(a){f[B(a)]=!0});return function(a){return f[B(a)]}}function U(){var a,b=[],c=[],f=function(e,f){null==a&&(a=e,b=f,w.setTimeout(function(){g(c,S)},0))},e=f.then=function(e,f){var g=U(),p=function(){try{var c=a?e:f;if(r(c)){var p=c.apply(null,b);p&&r(p.then)?p.then(function(a){g(!0,[a])},function(a){g(!1,[a])}):g(!0,[p])}else g(a,b)}catch(d){g(!1,[d])}};null!=a?w.setTimeout(p,0):c.push(p);return g};f.error=function(a){return e(0,a)};return f}function D(a){for(var b=
this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var w=this,y=document,ca=1,I={},N=[],V=[],da=w.requestAnimationFrame||function(a){w.setTimeout(a,33)},A=!!y.all&&!N.map,ba={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};q({each:function(a){return g(this,a)},filter:function(a){return new D(u(this,a))},collect:function(a){return new D(l(g,this,a))},sub:function(a,b){var c=0>a?this.length+a:a,f=0<=b?b:this.length+(b||0);return this.filter(function(a,b){return b>=c&&b<f})},find:function(a,b){for(var c,
f=r(a)?a:function(b,c){if(a===b)return c},e=b;e<this.length;e++)if(null!=(c=f(this[e],e)))return c},remove:function(){g(this,function(a){A&&1==h(a)&&(g(F("*",a),function(a){Y(0,I[a.minified]);delete I[a.minified]}),removeEvents(a));a.parentNode.removeChild(a)})},text:function(){function a(b){var c=h(b);return 1==c?l(g,b.childNodes,a):5>c?b.data:null}return l(g,this,a).join("")},trav:function(a,b,c){var f=L("number"==typeof b?null:b),e="number"==typeof b?b:c||1E9;return new D(K(this,function(b){for(var c=
[];(b=b[a])&&c.length<e;)f(b)&&c.push(b);return c}))},select:function(a,b){return x(a,this,b)},is:function(a){var b=L(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(L(a))},get:function(a,b){var c=this,f=c[0];if(f){if(k(a)){var e=p(p(a,/^%/,"data-"),/^[$@]+/),d;d="$"==a?f.className:"$$"==a?A?f.style.cssText:f.getAttribute("style"):/^\$\$/.test(a)&&("hidden"==f.style.visibility||"none"==f.style.display)?0:"$$fade"==a?isNaN(d=A?z(f.style.filter)/100:z(f.style.opacity))?
1:d:"$$slide"==a?c.get("$height"):"$$scrollX"==a?null!=w.pageXOffset?w.pageXOffset:(y.documentElement||y.body.parentNode||y.body).scrollLeft:"$$scrollY"==a?null!=w.pageXOffset?w.pageYOffset:(y.documentElement||y.body.parentNode||y.body).scrollTop:/^\$[^$]/.test(a)?w.getComputedStyle?w.getComputedStyle(f,null).getPropertyValue(p(e,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(f.currentStyle||f.style)[e]:/^[@%]/.test(a)?f.getAttribute(e):f[e];return b?z(d):d}var l={};(m(a)?g:q)(a,function(a){l[a]=
c.get(a,b)});return l}},set:function(a,b){var c=this,f;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(f=z(b))?"visible":"hidden",$display:"block"}).set("$$fade"==a?A?{$filter:"alpha(opacity = "+100*f+")",$zoom:1}:{$opacity:f}:{$height:/px/.test(b)?b:function(a,b,c){return f*(f&&X(x(c)))+"px"},$overflow:"hidden"}):g(c,function(c,f){var d=p(p(a,/^%/,"data-"),/^[@$]+/),l=c.className||"",k=/^\$/.test(a)?c.style:c,h=r(b)?b(x(c).get(a),f,c):b;"$"==a?null!=h&&(g(h.split(/\s+/),function(a){var b=
p(a,/^[+-]/),c=l;l=p(l,RegExp("\\b"+b+"\\b","i"));if(/^\+/.test(a)||b==a&&c==l)l+=" "+b}),c.className=p(l,/^\s+|\s+(?=\s|$)/g)):"$$"==a?A?k.cssText=h:null!=h?c.setAttribute("style",h):c.removeAttribute("style"):"$$scrollX"==a?c.scroll(h,x(c).get("$$scrollY")):"$$scrollY"==a?c.scroll(x(c).get("$$scrollX"),h):/^[@%]/.test(a)?null!=h?k.setAttribute(d,h):k.removeAttribute(d):k[d]=h}):k(a)||r(a)?c.set("$",a):q(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return this.each(function(c,f){var e;
(function t(a){m(a)?g(a,t):r(a)?t(a(c,f)):null!=a&&(a=h(a)?a:y.createTextNode(a),e?e.parentNode.insertBefore(a,e.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),e=a)})(h(a)&&f?null:a)})},fill:function(a){return this.each(function(a){x(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,c,f){f.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,f){f.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,
c.firstChild)})},replace:function(a){return this.add(a,function(a,c,f){f.replaceChild(a,c)})},clone:function(a){return this.collect(function(b){var c=h(b);if(1==c){var f={$:b.className||null,$$:A?b.style.cssText:b.getAttribute("style")};g(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(f["@"+c]=a.value)});return Z(b.tagName,f,x(b.childNodes).clone(),a)}return 5>c?b.data:null})},animate:function(a,b,c,f){var e=this,l=[],h,k=U(),m=r(c)?c:function(a,b,e){return a+
e*(b-a)*(c+(1-c)*e*(3-2*e))};f=f||{};f.time=0;f.stop=function(){h();k(!1)};b=b||500;c=c||0;g(e,function(b,c){var e={o:x(b),e:{}};q(e.s=e.o.get(a),function(f,g){e.e[f]=r(dest)?dest(g,c,b):"$$slide"==f?a[f]*X(e.o)+"px":a[f]});l.push(e)});h=x.loop(function(a){function c(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(p(a,/[^\d,]+/g).split(",")[b])}f.time=a;a>=b||0>a?(g(l,function(a){a.o.set(a.e)}),h(),f.time=null,k(!0,[e])):g(l,function(e){q(e.s,function(f,
g){var l="rgb(",h=e.e[f],k=a/b;if(/^#|rgb\(/.test(h))for(var n=0;3>n;n++)l+=Math.round(m(c(g,n),c(h,n),k))+(2>n?",":")");else l=p(h,/-?[\d.]+/,d(m(z(g),z(h),k)));e.o.set(f,l)})})});return k},toggle:function(a,b,c,f){var e=this,g={},l=!1,d=/\b(?=\w)/g,h;return b?e.set(a)&&function(d){if(d!==l)return h=(l=!0===d||!1===d?d:!l)?b:a,r(h)?h(e,c,f):c?e.animate(h,g.stop?g.stop()||g.time:c,f,g):e.set(h)&&void 0}:e.toggle(p(a,d,"-"),p(a,d,"+"))},values:function(a){var b=a||{};this.each(function(a){var f=a.name,
e=d(a.value);if(/form/i.test(a.tagName))x(l(g,a.elements,n)).values(b);else if(f&&(!/kbox|dio/i.test(a.type)||a.checked))b[f]=l(g,[b[f],e],n)});return b},offset:function(){for(var a=this[0],b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},on:function(a,b,c,f){return this.each(function(e,l){g(a.split(/\s/),function(a){var g=p(a,/\|/),d=r(b)||null,h=d?b:c,k=d&&f&&c,m=d&&(f||c),n=g==a,q=d?s:L(b,e),d=function(a,b){var c=a||w.event,e,f=b||c.target;if(q(f)&&(e=(!h.apply(k||f,
m||[c,l])||m)&&n)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return e};a={e:e,h:d,n:g};(h.M=h.M||[]).push(a);A?(e.attachEvent("on"+g,d),g=B(e),(I[g]=I[g]||[]).push(a)):(e.addEventListener(g,d,!1),(e.minified2=e.minified2||[]).push(a))})})},onOver:function(a){var b=this,c=[];return b.on("|mouseover |mouseout",function(f,e){var g="mouseout"!=f.type,d=f.relatedTarget||f.toElement;if(c[e]!==g&&(g||!d||d!=b[e]&&!x(d).trav("parentNode",b[e]).length))c[e]=
g,a.call(this,g,e)})},trigger:function(a,b){return this.each(function(c){for(var f,e=c;e&&!f;)g(A?I[e.minified]:e.minified2,function(e){e.n==a&&(f=f||e.h(b,c))}),e=e.parentNode})}},function(a,b){D.prototype[a]=b});q({request:function(a,b,c,f,e,p){var m,n=c,r=0,s=U();try{m=w.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(f=f||{},!k(c)&&!h(c)&&(n=l(q,c,function(a,b){return l(g,b,function(b){return encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")})}).join("&")),
/post/i.test(a)?!h(c)&&(!k(c)&&!f["Content-Type"])&&(f["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+n,n=null)),m.open(a,b,!0,e,p),q(f,function(a,b){m.setRequestHeader(a,b)}),m.onreadystatechange=function(){4==m.readyState&&!r++&&(200==m.status?s(!0,[m.responseText,m.responseXML]):s(!1,[m.status,m.statusText,m.responseText]))},m.send(n)}catch(u){r||s(!1,[0,null,d(u)])}return s},toJSON:function b(c){return null==c?""+c:k(c=c.valueOf())?'"'+p(c,/[\\\"\x00-\x1f\x22\x5c]/g,aa)+'"':m(c)?
"["+l(g,c,b).join()+"]":"object"==typeof c?"{"+l(q,c,function(c,e){return b(c)+":"+b(e)}).join()+"}":d(c)},parseJSON:w.JSON?w.JSON.parse:function(b){b=p(b,/[\x00\xad\u0600-\uffff]/g,aa);if(/^[[\],:{}\s]*$/.test(p(p(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:T,setCookie:function(b,c,f,e,g,d){y.cookie=b+"="+(d?c:escape(c))+(f?"; expires="+("object"==typeof f?f:new Date((new Date).getTime()+864E5*f)).toUTCString():"")+"; path="+(e?escapeURI(e):"/")+
(g?"; domain="+escape(g):"")},getCookie:function(b,c){var f,e=(f=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(y.cookie))&&f[2];return c?e:e&&unescape(e)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){G(V,c)}};2>V.push(c)&&function e(){g(V,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&da(e)}();return c.s},off:function(b){g(b.M,function(b){A?(b.e.detachEvent("on"+b.n,b.h),G(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),G(b.e.minified2,b))});b.M=null}},function(b,
c){x[b]=c});w.onload=C;y.addEventListener&&y.addEventListener("DOMContentLoaded",C,!1);w.unload=function(){g(I,Y)};return{$:x,$$:function(b){return F(b)[0]},EE:Z,M:D}});var _=(require("minifiedUtil")||require("minified"))._;
function parseSourceSections(d){function k(){return{id:"anon"+h++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}d=d.split("\n");var h=100,m=[],n=k(),q=!1;_.each(d,function(d){if(q&&/^.*\*\/\s*$/.test(d))q=!1;else if(q){var l=d.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),p=l.match(/^\s*@([a-z]+)/);p?(p=p[1],l=_.trim(l.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==p||"example"==p?n[p].push(l):"requires"==p?l.length&&_.each(l.split(/\s+/),function(g){n.requires[g]=1}):"param"==
p?n.params.push({name:l.replace(/\s.*$/,""),desc:l.replace(/^\S+\s+/,"")}):"return"==p?n.params.push({name:"@return",desc:l}):"function"==p?n.params[n.params.length-1].funcs.push(l):n[p]=""!=l?l:1):n.params.length?n.params[n.params.length-1].desc+="\n"+_.trim(l):n.example.length?n.example[n.example.length-1]+="\n"+l:n.desc+=l+"\n"}else/^\s*\/\*\$/.test(d)&&!/\*\/\s*$/.test(d)&&(q=!0,m.push(n),n=k());n.src.push(d)});m.push(n);return m}
function createSectionMap(d){var k={};_.each(d,function(d){k[d.id]=d});return k}function completeRequirements(d,k){var h=0;_.each(d,function(d){_.eachObj(d.requires,function(n){var q=k[n];if(!q)throw Error('Unknown id in requirement: "'+n+'"');_.eachObj(q.requires,function(k){d.requires[k]||(h++,d.requires[k]=1)})})});0<h?completeRequirements(d,k):_.each(d,function(d){_.eachObj(d.requires,function(h){k[h].requiredBy[d.id]=1})})}
function calculateDependencies(d,k){var h={};_.eachObj(k,function(m){k[m]&&(h[m]=1,_.eachObj(d[m].requires,function(d){h[d]=1}))});return h}function createDefaultConfigurationMap(d,k){var h={};_.each(d,function(d){if(d.configurable&&("default"==d.configurable||k))h[d.id]=1});return h}
function compile(d,k,h){var m="",n=calculateDependencies(k,h),q=[],u=!0;_.filter(d,function(d){return n[d.id]||!(d.configurable||d.dependency)}).each(function(d){_.each(d.src,function(d){if(/^\s*$/.test(d))u||(m+="\n"),u=!0;else{var g=d.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(g&&"cond"==g[2]&&!!n[g[4]]!=("!"==g[3]))m+=g[1]+g[5]+"\n";else{var l=!1,h=!0;g&&"condblock"==g[2]?q.push(!!n[g[4]]!=("!"==g[3])):/^\s*\/\/\s*@condend\b/.test(d)&&(l=!0);for(g=0;g<q.length;g++)if(!q[g]){h=
!1;break}h&&(m+=d+"\n");l&&q.pop()}u=!1}})});return m}function prepareSections(d){d=parseSourceSections(d);var k=createSectionMap(d);completeRequirements(d,k);var h=createDefaultConfigurationMap(d);return{sections:d,sectionMap:k,enabledSections:h}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(d,k){var h=_.filter(d,function(d){return d.configurable}),m=_.filter(_.keys(k),function(d){return k[d]}),n,q=[];m.length==h.length?(n=CONFIG_COMMENT+CONFIG_ALL,q=[]):m.length/3>h.length/2?(n=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,q=_.filter(h,function(d){return!k[d.id]}).collect(function(d){return d.id})):(n=CONFIG_COMMENT+CONFIG_ONLY,q=m);var u="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+n,l=50;_(q).sort().each(function(d){l<d.length?
(l=70,u+="\n// - "+d+", "):(u+=d+", ",l-=d.length+2)});return u=u.replace(/,\s*$/,".\n")}function fixConfig(d,k){_.eachObj(k,function(h){d[h]?_.copyObj(d[h].requires,k):delete k[h]});return k}
function deserializeEnabledSections(d,k,h){function m(d){return RegExp("^"+d.replace(/ /g,"\\s+"))}var n=m(CONFIG_START+".*"),q=m(CONFIG_ALL.replace(/\./,"\\.")),u=m(CONFIG_ALL_EXCEPT+"\\s*"),l=m(CONFIG_ONLY+"\\s*"),p=m(CONFIG_COMMENT);h=h.split("\n");for(var g=0;g<h.length;g++){var r=h[g];if(/^\s*\/\/s*/.test(r)&&(r=r.replace(/^\s*\/\/\s*/,""),n.test(r)&&g+1<h.length)){for(var r="",s=g+1;s<h.length;s++)if(p.test(h[s])){if(r+=h[s].replace(p,""),/\s*\.\s*$/.test(h[s]))break}else break;if(q.test(r))return createDefaultConfigurationMap(d,
!0);r=r.replace(/\s*\.\s*$/,"");if(u.test(r)){var E=createDefaultConfigurationMap(d,!0);_.each(r.replace(u,"").split(/\s*,\s*/),function(d){delete E[d]});return fixConfig(k,E)}if(l.test(r))return E={},_.each(r.replace(l,"").split(/\s*,\s*/),function(d){k[d]&&(E[d]=1)}),fixConfig(k,E)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(d,k,h){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:d,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:k?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(d){h&&h($.parseJSON(d))},function(d,k,q){window.console&&console.log("error",d,k,q);h&&h(null)}).error(function(d){window.console&&console.log(d)})}
function setUpConfigurationUI(d){function k(){$(".modCheck").each(function(d){var h=0;$(".secCheck",d.parentNode.parentNode).each(function(d){d.checked&&h++});d.checked=0<h})}function h(l){var h=d.sectionMap[l.id.substr(4)];l.checked?_.eachObj(h.requires,function(d){$("#sec-"+d).set("checked",!0)}):_.eachObj(h.requiredBy,function(d){$("#sec-"+d).set("checked",!1)})}$("#compile").on("click",function(){var h={};$(".secCheck").each(function(d){d.checked&&(h[d.id.substr(4)]=1)});var k=compile(d.sections,
d.sectionMap,h),g=serializeEnabledSections(d.sections,h);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(k,!0,function(d){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});d?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=g+"\n"+d.compiledCode,$("#resultPlain").fill((d.statistics.compressedSize/1024).toFixed(2)+"kb ("+d.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((d.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+d.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+d.outputFilePath),$("#resultGzippedComment").set({$$fade:d.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=g+k,$("#resultPlain").fill((k.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(n){console.log(n)}return!1});
var m=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",m,[!1]);$("#loadConfig").on("|click",m,[!0]);$("#recreate").on("click",function(){try{var h=$$("#configSrc").value,n=deserializeEnabledSections(d.sections,d.sectionMap,h);n?(_.eachObj(d.sectionMap,function(d){var g=$$("#sec-"+d);g&&(g.checked=!!n[d])}),k()):alert("Can not find configuration in source.")}catch(g){console.log(g)}});$("#sectionCheckboxes").fill();for(var n=1;n<GROUPS.length;n++){var q;$("#sectionCheckboxes").add(q=
EE("div",{"@id":"divMod-"+n},EE("div",{className:"groupDescriptor"},[m=EE("input",{"@id":"mod-"+n,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+n},GROUPS[n])]))());$(m).on("change",function(){var d=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(k){k.checked=d;h(k)});k();return!0});var u;_.filter(d.sections,function(d){return d.group==GROUPS[n]&&d.configurable}).sort(function(d,h){var g=d.name||d.id,k=h.name||h.id;return g==k?0:g>k?1:
-1}).each(function(l){function n(g,h){var k=_.filter(_.keys(h),function(d){return!!h[d].name});if(!k.length)return null;var l=0,m=g;_.each(k,function(g){l++<Math.min(k.length,8)&&(1<l&&(m=l==Math.min(k.length,8)?m+" and ":m+", "),m=8==l&&8<k.length?m+"more":m+(d.sectionMap[g].name||d.sectionMap[g].id))});return m+="."}var g=n("Required by ",l.requiredBy),m=n("Requires ",l.requires);q.add(EE("div",{className:"sectionDescriptor"},[u=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+l.id,
checked:"default"==l.configurable?"checked":null})(),EE("label",{"@for":"sec-"+l.id},l.name||l.id),EE("div",{className:"requirements"},[g?[g,EE("br")]:null,m])]));$(u).on("change",function(){h(this);k();return!0})})}}
$(function(){var d=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);d&&10>parseInt(d[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(d){setUpConfigurationUI(prepareSections(d))}).error(function(d){window.console&&console.log(d)})});
