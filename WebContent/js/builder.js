if(/^u/.test(typeof define)){var def={};this.define=function(m,d){def[m]=d()};this.require=function(m){return def[m]}}
define("minifiedUtil",function(){function m(f){return f.substr(0,3)}function d(f){return null!=f?""+f:""}function k(f){return"string"==typeof f}function j(f){return"function"==typeof f}function l(f){return!!f&&"object"==typeof f}function r(f){return"number"==typeof f}function p(f){return l(f)&&!!f.getDay}function g(f){return!0===f||!1===f}function w(f){var a=typeof f;return"object"==a?!(!f||!f.getDay):"string"==a||"number"==a||g(f)}function u(f){return!!f&&null!=f.length&&!k(f)&&!(f&&f.nodeType)&&
!j(f)}function n(f){return f}function v(f){return f+1}function s(f,a,b){return d(f).replace(a,null!=b?b:"")}function P(f){return s(f,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function H(f){return s(f,/^\s+|\s+$/g)}function B(f,a){for(var b in f)f.hasOwnProperty(b)&&a(b,f[b]);return f}function C(f,a){if(f)for(var b=0;b<f.length;b++)a(f[b],b);return f}function J(f,a){var b=[],c=j(a)?a:function(f){return a!=f};C(f,function(f,a){c(f,a)&&b.push(f)});return b}function S(f,a,b){var c=[];f(a,function(f,a){u(f=b(f,
a))?C(f,function(f){c.push(f)}):null!=f&&c.push(f)});return c}function K(f,a){return S(C,f,a)}function T(f){var a=[];B(f,function(f){a.push(f)});return a}function t(f,a){var b=[];C(f,function(f,c){b.push(a(f,c))});return b}function D(f,b){if(u(f)){var c=O(b);return a(O(f).sub(0,c.length),c)}return null!=b&&f.substr(0,b.length)==b}function Q(f,a){if(u(f)){var b=O(a);return O(f).sub(-b.length).equals(b)||!b.length}return null!=a&&f.substr(f.length-a.length)==a}function F(f){var a=f.length;return t(f,
function(){return f[--a]})}function x(f,a,b){if(!f)return[];var c=f.length,e=0>a?c+a:a,h=null==b?c:0<=b?b:c+b;return J(f,function(f,a){return a>=e&&a<h})}function A(f,a){var b={};C(f,function(f){b[f]=a});return b}function U(f,a,b){B(f,function(f,c){if(null==a[f]||!b)a[f]=c});return a}function z(f,a){for(var b=j(a)?a:function(f,b){if(a===f)return b},c,e=0;e<f.length;e++)if(null!=(c=b(f[e],e)))return c}function L(a){return t(a,n)}function M(){var a=this;return function(){return new R(c(a,arguments))}}
function W(a){var b={};return J(a,function(a){if(b[a])return!1;b[a]=1;return!0})}function E(a,b){var c=A(b,1);return J(a,function(a){var f=c[a];c[a]=0;return f})}function X(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function a(f,b){var c=j(f)?f():f,e=j(b)?b():b;if(c==e)return!0;if(null==c||null==e)return!1;if(w(c)||w(e))return p(c)&&p(e)&&c.getTime()==e.getTime();if(u(c))return c.length!=e.length?!1:!z(c,function(f,b){if(!a(f,e[b]))return!0});if(u(e))return!1;var h=T(c),q=h.length,
y=0;B(e,function(){y++});return q!=y?!1:!z(h,function(f){if(!a(c[f],e[f]))return!0})}function b(a,b,c){return a.apply(c&&b,t(c||b,n))}function c(a,c,e){return t(a,function(a){return j(a)?b(a,c,e):Y})}function e(a,c,e,h){return function(){return b(a,c,K([e,arguments,h],n))}}function h(a,b){return q(b,0,0,0,a)}function q(a,b,c,e,h,q,y){function j(a){var b=a.length;return b>y?j(a.substr(0,b-y))+(q||",")+a.substr(b-y):a}var g=0>a,d=/(\d+)(\.(.*))?/.exec((g?-a:a).toFixed(b));a=d[1];for(e=(e||".")+d[3];a.length<
(h||1);)a="0"+a;y&&(a=j(a));return(g?"-":"")+a+(b?c?s(e,/[.,]?0+$/):e:"")}function y(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function V(a,b){if(1==arguments.length)return V(null,a);if(/^\?/.test(a)){if(""==H(b))return null;a=a.substr(1)}var c,e=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(s(s(s(b,","==e?/\./g:/,/g),e,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?Y:c}function ga(a){return new Date(a.getTime())}function ca(a,
b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function Z(a,b,c){return 3>arguments.length?Z(new Date,a,b):ca(ga(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function aa(a,b,c){var e=b.getTime(),h=c.getTime(),q=h-e;if(0>q)return-aa(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return q/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(q/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);e=ca(new Date(e),b,a);for(q=a;q<1.2*a+4;q++)if(ca(e,b,1).getTime()>h)return q}function ba(a){return s(a,
/['"\t\n\r]/g,function(a){return la[a]})}function da(a,c){if(ea[a])return ea[a];var e="with(_.isObject(obj)?obj:{}){"+t(a.split(/{{|}}}?/),function(a,b){var c,f=H(a),e=s(f,/^{/),f=f==e?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(e))?"each("+(""==H(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(e))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(e))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(e))?c[1]?"}\n":"});\n":(c=/^#(.*)/.exec(e))?
c[1]:(c=/(.*)::\s*(.*)/.exec(e))?"print("+f+'_.formatValue("'+ba(c[2])+'",'+(""==H(c[1])?"this":c[1])+(f&&")")+"));\n":"print("+f+(""==H(e)?"this":e)+(f&&")")+");\n";if(""!=a)return'print("'+ba(a)+'");\n'}).join("")+"}",h=new Function("obj","each","esc","print","_",e);return ea[a]=function(a,f){var e=[];h.call(f||a,a,function(a,b){u(a)?C(a,function(a,c){b.call(a,a,c)}):B(a,function(a,c){b.call(c,a,c)})},c||n,function(){b(e.push,e,arguments)},O);return e.join("")}}function ha(a){return s(a,/[<>'"&]/g,
function(a){return"&#"+a.charCodeAt(0)+";"})}function R(a,b){for(var c=0,e=0;e<a.length;e++){var h=a[e];if(b&&u(h))for(var q=0;q<h.length;q++)this[c++]=h[q];else this[c++]=h}this.length=c;this._=!0}function O(){return new R(arguments,!0)}function N(a){return function(b,c){return new R(a(this,b,c))}}function I(a){return function(b,c){return a(this,b,c)}}function G(a){return function(b,c,e){return new R(a(b,c,e))}}var Y,fa="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),
ia=t(fa,m),ja="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=t(ja,m),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ea={};U({each:I(C),filter:N(J),collect:N(K),map:N(t),toObject:I(A),equals:I(a),sub:N(x),reverse:N(F),find:I(z),startsWith:I(D),endsWith:I(Q),contains:I(X),call:N(c),array:I(L),unite:I(M),uniq:N(W),intersection:N(E),join:function(a){return t(this,n).join(a)},sort:function(a){return new R(t(this,n).sort(a))},tap:function(a){a(this);return this}},
R.prototype);U({filter:G(J),collect:G(K),collectObj:G(function(a,b){return S(B,a,b)}),map:G(t),sub:G(x),reverse:G(F),each:C,toObject:A,find:z,contains:X,startsWith:D,endsWith:Q,equals:a,keys:G(T),values:G(function(a,b){var c=[];b?C(b,function(b){c.push(a[b])}):B(a,function(a,b){c.push(b)});return c}),call:G(c),array:L,unite:M,uniq:G(W),intersection:G(E),bind:e,partial:function(a,b,c){return e(a,null,b,c)},once:function(a){var c=0;return function(){if(!c++)return b(a,this,arguments)}},nonOp:n,eachObj:B,
mapObj:function(a,b){var c={};B(a,function(a,e){c[a]=b(a,e)});return c},filterObj:function(a,b){var c={},e=j(b)?b:function(a){return b!=a};B(a,function(a,b){e(a,b)&&(c[a]=b)});return c},isList:u,isFunction:j,isObject:l,isNumber:r,isBool:g,isDate:p,isValue:w,isString:k,toString:d,toList:function(a){return u(a)?a:null!=a?[a]:[]},dateClone:ga,dateAdd:Z,dateDiff:aa,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:q,pad:h,formatValue:function(a,
b){a=s(a,/^\?/);if(p(b)){var c,e,j=a,g=b,l={y:["FullYear",n],M:["Month",v],n:["Month",ia],N:["Month",fa],d:["Date",n],m:["Minutes",n],H:["Hours",n],h:["Hours",function(a){return a%12||12}],K:["Hours",v],k:["Hours",function(a){return a%12+1}],s:["Seconds",n],S:["Milliseconds",n],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(a){if(c)return c;var b=0<a?a:-a;return(0>a?"+":"-")+h(2,Math.floor(b/60))+h(2,b%60)}]};if(e=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))c=
e[1],g=Z(b,"minutes",y(e,2,b)),j=e[4];return s(j,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,c,e){if(b=l[b])a=g["get"+(u(b)?b[0]:b)].call(g),e=e&&e.split(","),a=u(b[1])?(e||b[1])[a]:b[1](a,e),null!=a&&!k(a)&&(a=h(c.length+1,a));return a})}return z(a.split(/\s*\|\s*/),function(a){var c,e;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var f=parseFloat(c[3]);if(isNaN(f)||!r(a))a=null==a?"null":d(a),f=c[3];if(c[1]){if(!c[2]&&a==f||"<"==c[1]&&a>f||">"==c[1]&&a<f)return null}else if(a!=f)return null;
a=c[4]}if(r(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){e=d(c[1])+d(c[2]);var f=d(c[1]).length?s(e,/[.,]/g).length:1,h=s(s(e,/^.*[0#]/),/[^,.]/g),y=d(c[3]).length+d(c[4]).length,g,j;if(e=/([.,])[^.,]+[.,]/.exec(c[0]))g=e[1],j=e[0].length-2;g=q(b,y,d(c[3]).length,h,f,g,j);j=a;a=c.index;c=d(c[0]).length;return j.substr(0,a)+g+j.substr(a+c)}return a})},parseDate:function(a,b){var c={y:0,M:[1,1],n:[1,ia],N:[1,fa],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},e={},h=1,q,j,g;if(/^\?/.test(a)){if(""==
H(b))return null;a=a.substr(1)}if(g=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))q=g,a=g[3];if(!(g=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,f){return/[dmhkyhs]/i.test(b)?(e[h++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(j=h,h+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(e[h++]=[b,f&&f.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":P(a)})).exec(b)))return Y;for(var d=[0,0,0,0,0,0,0],l=1;l<h;l++){var w=g[l],n=e[l];
if(u(n)){var m=n[0],k=c[m],V=k[0],n=z(n[1]||k[1],function(a,b){return D(w.toLowerCase(),a.toLowerCase())?b:null});if(null==n)return Y;d[V]="a"==m?d[V]+12*n:n}else n&&(m=parseInt(w),k=c[n],u(k)?d[k[0]]+=m-k[1]:d[k]+=m)}c=new Date(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);return Z(c,"minutes",-y(q,1,c)-y(g,j,c))},parseNumber:V,copyObj:U,coal:function(){return z(arguments,n)},trim:H,escapeRegExp:P,escapeHtml:ha,format:function(a,b){return da(a)(b)},template:da,htmlTemlplate:function(a){return da(a,ha)}},O);
return{_:O}});/^u/.test(typeof define)&&(def={},this.define=function(m,d){def[m]=d()},this.require=function(m){return def[m]});
define("minified",function(){function m(a){return null!=a?""+a:""}function d(a){return"string"==typeof a}function k(a){return"function"==typeof a&&!a.item}function j(a){return a&&a.nodeType}function l(a){return a&&null!=a.length&&!d(a)&&!j(a)&&!k(a)}function r(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function p(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function g(a,b){var c=[],e=k(b)?b:function(a){return b!=a};p(a,function(a,b){e(a,b)&&c.push(a)});return c}function w(a,
b){var c=[];p(a,function(a,h){l(a=b(a,h))?p(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function u(a,b){var c=[];r(a,function(a,h){l(a=b(a,h))?p(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function n(a,b,c){return m(a).replace(b,c||"")}function v(a){return parseFloat(n(a,/^[^\d-]+/))}function s(a){return a.minified=a.minified||++U}function P(a,b){function c(a){if(j(a)&&!h[q=s(a)])e.push(a),h[q]=!0}var e=[],h={},q;p(a,function(a){a=b(a);l(a)?p(a,c):c(a)});return e}function H(a){var b=
{$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function B(a){a()}function C(){p(L,B);L=null}function J(a){L?L.push(a):x.setTimeout(a,0)}function S(a,b,c,e){return function(){var h=t(A.createElement(a));l(b)||"object"!=typeof b?h.add(b):h.set(b).add(c);e&&e(h);return h}}function K(){var a,b=[],c=[],e=function(e,h){null==a&&(a=e,b=h,x.setTimeout(function(){p(c,B)},0))},h=e.then=function(e,h){var g=K(),d=function(){try{var c=
a?e:h;if(k(c)){var d=c.apply(null,b);d&&k(d.then)?d.then(function(a){g(!0,[a])},function(a){g(!1,[a])}):g(!0,[d])}else g(a,b)}catch(j){g(!1,[j])}};null!=a?x.setTimeout(d,0):c.push(d);return g};e.always=function(a){return h(a,a)};e.error=function(a){return h(0,a)};return e}function T(a){return X[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function t(a,b,c){return k(a)?J(a):new F(D(a,b,c))}function D(a,b,c){function e(a){a=function aa(a){return l(a)?w(a,aa):a}(a);return h?g(a,function(a){for(;a=
a.parentNode;){if(a===h)return!0;if(c)return!1}}):a}var h,q,j,k,m;if(b&&1!=(b=D(b)).length)return P(b,function(b){return D(a,b,c)});h=b&&b[0];if(!d(a))return e(l(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return P(b,function(a){return D(a,h,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return D(b[2],D(b[1],h),c);if(a!=(b=n(a,/^#/)))return e([A.getElementById(b)]);h=h||A;q=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];k=b[2];b=(j=h.getElementsByClassName&&k)?h.getElementsByClassName(k):h.getElementsByTagName(q||"*");
if(q=j?q:k)m=RegExp("\\b"+q+"\\b","i"),b=g(b,function(a){return m.test(a[j?"nodeName":"className"])});return h?e(b):b}function Q(a){var b;if(k(a))return a;if(!a||d(a)&&("*"==a||(b=/^([\w-]*)\.([\w-]+)$/.exec(a))||(b=/^([\w-]+)$/.exec(a)))){var c=b&&b[1]&&RegExp(b[1],"i"),e=b&&b[2]&&RegExp("\\b"+b[2]+"\\b","i");return function(a){return 1==j(a)&&(!c||c.test(a.nodeName))&&(!e||e.test(a.className))}}var h={};t(a).each(function(a){h[s(a)]=!0});return function(a){return h[s(a)]}}function F(a){for(var b=
this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var x=this,A=document,U=1,z={},L=[],M=[],W=x.requestAnimationFrame||function(a){x.setTimeout(a,33)},E=!!A.all&&!L.map,X={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return p(this,a)},filter:function(a){return new F(g(this,a))},collect:function(a){return new F(w(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,e=0<=b?b:this.length+(b||0);return new F(g(this,function(a,b){return b>=c&&b<e}))},find:function(a){for(var b,
c=k(a)?a:function(b,c){if(a===b)return c},e=0;e<this.length;e++)if(null!=(b=c(this[e],e)))return b},remove:function(){p(this,function(a){if(E&&1==j(a)){var b=function(a){p(z[a.minified],function(b){a.detachEvent("on"+b.n,b.h)});delete z[a.minified]};p(D("*",a),b);b(a)}a.parentNode.removeChild(a)})},text:function(){function a(b){var c=j(b);return 1==c?w(b.childNodes,a):5>c?b.data:null}return w(this,a).join("")},trav:function(a,b,c){var e=Q(b),h=c||1E9;return new F(P(this,function(b){for(var c=[];(b=
b[a])&&9!=b.nodeType&&c.length<h;)e(b)&&c.push(b);return c}))},select:function(a,b){return t(a,this,b)},is:function(a){var b=Q(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(Q(a))},get:function(a,b){var c=this,e=c[0];if(e){if(d(a)){var h=n(n(a,/^%/,"data-"),/^[$@]/),g;g="$"==a?e.className:"$$"==a?E?e.style.cssText:e.getAttribute("style"):/\$\$/.test(a)&&("hidden"==e.style.visibility||"none"==e.style.display)?0:"$$fade"==a?isNaN(g=E?v(e.style.filter)/100:v(e.style.opacity))?
1:g:"$$slide"==a?c.get("$height"):/^\$/.test(a)?x.getComputedStyle?x.getComputedStyle(e,null).getPropertyValue(n(h,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(e.currentStyle||e.style)[h]:/^[@%]/.test(a)?e.getAttribute(h):e[h];return b?v(g):g}var j={};(l(a)?p:r)(a,function(a){j[a]=c.get(a,b)});return j}},set:function(a,b){var c=this,e;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(e=v(b))?"visible":"hidden",$display:"block"}).set("$$fade"==a?E?{$filter:"alpha(opacity = "+100*e+")",
$zoom:1}:{$opacity:e}:{$height:/px$/.test(b)?b:function(a,b,c){return e*(e&&H(t(c)))+"px"},$overflow:"hidden"}):p(c,function(c,e){var g=n(n(a,/^%/,"data-"),/^[@$]/),d=c.className||"",j=/^\$/.test(a)?c.style:c,l=k(b)?b(t(c).get(a),e,c):b;"$"==a?null!=l&&(p(l.split(/\s+/),function(a){var b=n(a,/^[+-]/),c=d;d=n(d,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&c==d)d+=" "+b}),c.className=n(d,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?j.cssText=l:null!=l?c.setAttribute("style",l):c.removeAttribute("style"):/^[@%]/.test(a)?
null!=l?j.setAttribute(g,l):j.removeAttribute(g):j[g]=l}):d(a)||k(a)?c.set("$",a):r(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return p(this,function(c,e){var h;(function y(a){l(a)?p(a,y):k(a)?y(a(c,e)):null!=a&&(a=j(a)?a:A.createTextNode(a),h?h.parentNode.insertBefore(a,h.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),h=a)})(j(a)&&e?null:a)})},fill:function(a){return p(this,function(a){t(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,c,e){e.insertBefore(a,
c)})},addAfter:function(a){return this.add(a,function(a,c,e){e.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,e){e.replaceChild(a,c)})},clone:function(a){return new F(w(this,function(b){var c=j(b);if(1==c){var e={$:b.className||null,$$:E?b.style.cssText:b.getAttribute("style")};p(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(e["@"+
c]=a.value)});return S(b.tagName,e,t(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,e){var h=this,g=[],d=/-?[\d.]+/,j,l=K(),w=k(c)?c:function(a,b,e){return a+e*(b-a)*(c+(1-c)*e*(3-2*e))};e=e||{};e.time=0;e.stop=function(){j();l(!1)};b=b||500;c=c||0;p(h,function(b){var c={o:t(b),e:{}};r(c.s=c.o.get(a),function(b,e){var h=a[b];"$$slide"==b&&(h=h*H(c.o)+"px");c.e[b]=/^[+-]=/.test(h)?n(h.substr(2),d,v(e)+v(n(h,/\+?=/))):h});g.push(c)});j=t.loop(function(a){function c(a,b){return/^#/.test(a)?
parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(n(a,/[^\d,]+/g).split(",")[b])}e.time=a;a>=b||0>a?(p(g,function(a){a.o.set(a.e)}),j(),e.time=null,l(!0,[h])):p(g,function(e){r(e.s,function(h,g){var j="rgb(",l=e.e[h],k=a/b;if(/^#|rgb\(/.test(l))for(var q=0;3>q;q++)j+=Math.round(w(c(g,q),c(l,q),k))+(2>q?",":")");else j=n(l,d,m(w(v(g),v(l),k)));e.o.set(h,j)})})});return l},toggle:function(a,b,c,e){var h=this,g={},j=!1,d=/\b(?=\w)/g,l;return b?h.set(a)&&function(d){if(d!==j)return l=
(j=!0===d||!1===d?d:!j)?b:a,k(l)?l(h,c,e):c?h.animate(l,g.stop?g.stop()||g.time:c,e,g):h.set(l)&&void 0}:h.toggle(n(a,d,"-"),n(a,d,"+"))},values:function(a){var b=a||{};this.each(function(a){var e=a.name,h=m(a.value),g=b[e];if(/form/i.test(a.tagName))t(a.elements).values(b);else if(e&&(!/kbox|dio/i.test(a.type)||a.checked))l(g)?g.push(h):b[e]=null==g?h:[g,h]});return b},on:function(a,b,c,e){return this.each(function(h,g){p(a.split(/\s/),function(a){var d=n(a,/\|/),j=e&&c,l=e||c,k=d==a;a=function(a,
c){var e=a||x.event,h;if((h=(!b.apply(j||c||e.target,l||[e,g])||l)&&k)&&!c)e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,e.cancelBubble=!0;return h};var m={e:h,h:a,n:d};(b.M=b.M||[]).push(m);E?(h.attachEvent("on"+d,a),(z[h.minified]=z[s(h)]||[]).push(m)):(h.addEventListener(d,a,!0),(h.minified2=h.minified2||[]).push(m))})})},onOver:function(a){var b=[],c=this;return c.on("|mouseover |mouseout",function(e,h){var g="mouseout"!=e.type,d=e.relatedTarget;if(b[h]!==g&&(g||
!d||d!=c[h]&&!t(d).trav("parentNode",c[h]).length))b[h]=g,a.call(this,g,h)})},trigger:function(a,b){var c=b||{};return this.each(function h(b,g,d){var j;p(E?z[b.minified]:b.minified2,function(h){h.n==a&&(j=j||h.h(c,d||b))});b.parentNode&&!j&&h(b.parentNode,g,d||b)})}},function(a,b){F.prototype[a]=b});r({request:function(a,b,c,e,h,g){var k,n=c,p=0,v=K();try{k=x.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(e=e||{},!d(c)&&!j(c)&&(n=u(c,function ba(a,b){return l(b)?
w(b,function(b){return ba(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!j(c)&&(!d(c)&&!e["Content-Type"])&&(e["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+n,n=null)),k.open(a,b,!0,h,g),r(e,function(a,b){k.setRequestHeader(a,b)}),k.onreadystatechange=function(){4==k.readyState&&!p++&&(200==k.status?v(!0,[k.responseText,k.responseXML]):v(!1,[k.status,k.statusText,k.responseText]))},k.send(n)}catch(s){p||v(!1,[0,null,m(s)])}return v},
toJSON:function b(c){return null==c?""+c:d(c=c.valueOf())?'"'+n(c,/[\\\"\x00-\x1f\x22\x5c]/g,T)+'"':l(c)?"["+w(c,b).join()+"]":"object"==typeof c?"{"+u(c,function(c,h){return b(c)+":"+b(h)}).join()+"}":m(c)},parseJSON:x.JSON?x.JSON.parse:function(b){b=n(b,/[\x00\xad\u0600-\uffff]/g,T);if(/^[[\],:{}\s]*$/.test(n(n(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:J,setCookie:function(b,c,e,h,g,d){A.cookie=b+"="+(d?c:escape(c))+(e?"; expires="+("object"==
typeof e?e:new Date((new Date).getTime()+864E5*e)).toUTCString():"")+"; path="+(h?escapeURI(h):"/")+(g?"; domain="+escape(g):"")},getCookie:function(b,c){var e,h=(e=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(A.cookie))&&e[2];return c?h:h&&unescape(h)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<M.length;b++)M[b]===c&&M.splice(b--,1)}};2>M.push(c)&&function h(){p(M,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&W(h)}();return c.s},wait:function(b,c){var e=
K();x.setTimeout(function(){e(!0,c)},b||0);return e},off:function(b){p(b.M,function(b){E?(b.e.detachEvent("on"+b.n,b.h),z[b.e.minified]=g(z[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!0),b.e.minified2=g(b.e.minified2,b))});b.M=null}},function(b,c){t[b]=c});x.onload=C;A.addEventListener&&A.addEventListener("DOMContentLoaded",C,!1);return{$:t,$$:function(b){return D(b)[0]},EE:S,M:F}});var _=require("minifiedUtil")._;
function parseSourceSections(m){function d(){return{id:"anon"+k++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}m=m.split("\n");var k=100,j=[],l=d(),r=!1;_.each(m,function(k){if(r&&/^.*\*\/\s*$/.test(k))r=!1;else if(r){var g=k.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),m=g.match(/^\s*@([a-z]+)/);m?(m=m[1],g=_.trim(g.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==m||"example"==m?l[m].push(g):"requires"==m?g.length&&_.each(g.split(/\s+/),function(g){l.requires[g]=1}):"param"==
m?l.params.push({name:g.replace(/\s.*$/,""),desc:g.replace(/^\S+\s+/,"")}):"return"==m?l.params.push({name:"@return",desc:g}):"function"==m?l.params[l.params.length-1].funcs.push(g):l[m]=""!=g?g:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(g):l.example.length?l.example[l.example.length-1]+="\n"+g:l.desc+=g+"\n"}else/^\s*\/\*\$/.test(k)&&!/\*\/\s*$/.test(k)&&(r=!0,j.push(l),l=d());l.src.push(k)});j.push(l);return j}
function createSectionMap(m){var d={};_.each(m,function(k){d[k.id]=k});return d}function completeRequirements(m,d){var k=0;_.each(m,function(j){_.eachObj(j.requires,function(l){var m=d[l];if(!m)throw Error('Unknown id in requirement: "'+l+'"');_.eachObj(m.requires,function(d){j.requires[d]||(k++,j.requires[d]=1)})})});0<k?completeRequirements(m,d):_.each(m,function(j){_.eachObj(j.requires,function(k){d[k].requiredBy[j.id]=1})})}
function calculateDependencies(m,d){var k={};_.eachObj(d,function(j){d[j]&&(k[j]=1,_.eachObj(m[j].requires,function(d){k[d]=1}))});return k}function createDefaultConfigurationMap(m,d){var k={};_.each(m,function(j){if(j.configurable&&("default"==j.configurable||d))k[j.id]=1});return k}
function compile(m,d,k){var j="",l=calculateDependencies(d,k),r=[],p=!0;_.filter(m,function(g){return l[g.id]||!(g.configurable||g.dependency)}).each(function(g){_.each(g.src,function(g){if(/^\s*$/.test(g))p||(j+="\n"),p=!0;else{var d=g.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(d&&"cond"==d[2]&&!!l[d[4]]!=("!"==d[3]))j+=d[1]+d[5]+"\n";else{var k=!1,m=!0;d&&"condblock"==d[2]?r.push(!!l[d[4]]!=("!"==d[3])):/^\s*\/\/\s*@condend\b/.test(g)&&(k=!0);for(d=0;d<r.length;d++)if(!r[d]){m=
!1;break}m&&(j+=g+"\n");k&&r.pop()}p=!1}})});return j}function prepareSections(m){m=parseSourceSections(m);var d=createSectionMap(m);completeRequirements(m,d);var k=createDefaultConfigurationMap(m);return{sections:m,sectionMap:d,enabledSections:k}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(m,d){var k=_.filter(m,function(d){return d.configurable}),j=_.filter(_.keys(d),function(g){return d[g]}),l,r=[];j.length==k.length?(l=CONFIG_COMMENT+CONFIG_ALL,r=[]):j.length/3>k.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(k,function(g){return!d[g.id]}).collect(function(d){return d.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,r=j);var p="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,g=50;_(r).sort().each(function(d){g<d.length?
(g=70,p+="\n// - "+d+", "):(p+=d+", ",g-=d.length+2)});return p=p.replace(/,\s*$/,".\n")}function fixConfig(m,d){_.eachObj(d,function(k){m[k]?_.copyObj(m[k].requires,d):delete d[k]});return d}
function deserializeEnabledSections(m,d,k){function j(d){return RegExp("^"+d.replace(/ /g,"\\s+"))}var l=j(CONFIG_START+".*"),r=j(CONFIG_ALL.replace(/\./,"\\.")),p=j(CONFIG_ALL_EXCEPT+"\\s*"),g=j(CONFIG_ONLY+"\\s*"),w=j(CONFIG_COMMENT);k=k.split("\n");for(var u=0;u<k.length;u++){var n=k[u];if(/^\s*\/\/s*/.test(n)&&(n=n.replace(/^\s*\/\/\s*/,""),l.test(n)&&u+1<k.length)){for(var n="",v=u+1;v<k.length;v++)if(w.test(k[v])){if(n+=k[v].replace(w,""),/\s*\.\s*$/.test(k[v]))break}else break;if(r.test(n))return createDefaultConfigurationMap(m,
!0);n=n.replace(/\s*\.\s*$/,"");if(p.test(n)){var s=createDefaultConfigurationMap(m,!0);_.each(n.replace(p,"").split(/\s*,\s*/),function(d){delete s[d]});return fixConfig(d,s)}if(g.test(n))return s={},_.each(n.replace(g,"").split(/\s*,\s*/),function(g){d[g]&&(s[g]=1)}),fixConfig(d,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(m,d,k){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:m,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:d?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(d){k&&k($.parseJSON(d))},function(d,l,m){window.console&&console.log("error",d,l,m);k&&k(null)}).error(function(d){window.console&&console.log(d)})}
function setUpConfigurationUI(m){function d(){$(".modCheck").each(function(d){var j=0;$(".secCheck",d.parentNode.parentNode).each(function(d){d.checked&&j++});d.checked=0<j})}function k(d){var j=m.sectionMap[d.id.substr(4)];d.checked?_.eachObj(j.requires,function(d){$("#sec-"+d).set("checked",!0)}):_.eachObj(j.requiredBy,function(d){$("#sec-"+d).set("checked",!1)})}$("#compile").on("click",function(){var d={};$(".secCheck").each(function(j){j.checked&&(d[j.id.substr(4)]=1)});var j=compile(m.sections,
m.sectionMap,d),k=serializeEnabledSections(m.sections,d);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(j,!0,function(d){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});d?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=k+"\n"+d.compiledCode,$("#resultPlain").fill((d.statistics.compressedSize/1024).toFixed(2)+"kb ("+d.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((d.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+d.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+d.outputFilePath),$("#resultGzippedComment").set({$$fade:d.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=k+j,$("#resultPlain").fill((j.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(l){console.log(l)}return!1});
var j=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",j,[!1]);$("#loadConfig").on("|click",j,[!0]);$("#recreate").on("click",function(){try{var g=$$("#configSrc").value,j=deserializeEnabledSections(m.sections,m.sectionMap,g);j?(_.eachObj(m.sectionMap,function(d){var g=$$("#sec-"+d);g&&(g.checked=!!j[d])}),d()):alert("Can not find configuration in source.")}catch(k){console.log(k)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[j=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(j).on("change",function(){var g=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(d){d.checked=g;k(d)});d();return!0});var p;_.filter(m.sections,function(d){return d.group==GROUPS[l]&&d.configurable}).sort(function(d,j){var k=d.name||d.id,l=j.name||j.id;return k==l?0:k>l?1:
-1}).each(function(g){function j(d,g){var k=_.filter(_.keys(g),function(d){return!!g[d].name});if(!k.length)return null;var l=0,n=d;_.each(k,function(d){l++<Math.min(k.length,8)&&(1<l&&(n=l==Math.min(k.length,8)?n+" and ":n+", "),n=8==l&&8<k.length?n+"more":n+(m.sectionMap[d].name||m.sectionMap[d].id))});return n+="."}var l=j("Required by ",g.requiredBy),n=j("Requires ",g.requires);r.add(EE("div",{className:"sectionDescriptor"},[p=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+g.id,
checked:"default"==g.configurable?"checked":null})(),EE("label",{"@for":"sec-"+g.id},g.name||g.id),EE("div",{className:"requirements"},[l?[l,EE("br")]:null,n])]));$(p).on("change",function(){k(this);d();return!0})})}}
$(function(){var m=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);m&&10>parseInt(m[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(d){setUpConfigurationUI(prepareSections(d))}).error(function(d){window.console&&console.log(d)})});
