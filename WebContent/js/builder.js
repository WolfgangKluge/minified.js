if(/^u/.test(typeof define)){var def={};this.define=function(f,k){def[f]=k()};this.require=function(f){return def[f]}}
define("minified",function(){function f(h){return h.substr(0,3)}function k(h){return null!=h?""+h:""}function p(h){return"string"==typeof h}function j(h){return!!h&&"object"==typeof h}function l(h){return"number"==typeof h}function s(h){return j(h)&&!!h.getDay}function n(h){return!0===h||!1===h}function e(h){var a=typeof h;return"object"==a?!(!h||!h.getDay):"string"==a||"number"==a||n(h)}function m(h){return!!h&&null!=h.length&&!p(h)&&!(h&&h.nodeType)&&!N(h)}function t(h){return h}function q(h){return h+
1}function u(h,a,b){return k(h).replace(a,null!=b?b:"")}function w(h){return u(h,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function x(h){return u(h,/^\s+|\s+$/g)}function B(h,a){for(var b in h)h.hasOwnProperty(b)&&a(b,h[b]);return h}function D(h,a){if(h)for(var b=0;b<h.length;b++)a(h[b],b);return h}function O(h,a){var b=[],c=N(a)?a:function(h){return a!=h};D(h,function(h,a){c(h,a)&&b.push(h)});return b}function X(h,a,b){var c=[];h(a,function(h,a){m(h=b(h,a))?D(h,function(h){c.push(h)}):null!=h&&c.push(h)});
return c}function S(h,a){return X(D,h,a)}function Y(h){var a=[];B(h,function(h){a.push(h)});return a}function C(h,a){var b=[];D(h,function(h,c){b.push(a(h,c))});return b}function T(h,a){if(m(h)){var b=R(a);return G(R(h).sub(0,b.length),b)}return null!=a&&h.substr(0,a.length)==a}function Z(h,a){if(m(h)){var b=R(a);return R(h).sub(-b.length).equals(b)||!b.length}return null!=a&&h.substr(h.length-a.length)==a}function y(h){var a=h.length;return C(h,function(){return h[--a]})}function H(a,b,c){if(!a)return[];
var d=a.length,g=0>b?d+b:b,r=null==c?d:0<=c?c:d+c;return O(a,function(a,h){return h>=g&&h<r})}function P(a,b){var c={};D(a,function(a){c[a]=b});return c}function U(a,b,c){B(a,function(a,h){if(null==b[a]||!c)b[a]=h});return b}function A(a,b){for(var c=N(b)?b:function(a,h){if(b===a)return h},d,g=0;g<a.length;g++)if(null!=(d=c(a[g],g)))return d}function z(a){return C(a,t)}function F(){var a=this;return function(){return new V(E(a,arguments))}}function aa(a){var b={};return O(a,function(a){if(b[a])return!1;
b[a]=1;return!0})}function I(a,b){var c=P(b,1);return O(a,function(a){var h=c[a];c[a]=0;return h})}function Q(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function G(a,b){var c=N(a)?a():a,d=N(b)?b():b;if(c==d)return!0;if(null==c||null==d)return!1;if(e(c)||e(d))return s(c)&&s(d)&&c.getTime()==d.getTime();if(m(c))return c.length!=d.length?!1:!A(c,function(a,b){if(!G(a,d[b]))return!0});if(m(d))return!1;var g=Y(c),r=g.length,v=0;B(d,function(){v++});return r!=v?!1:!A(g,function(a){if(!G(c[a],
d[a]))return!0})}function W(a,b,c){return a.apply(c&&b,C(c||b,t))}function E(a,b,c){return C(a,function(a){return N(a)?W(a,b,c):ba})}function ca(a,b,c,d){return function(){return W(a,b,S([c,arguments,d],t))}}function a(a,b){return c(b,0,0,0,a)}function c(a,b,c,d,g,r,v){function m(a){var b=a.length;return b>v?m(a.substr(0,b-v))+(r||",")+a.substr(b-v):a}var e=0>a,k=/(\d+)(\.(.*))?/.exec((e?-a:a).toFixed(b));a=k[1];for(d=(d||".")+k[3];a.length<(g||1);)a="0"+a;v&&(a=m(a));return(e?"-":"")+a+(b?c?u(d,
/[.,]?0+$/):d:"")}function b(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function d(a,b){if(1==arguments.length)return d(null,a);if(/^\?/.test(a)){if(""==x(b))return null;a=a.substr(1)}var c,g=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(u(u(u(b,","==g?/\./g:/,/g),g,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?ba:c}function g(a){return new Date(a.getTime())}function r(a,b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function v(a,
b,c){return 3>arguments.length?v(new Date,a,b):r(g(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function M(a,b,c){var d=b.getTime(),g=c.getTime(),v=g-d;if(0>v)return-M(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return v/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(v/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);d=r(new Date(d),b,a);for(v=a;v<1.2*a+4;v++)if(r(d,b,1).getTime()>g)return v}function ga(a){return u(a,/['"\t\n\r]/g,function(a){return la[a]})}function da(a,
b){if(ea[a])return ea[a];var c="with(_.isObject(obj)?obj:{}){"+C(a.split(/{{|}}}?/),function(a,b){var c,h=x(a),d=u(h,/^{/),h=h==d?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(d))?"each("+(""==x(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(d))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(d))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(d))?c[1]?"}\n":"});\n":(c=/^#(.*)/.exec(d))?c[1]:(c=/(.*)::\s*(.*)/.exec(d))?"print("+h+'_.formatValue("'+
ga(c[2])+'",'+(""==x(c[1])?"this":c[1])+(h&&")")+"));\n":"print("+h+(""==x(d)?"this":d)+(h&&")")+");\n";if(""!=a)return'print("'+ga(a)+'");\n'}).join("")+"}",d=new Function("obj","each","esc","print","_",c);return ea[a]=function(a,c){var h=[];d.call(c||a,a,function(a,b){m(a)?D(a,function(a,c){b.call(a,a,c)}):B(a,function(a,c){b.call(c,a,c)})},b||t,function(){W(h.push,h,arguments)},R);return h.join("")}}function ha(a){return u(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function L(a){return function(b,
c){return new V(a(this,b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function K(a){return function(b,c,d){return new V(a(b,c,d))}}function N(a){return"function"==typeof a}function V(a,b){for(var c=0,d=0;d<a.length;d++){var g=a[d];if(b&&m(g))for(var r=0;r<g.length;r++)this[c++]=g[r];else this[c++]=g}this.length=c;this._=!0}function R(){return new V(arguments,!0)}var ba,fa="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ia=C(fa,f),ja=
"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=C(ja,f),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ea={};U({each:J(D),filter:L(O),collect:L(S),map:L(C),toObject:J(P),equals:J(G),sub:L(H),reverse:L(y),find:J(A),startsWith:J(T),endsWith:J(Z),contains:J(Q),call:L(E),array:J(z),unite:J(F),uniq:L(aa),intersection:L(I),join:function(a){return C(this,t).join(a)},sort:function(a){return new V(C(this,t).sort(a))},tap:function(a){a(this);return this}},
V.prototype);R={filter:K(O),collect:K(S),collectObj:K(function(a,b){return X(B,a,b)}),map:K(C),sub:K(H),reverse:K(y),each:D,toObject:P,find:A,contains:Q,startsWith:T,endsWith:Z,equals:G,keys:K(Y),values:K(function(a,b){var c=[];b?D(b,function(b){c.push(a[b])}):B(a,function(a,b){c.push(b)});return c}),call:K(E),array:z,unite:F,uniq:K(aa),intersection:K(I),bind:ca,partial:function(a,b,c){return ca(a,null,b,c)},once:function(a){var b=0;return function(){if(!b++)return W(a,this,arguments)}},nonOp:t,eachObj:B,
mapObj:function(a,b){var c={};B(a,function(a,d){c[a]=b(a,d)});return c},filterObj:function(a,b){var c={},d=N(b)?b:function(a){return b!=a};B(a,function(a,b){d(a,b)&&(c[a]=b)});return c},isList:m,isFunction:N,isObject:j,isNumber:l,isBool:n,isDate:s,isValue:e,isString:p,toString:k,toList:function(a){return m(a)?a:null!=a?[a]:[]},dateClone:g,dateAdd:v,dateDiff:M,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:c,pad:a,formatValue:function(d,
g){d=u(d,/^\?/);if(s(g)){var r,e,f=d,j=g,M={y:["FullYear",t],M:["Month",q],n:["Month",ia],N:["Month",fa],d:["Date",t],m:["Minutes",t],H:["Hours",t],h:["Hours",function(a){return a%12||12}],K:["Hours",q],k:["Hours",function(a){return a%12+1}],s:["Seconds",t],S:["Milliseconds",t],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(b){if(r)return r;var c=0<b?b:-b;return(0>b?"+":"-")+a(2,Math.floor(c/60))+a(2,c%60)}]};if(e=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(d))r=
e[1],j=v(g,"minutes",b(e,2,g)),f=e[4];return u(f,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(b,c,d,g){if(c=M[c])b=j["get"+(m(c)?c[0]:c)].call(j),g=g&&g.split(","),b=m(c[1])?(g||c[1])[b]:c[1](b,g),null!=b&&!p(b)&&(b=a(d.length+1,b));return b})}return A(d.split(/\s*\|\s*/),function(a){var b,d;if(b=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=g;var h=parseFloat(b[3]);if(isNaN(h)||!l(a))a=null==a?"null":k(a),h=b[3];if(b[1]){if(!b[2]&&a==h||"<"==b[1]&&a>h||">"==b[1]&&a<h)return null}else if(a!=h)return null;
a=b[4]}if(l(g)&&(b=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){d=k(b[1])+k(b[2]);var h=k(b[1]).length?u(d,/[.,]/g).length:1,r=u(u(d,/^.*[0#]/),/[^,.]/g),v=k(b[3]).length+k(b[4]).length,m,e;if(d=/([.,])[^.,]+[.,]/.exec(b[0]))m=d[1],e=d[0].length-2;m=c(g,v,k(b[3]).length,r,h,m,e);e=a;a=b.index;b=k(b[0]).length;return e.substr(0,a)+m+e.substr(a+b)}return a})},parseDate:function(a,c){var d={y:0,M:[1,1],n:[1,ia],N:[1,fa],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},g={},r=1,e,k,f;if(/^\?/.test(a)){if(""==
x(c))return null;a=a.substr(1)}if(f=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))e=f,a=f[3];if(!(f=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(g[r++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(k=r,r+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(g[r++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":w(a)})).exec(c)))return ba;for(var j=[0,0,0,0,0,0,0],M=1;M<r;M++){var p=f[M],l=
g[M];if(m(l)){var t=l[0],n=d[t],q=n[0],l=A(l[1]||n[1],function(a,b){return T(p.toLowerCase(),a.toLowerCase())?b:null});if(null==l)return ba;j[q]="a"==t?j[q]+12*l:l}else l&&(t=parseInt(p),n=d[l],m(n)?j[n[0]]+=t-n[1]:j[n]+=t)}d=new Date(j[0],j[1],j[2],j[3],j[4],j[5],j[6]);return v(d,"minutes",-b(e,1,d)-b(f,k,d))},parseNumber:d,copyObj:U,coal:function(){return A(arguments,t)},trim:x,escapeRegExp:w,escapeHtml:ha,format:function(a,b){return da(a)(b)},template:da,htmlTemlplate:function(a){return da(a,ha)}};
return{_:R}});/^u/.test(typeof define)&&(def={},this.define=function(f,k){def[f]=k()},this.require=function(f){return def[f]});
define("minified",function(){function f(a){return null!=a?""+a:""}function k(a){return"string"==typeof a}function p(a){return a&&a.nodeType}function j(a){return a&&null!=a.length&&!k(a)&&!p(a)&&!w(a)}function l(a){return a}function s(a,c){for(var b in a)a.hasOwnProperty(b)&&c(b,a[b]);return a}function n(a,c){for(var b=0;a&&b<a.length;b++)c(a[b],b);return a}function e(a,c){var b=[],d=w(c)?c:function(a){return c!=a};n(a,function(a,c){d(a,c)&&b.push(a)});return b}function m(a,c){var b=[];n(a,function(a,
g){j(a=c(a,g))?n(a,function(a){b.push(a)}):null!=a&&b.push(a)});return b}function t(a,c){var b=[];s(a,function(a,g){j(a=c(a,g))?n(a,function(a){b.push(a)}):null!=a&&b.push(a)});return b}function q(a,c,b){return f(a).replace(c,b||"")}function u(a){return RegExp("\\b"+a+"\\b","i")}function w(a){return"function"==typeof a&&!a.item}function x(a){return parseFloat(q(a,/^[^\d-]+/))}function B(a){return a.minified=a.minified||++aa}function D(a,c){function b(a){if(p(a)&&!g[r=B(a)])d.push(a),g[r]=!0}var d=
[],g={},r;n(a,function(a){a=c(a);j(a)?n(a,b):b(a)});return d}function O(a){var c={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},b=a.get(c);a.set(c);c=a.get("$height",!0);a.set(b);return c}function X(a){a()}function S(a,c){n(c,function(a){a.e.detachEvent("on"+a.n,a.h)})}function Y(){n(Q,X);Q=null}function C(a){Q?Q.push(a):z.setTimeout(a,0)}function T(a,c,b,d){return function(){var g=y(F.createElement(a));j(c)||"object"!=typeof c?g.add(c):g.set(c).add(b);d&&d(g);return g}}
function Z(a){return ca[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function y(a,c,b){return w(a)?C(a):new A(H(a,c,b))}function H(a,c,b){function d(a){a=function L(a){return j(a)?m(a,L):a}(a);return g?e(a,function(a){for(;a=a.parentNode;){if(a===g)return!0;if(b)return!1}}):a}var g,r,v,f,l;if(c&&1!=(c=H(c)).length)return D(c,function(c){return H(a,c,b)});g=c&&c[0];if(!k(a))return d(j(a)?a:[a]);if(1<(c=a.split(/\s*,\s*/)).length)return D(c,function(a){return H(a,g,b)});if(c=/(\S+)\s+(.+)$/.exec(a))return H(c[2],
H(c[1],g),b);if(a!=(c=q(a,/^#/)))return d([F.getElementById(c)]);g=g||F;r=(c=/([\w-]*)\.?([\w-]*)/.exec(a))[1];f=c[2];c=(v=g.getElementsByClassName&&f)?g.getElementsByClassName(f):g.getElementsByTagName(r||"*");if(r=v?r:f)l=u(r),c=e(c,function(a){return l.test(a[v?"nodeName":"className"])});return g?d(c):c}function P(a,c){var b;if(w(a))return a;if(!a||k(a)&&("*"==a||(b=/^([\w-]*)\.([\w-]+)$/.exec(a))||(b=/^([\w-]+)$/.exec(a)))){var d=b&&b[1]&&u(b[1]),g=b&&b[2]&&u(b[2]);return function(a){return 1==
p(a)&&(!d||d.test(a.nodeName))&&(!g||g.test(a.className))}}var r={};y(a,c).each(function(a){r[B(a)]=!0});return function(a){return r[B(a)]}}function U(){var a,c=[],b=[],d=function(d,g){null==a&&(a=d,c=g,z.setTimeout(function(){n(b,X)},0))},g=d.then=function(d,g){var m=U(),e=function(){try{var b=a?d:g;if(w(b)){var e=b.apply(null,c);e&&w(e.then)?e.then(function(a){m(!0,[a])},function(a){m(!1,[a])}):m(!0,[e])}else m(a,c)}catch(j){m(!1,[j])}};null!=a?z.setTimeout(e,0):b.push(e);return m};d.always=function(a){return g(a,
a)};d.error=function(a){return g(0,a)};return d}function A(a){for(var c=this.length=a.length,b=0;b<c;b++)this[b]=a[b]}var z=this,F=document,aa=1,I={},Q=[],G=[],W=z.requestAnimationFrame||function(a){z.setTimeout(a,33)},E=!!F.all&&!Q.map,ca={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};s({each:function(a){return n(this,a)},filter:function(a){return new A(e(this,a))},collect:function(a){return new A(m(this,a))},sub:function(a,c){var b=0>a?this.length+a:a,d=0<=c?c:this.length+(c||0);return this.filter(function(a,
c){return c>=b&&c<d})},find:function(a){for(var c,b=w(a)?a:function(b,c){if(a===b)return c},d=0;d<this.length;d++)if(null!=(c=b(this[d],d)))return c},remove:function(){n(this,function(a){if(E&&1==p(a)){var c=function(a){S(0,I[a.minified]);delete I[a.minified]};n(H("*",a),c);c(a)}a.parentNode.removeChild(a)})},text:function(){function a(c){var b=p(c);return 1==b?m(c.childNodes,a):5>b?c.data:null}return m(this,a).join("")},trav:function(a,c,b){var d=P("number"==typeof c?null:c),g="number"==typeof c?
c:b||1E9;return new A(D(this,function(b){for(var c=[];(b=b[a])&&c.length<g;)d(b)&&c.push(b);return c}))},select:function(a,c){return y(a,this,c)},is:function(a){var c=P(a);return!this.find(function(a){if(!c(a))return!0})},only:function(a){return this.filter(P(a))},get:function(a,c){var b=this,d=b[0];if(d){if(k(a)){var g=q(q(a,/^%/,"data-"),/^[$@]/),e;e="$"==a?d.className:"$$"==a?E?d.style.cssText:d.getAttribute("style"):/\$\$/.test(a)&&("hidden"==d.style.visibility||"none"==d.style.display)?0:"$$fade"==
a?isNaN(e=E?x(d.style.filter)/100:x(d.style.opacity))?1:e:"$$slide"==a?b.get("$height"):/^\$/.test(a)?z.getComputedStyle?z.getComputedStyle(d,null).getPropertyValue(q(g,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(d.currentStyle||d.style)[g]:/^[@%]/.test(a)?d.getAttribute(g):d[g];return c?x(e):e}var m={};(j(a)?n:s)(a,function(a){m[a]=b.get(a,c)});return m}},set:function(a,c){var b=this,d;void 0!==c?"$$fade"==a||"$$slide"==a?b.set({$visibility:0<(d=x(c))?"visible":"hidden",$display:"block"}).set("$$fade"==
a?E?{$filter:"alpha(opacity = "+100*d+")",$zoom:1}:{$opacity:d}:{$height:/px/.test(c)?c:function(a,b,c){return d*(d&&O(y(c)))+"px"},$overflow:"hidden"}):n(b,function(b,d){var e=q(q(a,/^%/,"data-"),/^[@$]/),m=b.className||"",j=/^\$/.test(a)?b.style:b,f=w(c)?c(y(b).get(a),d,b):c;"$"==a?null!=f&&(n(f.split(/\s+/),function(a){var b=q(a,/^[+-]/),c=m;m=q(m,u(b));if(/^\+/.test(a)||b==a&&c==m)m+=" "+b}),b.className=q(m,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?j.cssText=f:null!=f?b.setAttribute("style",f):b.removeAttribute("style"):
/^[@%]/.test(a)?null!=f?j.setAttribute(e,f):j.removeAttribute(e):j[e]=f}):k(a)||w(a)?b.set("$",a):s(a,function(a,c){b.set(a,c)});return b},add:function(a,c){return n(this,function(b,d){var g;(function v(a){j(a)?n(a,v):w(a)?v(a(b,d)):null!=a&&(a=p(a)?a:F.createTextNode(a),g?g.parentNode.insertBefore(a,g.nextSibling):c?c(a,b,b.parentNode):b.appendChild(a),g=a)})(p(a)&&d?null:a)})},fill:function(a){return n(this,function(a){y(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,
b,d){d.insertBefore(a,b)})},addAfter:function(a){return this.add(a,function(a,b,d){d.insertBefore(a,b.nextSibling)})},addFront:function(a){return this.add(a,function(a,b){b.insertBefore(a,b.firstChild)})},replace:function(a){return this.add(a,function(a,b,d){d.replaceChild(a,b)})},clone:function(a){return new A(m(this,function(c){var b=p(c);if(1==b){var d={$:c.className||null,$$:E?c.style.cssText:c.getAttribute("style")};n(c.attributes,function(a){var b=a.name;"id"!=b&&("style"!=b&&"class"!=b&&c.getAttribute(b))&&
(d["@"+b]=a.value)});return T(c.tagName,d,y(c.childNodes).clone(),a)}return 5>b?c.data:null}))},animate:function(a,c,b,d){var g=this,m=[],e=/-?[\d.]+/,j,k=U(),l=w(b)?b:function(a,c,d){return a+d*(c-a)*(b+(1-b)*d*(3-2*d))};d=d||{};d.time=0;d.stop=function(){j();k(!1)};c=c||500;b=b||0;n(g,function(b){var c={o:y(b),e:{}};s(c.s=c.o.get(a),function(b,d){var g=a[b];"$$slide"==b&&(g=g*O(c.o)+"px");c.e[b]=/^[+-]=/.test(g)?q(g.substr(2),e,x(d)+x(q(g,/\+?=/))):g});m.push(c)});j=y.loop(function(a){function b(a,
c){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*c,2):(a=a.charAt(1+c))+a,16):parseInt(q(a,/[^\d,]+/g).split(",")[c])}d.time=a;a>=c||0>a?(n(m,function(a){a.o.set(a.e)}),j(),d.time=null,k(!0,[g])):n(m,function(d){s(d.s,function(g,m){var j="rgb(",k=d.e[g],r=a/c;if(/^#|rgb\(/.test(k))for(var n=0;3>n;n++)j+=Math.round(l(b(m,n),b(k,n),r))+(2>n?",":")");else j=q(k,e,f(l(x(m),x(k),r)));d.o.set(g,j)})})});return k},toggle:function(a,c,b,d){var g=this,m={},e=!1,j=/\b(?=\w)/g,f;return c?g.set(a)&&function(j){if(j!==
e)return f=(e=!0===j||!1===j?j:!e)?c:a,w(f)?f(g,b,d):b?g.animate(f,m.stop?m.stop()||m.time:b,d,m):g.set(f)&&void 0}:g.toggle(q(a,j,"-"),q(a,j,"+"))},values:function(a){var c=a||{};this.each(function(a){var d=a.name,g=f(a.value),e=c[d];if(/form/i.test(a.tagName))y(m(a.elements,l)).values(c);else if(d&&(!/kbox|dio/i.test(a.type)||a.checked))j(e)?e.push(g):c[d]=null==e?g:[e,g]});return c},on:function(a,c,b,d){return this.each(function(g,m){n(a.split(/\s/),function(a){var e=q(a,/\|/),j=w(c)||null,f=j?
c:b,k=j&&d&&b,l=j&&(d||b),n=e==a,t=j?null:P(c,g),j=function(a,b){var c=a||z.event,d,g=b||c.target;if(!t||t(g))if((d=(!f.apply(k||g,l||[c,m])||l)&&n)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return d};a={e:g,h:j,n:e};(f.M=f.M||[]).push(a);E?(g.attachEvent("on"+e,j),e=B(g),(I[e]=I[e]||[]).push(a)):(g.addEventListener(e,j,!1),(g.minified2=g.minified2||[]).push(a))})})},onOver:function(a){var c=this,b=[];return c.on("|mouseover |mouseout",function(d,
g){var e="mouseout"!=d.type,m=d.relatedTarget||d.toElement;if(b[g]!==e&&(e||!m||m!=c[g]&&!y(m).trav("parentNode",c[g]).length))b[g]=e,a.call(this,e,g)})},trigger:function(a,c){return this.each(function(b){for(var d,g=b;g&&!d;)n(E?I[g.minified]:g.minified2,function(g){g.n==a&&(d=d||g.h(c,b))}),g=g.parentNode})}},function(a,c){A.prototype[a]=c});s({request:function(a,c,b,d,g,e){var l,n=b,q=0,u=U();try{l=z.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=b&&(d=d||{},!k(b)&&
!p(b)&&(n=t(b,function J(a,b){return j(b)?m(b,function(b){return J(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!p(b)&&(!k(b)&&!d["Content-Type"])&&(d["Content-Type"]="application/x-www-form-urlencoded"):(c+="?"+n,n=null)),l.open(a,c,!0,g,e),s(d,function(a,b){l.setRequestHeader(a,b)}),l.onreadystatechange=function(){4==l.readyState&&!q++&&(200==l.status?u(!0,[l.responseText,l.responseXML]):u(!1,[l.status,l.statusText,l.responseText]))},l.send(n)}catch(x){q||
u(!1,[0,null,f(x)])}return u},toJSON:function c(b){return null==b?""+b:k(b=b.valueOf())?'"'+q(b,/[\\\"\x00-\x1f\x22\x5c]/g,Z)+'"':j(b)?"["+m(b,c).join()+"]":"object"==typeof b?"{"+t(b,function(b,g){return c(b)+":"+c(g)}).join()+"}":f(b)},parseJSON:z.JSON?z.JSON.parse:function(c){c=q(c,/[\x00\xad\u0600-\uffff]/g,Z);if(/^[[\],:{}\s]*$/.test(q(q(c,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+c+")")},ready:C,setCookie:function(c,b,d,g,e,m){F.cookie=c+"="+(m?b:escape(b))+
(d?"; expires="+("object"==typeof d?d:new Date((new Date).getTime()+864E5*d)).toUTCString():"")+"; path="+(g?escapeURI(g):"/")+(e?"; domain="+escape(e):"")},getCookie:function(c,b){var d,g=(d=RegExp("(^|;)\\s*"+c+"=([^;]*)").exec(F.cookie))&&d[2];return b?g:g&&unescape(g)},loop:function(c){var b={c:c,t:(new Date).getTime(),s:function(){for(var c=0;c<G.length;c++)G[c]===b&&G.splice(c--,1)}};2>G.push(b)&&function g(){n(G,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&W(g)}();return b.s},
off:function(c){n(c.M,function(b){E?(b.e.detachEvent("on"+b.n,b.h),I[b.e.minified]=e(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),b.e.minified2=e(b.e.minified2,b))});c.M=null}},function(c,b){y[c]=b});z.onload=Y;F.addEventListener&&F.addEventListener("DOMContentLoaded",Y,!1);z.unload=function(){n(I,S)};return{$:y,$$:function(c){return H(c)[0]},EE:T,M:A}});var _=require("minified")._;
function parseSourceSections(f){function k(){return{id:"anon"+p++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}f=f.split("\n");var p=100,j=[],l=k(),s=!1;_.each(f,function(f){if(s&&/^.*\*\/\s*$/.test(f))s=!1;else if(s){var e=f.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),m=e.match(/^\s*@([a-z]+)/);m?(m=m[1],e=_.trim(e.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==m||"example"==m?l[m].push(e):"requires"==m?e.length&&_.each(e.split(/\s+/),function(e){l.requires[e]=1}):"param"==
m?l.params.push({name:e.replace(/\s.*$/,""),desc:e.replace(/^\S+\s+/,"")}):"return"==m?l.params.push({name:"@return",desc:e}):"function"==m?l.params[l.params.length-1].funcs.push(e):l[m]=""!=e?e:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(e):l.example.length?l.example[l.example.length-1]+="\n"+e:l.desc+=e+"\n"}else/^\s*\/\*\$/.test(f)&&!/\*\/\s*$/.test(f)&&(s=!0,j.push(l),l=k());l.src.push(f)});j.push(l);return j}
function createSectionMap(f){var k={};_.each(f,function(f){k[f.id]=f});return k}function completeRequirements(f,k){var p=0;_.each(f,function(j){_.eachObj(j.requires,function(f){var s=k[f];if(!s)throw Error('Unknown id in requirement: "'+f+'"');_.eachObj(s.requires,function(f){j.requires[f]||(p++,j.requires[f]=1)})})});0<p?completeRequirements(f,k):_.each(f,function(j){_.eachObj(j.requires,function(f){k[f].requiredBy[j.id]=1})})}
function calculateDependencies(f,k){var p={};_.eachObj(k,function(j){k[j]&&(p[j]=1,_.eachObj(f[j].requires,function(f){p[f]=1}))});return p}function createDefaultConfigurationMap(f,k){var p={};_.each(f,function(f){if(f.configurable&&("default"==f.configurable||k))p[f.id]=1});return p}
function compile(f,k,p){var j="",l=calculateDependencies(k,p),s=[],n=!0;_.filter(f,function(e){return l[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))n||(j+="\n"),n=!0;else{var f=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(f&&"cond"==f[2]&&!!l[f[4]]!=("!"==f[3]))j+=f[1]+f[5]+"\n";else{var k=!1,p=!0;f&&"condblock"==f[2]?s.push(!!l[f[4]]!=("!"==f[3])):/^\s*\/\/\s*@condend\b/.test(e)&&(k=!0);for(f=0;f<s.length;f++)if(!s[f]){p=
!1;break}p&&(j+=e+"\n");k&&s.pop()}n=!1}})});return j}function prepareSections(f){f=parseSourceSections(f);var k=createSectionMap(f);completeRequirements(f,k);var p=createDefaultConfigurationMap(f);return{sections:f,sectionMap:k,enabledSections:p}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(f,k){var p=_.filter(f,function(e){return e.configurable}),j=_.filter(_.keys(k),function(e){return k[e]}),l,s=[];j.length==p.length?(l=CONFIG_COMMENT+CONFIG_ALL,s=[]):j.length/3>p.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,s=_.filter(p,function(e){return!k[e.id]}).collect(function(e){return e.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,s=j);var n="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,e=50;_(s).sort().each(function(f){e<f.length?
(e=70,n+="\n// - "+f+", "):(n+=f+", ",e-=f.length+2)});return n=n.replace(/,\s*$/,".\n")}function fixConfig(f,k){_.eachObj(k,function(p){f[p]?_.copyObj(f[p].requires,k):delete k[p]});return k}
function deserializeEnabledSections(f,k,p){function j(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var l=j(CONFIG_START+".*"),s=j(CONFIG_ALL.replace(/\./,"\\.")),n=j(CONFIG_ALL_EXCEPT+"\\s*"),e=j(CONFIG_ONLY+"\\s*"),m=j(CONFIG_COMMENT);p=p.split("\n");for(var t=0;t<p.length;t++){var q=p[t];if(/^\s*\/\/s*/.test(q)&&(q=q.replace(/^\s*\/\/\s*/,""),l.test(q)&&t+1<p.length)){for(var q="",u=t+1;u<p.length;u++)if(m.test(p[u])){if(q+=p[u].replace(m,""),/\s*\.\s*$/.test(p[u]))break}else break;if(s.test(q))return createDefaultConfigurationMap(f,
!0);q=q.replace(/\s*\.\s*$/,"");if(n.test(q)){var w=createDefaultConfigurationMap(f,!0);_.each(q.replace(n,"").split(/\s*,\s*/),function(e){delete w[e]});return fixConfig(k,w)}if(e.test(q))return w={},_.each(q.replace(e,"").split(/\s*,\s*/),function(e){k[e]&&(w[e]=1)}),fixConfig(k,w)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(f,k,p){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:f,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:k?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){p&&p($.parseJSON(f))},function(f,k,s){window.console&&console.log("error",f,k,s);p&&p(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(f){function k(){$(".modCheck").each(function(e){var f=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&f++});e.checked=0<f})}function p(e){var j=f.sectionMap[e.id.substr(4)];e.checked?_.eachObj(j.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(j.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(f){f.checked&&(e[f.id.substr(4)]=1)});var j=compile(f.sections,
f.sectionMap,e),k=serializeEnabledSections(f.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(j,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=k+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=k+j,$("#resultPlain").fill((j.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(l){console.log(l)}return!1});
var j=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",j,[!1]);$("#loadConfig").on("|click",j,[!0]);$("#recreate").on("click",function(){try{var e=$$("#configSrc").value,j=deserializeEnabledSections(f.sections,f.sectionMap,e);j?(_.eachObj(f.sectionMap,function(e){var f=$$("#sec-"+e);f&&(f.checked=!!j[e])}),k()):alert("Can not find configuration in source.")}catch(l){console.log(l)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var s;$("#sectionCheckboxes").add(s=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[j=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(j).on("change",function(){var e=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=e;p(f)});k();return!0});var n;_.filter(f.sections,function(e){return e.group==GROUPS[l]&&e.configurable}).sort(function(e,f){var j=e.name||e.id,k=f.name||f.id;return j==k?0:j>k?1:
-1}).each(function(e){function j(e,k){var l=_.filter(_.keys(k),function(e){return!!k[e].name});if(!l.length)return null;var m=0,n=e;_.each(l,function(e){m++<Math.min(l.length,8)&&(1<m&&(n=m==Math.min(l.length,8)?n+" and ":n+", "),n=8==m&&8<l.length?n+"more":n+(f.sectionMap[e].name||f.sectionMap[e].id))});return n+="."}var l=j("Required by ",e.requiredBy),q=j("Requires ",e.requires);s.add(EE("div",{className:"sectionDescriptor"},[n=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+e.id,
checked:"default"==e.configurable?"checked":null})(),EE("label",{"@for":"sec-"+e.id},e.name||e.id),EE("div",{className:"requirements"},[l?[l,EE("br")]:null,q])]));$(n).on("change",function(){p(this);k();return!0})})}}
$(function(){var f=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);f&&10>parseInt(f[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(f){setUpConfigurationUI(prepareSections(f))}).error(function(f){window.console&&console.log(f)})});
