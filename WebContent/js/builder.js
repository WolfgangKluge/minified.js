if(/^u/.test(typeof define)){var def={};this.define=function(k,g){def[k]=g()};this.require=function(k){return def[k]}}
define("minifiedUtil",function(){function k(h){return h.substr(0,3)}function g(h){return null!=h?""+h:""}function l(h){return"string"==typeof h}function f(h){return"function"==typeof h}function j(h){return!!h&&"object"==typeof h}function u(h){return"number"==typeof h}function v(h){return j(h)&&!!h.getDay}function d(h){return!0===h||!1===h}function n(h){var a=typeof h;return"object"==a?!(!h||!h.getDay):"string"==a||"number"==a||d(h)}function t(h){return!!h&&null!=h.length&&!l(h)&&!(h&&h.nodeType)&&
!f(h)}function q(h){return h}function p(h){return h+1}function s(h,a,b){return g(h).replace(a,null!=b?b:"")}function P(h){return s(h,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function G(h){return s(h,/^\s+|\s+$/g)}function C(h,a){for(var b in h)h.hasOwnProperty(b)&&a(b,h[b]);return h}function E(h,a){if(h)for(var b=0;b<h.length;b++)a(h[b],b);return h}function L(h,a){var b=[],c=f(a)?a:function(h){return a!=h};E(h,function(h,a){c(h,a)&&b.push(h)});return b}function W(h,a,b){var c=[];h(a,function(h,a){t(h=b(h,
a))?E(h,function(h){c.push(h)}):null!=h&&c.push(h)});return c}function R(h,a){return W(E,h,a)}function X(h){var a=[];C(h,function(h){a.push(h)});return a}function z(h,a){var b=[];E(h,function(h,c){b.push(a(h,c))});return b}function S(h,a){if(t(h)){var b=Q(a);return B(Q(h).sub(0,b.length),b)}return null!=a&&h.substr(0,a.length)==a}function A(h,a){if(t(h)){var b=Q(a);return Q(h).sub(-b.length).equals(b)||!b.length}return null!=a&&h.substr(h.length-a.length)==a}function H(h){var a=h.length;return z(h,
function(){return h[--a]})}function T(h,a,b){if(!h)return[];var c=h.length,e=0>a?c+a:a,m=null==b?c:0<=b?b:c+b;return L(h,function(a,h){return h>=e&&h<m})}function F(h,a){var b={};E(h,function(h){b[h]=a});return b}function x(h,a,b){C(h,function(h,c){if(null==a[h]||!b)a[h]=c});return a}function y(a,b){for(var c=f(b)?b:function(a,h){if(b===a)return h},e,m=0;m<a.length;m++)if(null!=(e=c(a[m],m)))return e}function Z(a){return z(a,q)}function I(){var h=this;return function(){return new U(a(h,arguments))}}
function M(a){var b={};return L(a,function(a){if(b[a])return!1;b[a]=1;return!0})}function N(a,b){var c=F(b,1);return L(a,function(a){var h=c[a];c[a]=0;return h})}function aa(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function B(a,b){var c=f(a)?a():a,e=f(b)?b():b;if(c==e)return!0;if(null==c||null==e)return!1;if(n(c)||n(e))return v(c)&&v(e)&&c.getTime()==e.getTime();if(t(c))return c.length!=e.length?!1:!y(c,function(a,h){if(!B(a,e[h]))return!0});if(t(e))return!1;var m=X(c),r=m.length,
d=0;C(e,function(){d++});return r!=d?!1:!y(m,function(a){if(!B(c[a],e[a]))return!0})}function V(a,b,c){return a.apply(c&&b,z(c||b,q))}function a(a,b,c){return z(a,function(a){return f(a)?V(a,b,c):ba})}function b(a,b,c,e){return function(){return V(a,b,R([c,arguments,e],q))}}function c(a,b){return e(b,0,0,0,a)}function e(a,b,c,e,m,r,d){function w(a){var b=a.length;return b>d?w(a.substr(0,b-d))+(r||",")+a.substr(b-d):a}var f=0>a,g=/(\d+)(\.(.*))?/.exec((f?-a:a).toFixed(b));a=g[1];for(e=(e||".")+g[3];a.length<
(m||1);)a="0"+a;d&&(a=w(a));return(f?"-":"")+a+(b?c?s(e,/[.,]?0+$/):e:"")}function m(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function r(a,b){if(1==arguments.length)return r(null,a);if(/^\?/.test(a)){if(""==G(b))return null;a=a.substr(1)}var c,e=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(s(s(s(b,","==e?/\./g:/,/g),e,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?ba:c}function w(a){return new Date(a.getTime())}function D(a,
b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function ca(a,b,c){return 3>arguments.length?ca(new Date,a,b):D(w(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function ga(a,b,c){var e=b.getTime(),m=c.getTime(),r=m-e;if(0>r)return-ga(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return r/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(r/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);e=D(new Date(e),b,a);for(r=a;r<1.2*a+4;r++)if(D(e,b,1).getTime()>m)return r}function ha(a){return s(a,
/['"\t\n\r]/g,function(a){return la[a]})}function Y(a,b){if(ea[a])return ea[a];var c="with(_.isObject(obj)?obj:{}){"+z(a.split(/{{|}}}?/),function(a,b){var c,h=G(a),e=s(h,/^{/),h=h==e?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(e))?"each("+(""==G(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(e))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(e))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(e))?c[1]?"}\n":"});\n":(c=/^#(.*)/.exec(e))?
c[1]:(c=/(.*)::\s*(.*)/.exec(e))?"print("+h+'_.formatValue("'+ha(c[2])+'",'+(""==G(c[1])?"this":c[1])+(h&&")")+"));\n":"print("+h+(""==G(e)?"this":e)+(h&&")")+");\n";if(""!=a)return'print("'+ha(a)+'");\n'}).join("")+"}",e=new Function("obj","each","esc","print","_",c);return ea[a]=function(a,c){var h=[];e.call(c||a,a,function(a,b){t(a)?E(a,function(a,c){b.call(a,a,c)}):C(a,function(a,c){b.call(c,a,c)})},b||q,function(){V(h.push,h,arguments)},Q);return h.join("")}}function da(a){return s(a,/[<>'"&]/g,
function(a){return"&#"+a.charCodeAt(0)+";"})}function U(a,b){for(var c=0,e=0;e<a.length;e++){var m=a[e];if(b&&t(m))for(var r=0;r<m.length;r++)this[c++]=m[r];else this[c++]=m}this.length=c;this._=!0}function Q(){return new U(arguments,!0)}function O(a){return function(b,c){return new U(a(this,b,c))}}function K(a){return function(b,c){return a(this,b,c)}}function J(a){return function(b,c,e){return new U(a(b,c,e))}}var ba,fa="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),
ia=z(fa,k),ja="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=z(ja,k),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ea={};x({each:K(E),filter:O(L),collect:O(R),map:O(z),toObject:K(F),equals:K(B),sub:O(T),reverse:O(H),find:K(y),startsWith:K(S),endsWith:K(A),contains:K(aa),call:O(a),array:K(Z),unite:K(I),uniq:O(M),intersection:O(N),join:function(a){return z(this,q).join(a)},sort:function(a){return new U(z(this,q).sort(a))},tap:function(a){a(this);
return this}},U.prototype);x({filter:J(L),collect:J(R),collectObj:J(function(a,b){return W(C,a,b)}),map:J(z),sub:J(T),reverse:J(H),each:E,toObject:F,find:y,contains:aa,startsWith:S,endsWith:A,equals:B,keys:J(X),values:J(function(a,b){var c=[];b?E(b,function(b){c.push(a[b])}):C(a,function(a,b){c.push(b)});return c}),call:J(a),array:Z,unite:I,uniq:J(M),intersection:J(N),bind:b,partial:function(a,c,e){return b(a,null,c,e)},once:function(a){var b=0;return function(){if(!b++)return V(a,this,arguments)}},
nonOp:q,eachObj:C,mapObj:function(a,b){var c={};C(a,function(a,e){c[a]=b(a,e)});return c},filterObj:function(a,b){var c={},e=f(b)?b:function(a){return b!=a};C(a,function(a,b){e(a,b)&&(c[a]=b)});return c},isList:t,isFunction:f,isObject:j,isNumber:u,isBool:d,isDate:v,isValue:n,isString:l,toString:g,toList:function(a){return t(a)?a:null!=a?[a]:[]},dateClone:w,dateAdd:ca,dateDiff:ga,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:e,pad:c,
formatValue:function(a,b){a=s(a,/^\?/);if(v(b)){var r,d,w=a,f=b,j={y:["FullYear",q],M:["Month",p],n:["Month",ia],N:["Month",fa],d:["Date",q],m:["Minutes",q],H:["Hours",q],h:["Hours",function(a){return a%12||12}],K:["Hours",p],k:["Hours",function(a){return a%12+1}],s:["Seconds",q],S:["Milliseconds",q],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(a){if(r)return r;var b=0<a?a:-a;return(0>a?"+":"-")+c(2,Math.floor(b/60))+c(2,b%60)}]};if(d=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))r=
d[1],f=ca(b,"minutes",m(d,2,b)),w=d[4];return s(w,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,e,h){if(b=j[b])a=f["get"+(t(b)?b[0]:b)].call(f),h=h&&h.split(","),a=t(b[1])?(h||b[1])[a]:b[1](a,h),null!=a&&!l(a)&&(a=c(e.length+1,a));return a})}return y(a.split(/\s*\|\s*/),function(a){var c,h;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var m=parseFloat(c[3]);if(isNaN(m)||!u(a))a=null==a?"null":g(a),m=c[3];if(c[1]){if(!c[2]&&a==m||"<"==c[1]&&a>m||">"==c[1]&&a<m)return null}else if(a!=m)return null;
a=c[4]}if(u(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){h=g(c[1])+g(c[2]);var m=g(c[1]).length?s(h,/[.,]/g).length:1,r=s(s(h,/^.*[0#]/),/[^,.]/g),d=g(c[3]).length+g(c[4]).length,w,f;if(h=/([.,])[^.,]+[.,]/.exec(c[0]))w=h[1],f=h[0].length-2;w=e(b,d,g(c[3]).length,r,m,w,f);f=a;a=c.index;c=g(c[0]).length;return f.substr(0,a)+w+f.substr(a+c)}return a})},parseDate:function(a,b){var c={y:0,M:[1,1],n:[1,ia],N:[1,fa],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},e={},r=1,d,w,f;if(/^\?/.test(a)){if(""==
G(b))return null;a=a.substr(1)}if(f=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))d=f,a=f[3];if(!(f=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,h){return/[dmhkyhs]/i.test(b)?(e[r++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(w=r,r+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(e[r++]=[b,h&&h.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":P(a)})).exec(b)))return ba;for(var g=[0,0,0,0,0,0,0],j=1;j<r;j++){var n=f[j],D=
e[j];if(t(D)){var k=D[0],l=c[k],p=l[0],D=y(D[1]||l[1],function(a,b){return S(n.toLowerCase(),a.toLowerCase())?b:null});if(null==D)return ba;g[p]="a"==k?g[p]+12*D:D}else D&&(k=parseInt(n),l=c[D],t(l)?g[l[0]]+=k-l[1]:g[l]+=k)}c=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);return ca(c,"minutes",-m(d,1,c)-m(f,w,c))},parseNumber:r,copyObj:x,coal:function(){return y(arguments,q)},trim:G,escapeRegExp:P,escapeHtml:da,format:function(a,b){return Y(a)(b)},template:Y,htmlTemlplate:function(a){return Y(a,da)}},
Q);return{_:Q}});/^u/.test(typeof define)&&(def={},this.define=function(k,g){def[k]=g()},this.require=function(k){return def[k]});
define("minified",function(){function k(a){return null!=a?""+a:""}function g(a){return"string"==typeof a}function l(a){return"function"==typeof a&&!a.item}function f(a){return a&&a.nodeType}function j(a){return a&&null!=a.length&&!g(a)&&!f(a)&&!l(a)}function u(a){return a}function v(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function d(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function n(a,b){var c=[],e=l(b)?b:function(a){return b!=a};d(a,function(a,b){e(a,b)&&c.push(a)});
return c}function t(a,b){var c=[];d(a,function(a,m){j(a=b(a,m))?d(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function q(a,b){var c=[];v(a,function(a,m){j(a=b(a,m))?d(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function p(a,b,c){return k(a).replace(b,c||"")}function s(a){return parseFloat(p(a,/^[^\d-]+/))}function P(a){return a.minified=a.minified||++Z}function G(a,b){function c(a){if(f(a)&&!m[r=P(a)])e.push(a),m[r]=!0}var e=[],m={},r;d(a,function(a){a=b(a);j(a)?d(a,c):c(a)});
return e}function C(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function E(a){a()}function L(a,b){d(b,function(a){a.e.detachEvent("on"+a.n,a.h)})}function W(){d(M,E);M=null}function R(a){M?M.push(a):x.setTimeout(a,0)}function X(a,b,c,e){return function(){var m=A(y.createElement(a));j(b)||"object"!=typeof b?m.add(b):m.set(b).add(c);e&&e(m);return m}}function z(){var a,b=[],c=[],e=function(e,m){null==
a&&(a=e,b=m,x.setTimeout(function(){d(c,E)},0))},m=e.then=function(e,m){var d=z(),f=function(){try{var c=a?e:m;if(l(c)){var f=c.apply(null,b);f&&l(f.then)?f.then(function(a){d(!0,[a])},function(a){d(!1,[a])}):d(!0,[f])}else d(a,b)}catch(g){d(!1,[g])}};null!=a?x.setTimeout(f,0):c.push(f);return d};e.always=function(a){return m(a,a)};e.error=function(a){return m(0,a)};return e}function S(a){return V[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function A(a,b,c){return l(a)?R(a):new F(H(a,
b,c))}function H(a,b,c){function e(a){a=function Y(a){return j(a)?t(a,Y):a}(a);return m?n(a,function(a){for(;a=a.parentNode;){if(a===m)return!0;if(c)return!1}}):a}var m,d,f,l,k;if(b&&1!=(b=H(b)).length)return G(b,function(b){return H(a,b,c)});m=b&&b[0];if(!g(a))return e(j(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return G(b,function(a){return H(a,m,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return H(b[2],H(b[1],m),c);if(a!=(b=p(a,/^#/)))return e([y.getElementById(b)]);m=m||y;d=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];
l=b[2];b=(f=m.getElementsByClassName&&l)?m.getElementsByClassName(l):m.getElementsByTagName(d||"*");if(d=f?d:l)k=RegExp("\\b"+d+"\\b","i"),b=n(b,function(a){return k.test(a[f?"nodeName":"className"])});return m?e(b):b}function T(a){var b;if(l(a))return a;if(!a||g(a)&&("*"==a||(b=/^([\w-]*)\.([\w-]+)$/.exec(a))||(b=/^([\w-]+)$/.exec(a)))){var c=b&&b[1]&&RegExp(b[1],"i"),e=b&&b[2]&&RegExp("\\b"+b[2]+"\\b","i");return function(a){return 1==f(a)&&(!c||c.test(a.nodeName))&&(!e||e.test(a.className))}}var m=
{};A(a).each(function(a){m[P(a)]=!0});return function(a){return m[P(a)]}}function F(a){for(var b=this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var x=this,y=document,Z=1,I={},M=[],N=[],aa=x.requestAnimationFrame||function(a){x.setTimeout(a,33)},B=!!y.all&&!M.map,V={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};v({each:function(a){return d(this,a)},filter:function(a){return new F(n(this,a))},collect:function(a){return new F(t(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,e=0<=b?b:
this.length+(b||0);return new F(n(this,function(a,b){return b>=c&&b<e}))},find:function(a){for(var b,c=l(a)?a:function(b,c){if(a===b)return c},e=0;e<this.length;e++)if(null!=(b=c(this[e],e)))return b},remove:function(){d(this,function(a){if(B&&1==f(a)){var b=function(a){L(0,I[a.minified]);delete I[a.minified]};d(H("*",a),b);b(a)}a.parentNode.removeChild(a)})},text:function(){function a(b){var c=f(b);return 1==c?t(b.childNodes,a):5>c?b.data:null}return t(this,a).join("")},trav:function(a,b,c){var e=
T("number"==typeof b?null:b),m="number"==typeof b?b:c||1E9;return new F(G(this,function(b){for(var c=[];(b=b[a])&&9!=b.nodeType&&c.length<m;)e(b)&&c.push(b);return c}))},select:function(a,b){return A(a,this,b)},is:function(a){var b=T(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(T(a))},get:function(a,b){var c=this,e=c[0];if(e){if(g(a)){var m=p(p(a,/^%/,"data-"),/^[$@]/),f;f="$"==a?e.className:"$$"==a?B?e.style.cssText:e.getAttribute("style"):/\$\$/.test(a)&&
("hidden"==e.style.visibility||"none"==e.style.display)?0:"$$fade"==a?isNaN(f=B?s(e.style.filter)/100:s(e.style.opacity))?1:f:"$$slide"==a?c.get("$height"):/^\$/.test(a)?x.getComputedStyle?x.getComputedStyle(e,null).getPropertyValue(p(m,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(e.currentStyle||e.style)[m]:/^[@%]/.test(a)?e.getAttribute(m):e[m];return b?s(f):f}var l={};(j(a)?d:v)(a,function(a){l[a]=c.get(a,b)});return l}},set:function(a,b){var c=this,e;void 0!==b?"$$fade"==a||"$$slide"==a?
c.set({$visibility:0<(e=s(b))?"visible":"hidden",$display:"block"}).set("$$fade"==a?B?{$filter:"alpha(opacity = "+100*e+")",$zoom:1}:{$opacity:e}:{$height:/px$/.test(b)?b:function(a,b,c){return e*(e&&C(A(c)))+"px"},$overflow:"hidden"}):d(c,function(c,e){var f=p(p(a,/^%/,"data-"),/^[@$]/),g=c.className||"",j=/^\$/.test(a)?c.style:c,k=l(b)?b(A(c).get(a),e,c):b;"$"==a?null!=k&&(d(k.split(/\s+/),function(a){var b=p(a,/^[+-]/),c=g;g=p(g,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&c==g)g+=" "+b}),c.className=
p(g,/^\s+|\s+(?=\s|$)/g)):"$$"==a?B?j.cssText=k:null!=k?c.setAttribute("style",k):c.removeAttribute("style"):/^[@%]/.test(a)?null!=k?j.setAttribute(f,k):j.removeAttribute(f):j[f]=k}):g(a)||l(a)?c.set("$",a):v(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return d(this,function(c,e){var m;(function w(a){j(a)?d(a,w):l(a)?w(a(c,e)):null!=a&&(a=f(a)?a:y.createTextNode(a),m?m.parentNode.insertBefore(a,m.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),m=a)})(f(a)&&e?null:a)})},fill:function(a){return d(this,
function(a){A(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,c,e){e.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,e){e.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,e){e.replaceChild(a,c)})},clone:function(a){return new F(t(this,function(b){var c=f(b);if(1==c){var e={$:b.className||null,$$:B?b.style.cssText:b.getAttribute("style")};
d(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(e["@"+c]=a.value)});return X(b.tagName,e,A(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,e){var m=this,f=[],g=/-?[\d.]+/,j,n=z(),t=l(c)?c:function(a,b,e){return a+e*(b-a)*(c+(1-c)*e*(3-2*e))};e=e||{};e.time=0;e.stop=function(){j();n(!1)};b=b||500;c=c||0;d(m,function(b){var c={o:A(b),e:{}};v(c.s=c.o.get(a),function(b,e){var d=a[b];"$$slide"==b&&(d=d*C(c.o)+"px");c.e[b]=/^[+-]=/.test(d)?
p(d.substr(2),g,s(e)+s(p(d,/\+?=/))):d});f.push(c)});j=A.loop(function(a){function c(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(p(a,/[^\d,]+/g).split(",")[b])}e.time=a;a>=b||0>a?(d(f,function(a){a.o.set(a.e)}),j(),e.time=null,n(!0,[m])):d(f,function(e){v(e.s,function(d,m){var f="rgb(",j=e.e[d],l=a/b;if(/^#|rgb\(/.test(j))for(var n=0;3>n;n++)f+=Math.round(t(c(m,n),c(j,n),l))+(2>n?",":")");else f=p(j,g,k(t(s(m),s(j),l)));e.o.set(d,f)})})});return n},
toggle:function(a,b,c,e){var d=this,f={},g=!1,j=/\b(?=\w)/g,k;return b?d.set(a)&&function(j){if(j!==g)return k=(g=!0===j||!1===j?j:!g)?b:a,l(k)?k(d,c,e):c?d.animate(k,f.stop?f.stop()||f.time:c,e,f):d.set(k)&&void 0}:d.toggle(p(a,j,"-"),p(a,j,"+"))},values:function(a){var b=a||{};this.each(function(a){var e=a.name,d=k(a.value),f=b[e];if(/form/i.test(a.tagName))A(t(a.elements,u)).values(b);else if(e&&(!/kbox|dio/i.test(a.type)||a.checked))j(f)?f.push(d):b[e]=null==f?d:[f,d]});return b},on:function(a,
b,c,e){return this.each(function(f,g){d(a.split(/\s/),function(a){var d=p(a,/\|/),j,k=e&&c,l=e||c,n=d==a;j=function(a,c){var e=a||x.event,d;if((d=(!b.apply(k||c||e.target,l||[e,g])||l)&&n)&&!c)e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,e.cancelBubble=!0;return d};a={e:f,h:j,n:d};(b.M=b.M||[]).push(a);B?(f.attachEvent("on"+d,j),d=P(f),(I[d]=I[d]||[]).push(a)):(f.addEventListener(d,j,!0),(f.minified2=f.minified2||[]).push(a))})})},onOver:function(a){var b=[],c=this;
return c.on("|mouseover |mouseout",function(e,d){var f="mouseout"!=e.type,g=e.relatedTarget;if(b[d]!==f&&(f||!g||g!=c[d]&&!A(g).trav("parentNode",c[d]).length))b[d]=f,a.call(this,f,d)})},trigger:function(a,b){var c=b||{};return this.each(function m(b,f,g){var j;d(B?I[b.minified]:b.minified2,function(d){d.n==a&&(j=j||d.h(c,g||b))});b.parentNode&&!j&&m(b.parentNode,f,g||b)})}},function(a,b){F.prototype[a]=b});v({request:function(a,b,c,e,d,l){var n,p=c,s=0,u=z();try{n=x.XMLHttpRequest?new XMLHttpRequest:
new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(e=e||{},!g(c)&&!f(c)&&(p=q(c,function da(a,b){return j(b)?t(b,function(b){return da(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!f(c)&&(!g(c)&&!e["Content-Type"])&&(e["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+p,p=null)),n.open(a,b,!0,d,l),v(e,function(a,b){n.setRequestHeader(a,b)}),n.onreadystatechange=function(){4==n.readyState&&!s++&&(200==n.status?u(!0,[n.responseText,n.responseXML]):
u(!1,[n.status,n.statusText,n.responseText]))},n.send(p)}catch(C){s||u(!1,[0,null,k(C)])}return u},toJSON:function b(c){return null==c?""+c:g(c=c.valueOf())?'"'+p(c,/[\\\"\x00-\x1f\x22\x5c]/g,S)+'"':j(c)?"["+t(c,b).join()+"]":"object"==typeof c?"{"+q(c,function(c,d){return b(c)+":"+b(d)}).join()+"}":k(c)},parseJSON:x.JSON?x.JSON.parse:function(b){b=p(b,/[\x00\xad\u0600-\uffff]/g,S);if(/^[[\],:{}\s]*$/.test(p(p(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},
ready:R,setCookie:function(b,c,e,d,f,g){y.cookie=b+"="+(g?c:escape(c))+(e?"; expires="+("object"==typeof e?e:new Date((new Date).getTime()+864E5*e)).toUTCString():"")+"; path="+(d?escapeURI(d):"/")+(f?"; domain="+escape(f):"")},getCookie:function(b,c){var e,d=(e=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(y.cookie))&&e[2];return c?d:d&&unescape(d)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<N.length;b++)N[b]===c&&N.splice(b--,1)}};2>N.push(c)&&function m(){d(N,function(b){b.c(Math.max(0,
(new Date).getTime()-b.t),b.s)}).length&&aa(m)}();return c.s},wait:function(b,c){var e=z();x.setTimeout(function(){e(!0,c)},b||0);return e},off:function(b){d(b.M,function(b){B?(b.e.detachEvent("on"+b.n,b.h),I[b.e.minified]=n(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!0),b.e.minified2=n(b.e.minified2,b))});b.M=null}},function(b,c){A[b]=c});x.onload=W;y.addEventListener&&y.addEventListener("DOMContentLoaded",W,!1);x.unload=function(){d(I,L)};return{$:A,$$:function(b){return H(b)[0]},EE:X,
M:F}});var _=require("minifiedUtil")._;
function parseSourceSections(k){function g(){return{id:"anon"+l++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}k=k.split("\n");var l=100,f=[],j=g(),u=!1;_.each(k,function(k){if(u&&/^.*\*\/\s*$/.test(k))u=!1;else if(u){var d=k.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),n=d.match(/^\s*@([a-z]+)/);n?(n=n[1],d=_.trim(d.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==n||"example"==n?j[n].push(d):"requires"==n?d.length&&_.each(d.split(/\s+/),function(d){j.requires[d]=1}):"param"==
n?j.params.push({name:d.replace(/\s.*$/,""),desc:d.replace(/^\S+\s+/,"")}):"return"==n?j.params.push({name:"@return",desc:d}):"function"==n?j.params[j.params.length-1].funcs.push(d):j[n]=""!=d?d:1):j.params.length?j.params[j.params.length-1].desc+="\n"+_.trim(d):j.example.length?j.example[j.example.length-1]+="\n"+d:j.desc+=d+"\n"}else/^\s*\/\*\$/.test(k)&&!/\*\/\s*$/.test(k)&&(u=!0,f.push(j),j=g());j.src.push(k)});f.push(j);return f}
function createSectionMap(k){var g={};_.each(k,function(k){g[k.id]=k});return g}function completeRequirements(k,g){var l=0;_.each(k,function(f){_.eachObj(f.requires,function(j){var k=g[j];if(!k)throw Error('Unknown id in requirement: "'+j+'"');_.eachObj(k.requires,function(g){f.requires[g]||(l++,f.requires[g]=1)})})});0<l?completeRequirements(k,g):_.each(k,function(f){_.eachObj(f.requires,function(j){g[j].requiredBy[f.id]=1})})}
function calculateDependencies(k,g){var l={};_.eachObj(g,function(f){g[f]&&(l[f]=1,_.eachObj(k[f].requires,function(f){l[f]=1}))});return l}function createDefaultConfigurationMap(k,g){var l={};_.each(k,function(f){if(f.configurable&&("default"==f.configurable||g))l[f.id]=1});return l}
function compile(k,g,l){var f="",j=calculateDependencies(g,l),u=[],v=!0;_.filter(k,function(d){return j[d.id]||!(d.configurable||d.dependency)}).each(function(d){_.each(d.src,function(d){if(/^\s*$/.test(d))v||(f+="\n"),v=!0;else{var g=d.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(g&&"cond"==g[2]&&!!j[g[4]]!=("!"==g[3]))f+=g[1]+g[5]+"\n";else{var k=!1,l=!0;g&&"condblock"==g[2]?u.push(!!j[g[4]]!=("!"==g[3])):/^\s*\/\/\s*@condend\b/.test(d)&&(k=!0);for(g=0;g<u.length;g++)if(!u[g]){l=
!1;break}l&&(f+=d+"\n");k&&u.pop()}v=!1}})});return f}function prepareSections(k){k=parseSourceSections(k);var g=createSectionMap(k);completeRequirements(k,g);var l=createDefaultConfigurationMap(k);return{sections:k,sectionMap:g,enabledSections:l}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(k,g){var l=_.filter(k,function(d){return d.configurable}),f=_.filter(_.keys(g),function(d){return g[d]}),j,u=[];f.length==l.length?(j=CONFIG_COMMENT+CONFIG_ALL,u=[]):f.length/3>l.length/2?(j=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,u=_.filter(l,function(d){return!g[d.id]}).collect(function(d){return d.id})):(j=CONFIG_COMMENT+CONFIG_ONLY,u=f);var v="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+j,d=50;_(u).sort().each(function(f){d<f.length?
(d=70,v+="\n// - "+f+", "):(v+=f+", ",d-=f.length+2)});return v=v.replace(/,\s*$/,".\n")}function fixConfig(k,g){_.eachObj(g,function(l){k[l]?_.copyObj(k[l].requires,g):delete g[l]});return g}
function deserializeEnabledSections(k,g,l){function f(d){return RegExp("^"+d.replace(/ /g,"\\s+"))}var j=f(CONFIG_START+".*"),u=f(CONFIG_ALL.replace(/\./,"\\.")),v=f(CONFIG_ALL_EXCEPT+"\\s*"),d=f(CONFIG_ONLY+"\\s*"),n=f(CONFIG_COMMENT);l=l.split("\n");for(var t=0;t<l.length;t++){var q=l[t];if(/^\s*\/\/s*/.test(q)&&(q=q.replace(/^\s*\/\/\s*/,""),j.test(q)&&t+1<l.length)){for(var q="",p=t+1;p<l.length;p++)if(n.test(l[p])){if(q+=l[p].replace(n,""),/\s*\.\s*$/.test(l[p]))break}else break;if(u.test(q))return createDefaultConfigurationMap(k,
!0);q=q.replace(/\s*\.\s*$/,"");if(v.test(q)){var s=createDefaultConfigurationMap(k,!0);_.each(q.replace(v,"").split(/\s*,\s*/),function(d){delete s[d]});return fixConfig(g,s)}if(d.test(q))return s={},_.each(q.replace(d,"").split(/\s*,\s*/),function(d){g[d]&&(s[d]=1)}),fixConfig(g,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(k,g,l){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:k,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:g?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){l&&l($.parseJSON(f))},function(f,g,k){window.console&&console.log("error",f,g,k);l&&l(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(k){function g(){$(".modCheck").each(function(d){var f=0;$(".secCheck",d.parentNode.parentNode).each(function(d){d.checked&&f++});d.checked=0<f})}function l(d){var f=k.sectionMap[d.id.substr(4)];d.checked?_.eachObj(f.requires,function(d){$("#sec-"+d).set("checked",!0)}):_.eachObj(f.requiredBy,function(d){$("#sec-"+d).set("checked",!1)})}$("#compile").on("click",function(){var d={};$(".secCheck").each(function(f){f.checked&&(d[f.id.substr(4)]=1)});var f=compile(k.sections,
k.sectionMap,d),g=serializeEnabledSections(k.sections,d);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(f,!0,function(d){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});d?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=g+"\n"+d.compiledCode,$("#resultPlain").fill((d.statistics.compressedSize/1024).toFixed(2)+"kb ("+d.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((d.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+d.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+d.outputFilePath),$("#resultGzippedComment").set({$$fade:d.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=g+f,$("#resultPlain").fill((f.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(j){console.log(j)}return!1});
var f=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",f,[!1]);$("#loadConfig").on("|click",f,[!0]);$("#recreate").on("click",function(){try{var d=$$("#configSrc").value,f=deserializeEnabledSections(k.sections,k.sectionMap,d);f?(_.eachObj(k.sectionMap,function(d){var g=$$("#sec-"+d);g&&(g.checked=!!f[d])}),g()):alert("Can not find configuration in source.")}catch(j){console.log(j)}});$("#sectionCheckboxes").fill();for(var j=1;j<GROUPS.length;j++){var u;$("#sectionCheckboxes").add(u=
EE("div",{"@id":"divMod-"+j},EE("div",{className:"groupDescriptor"},[f=EE("input",{"@id":"mod-"+j,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+j},GROUPS[j])]))());$(f).on("change",function(){var d=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=d;l(f)});g();return!0});var v;_.filter(k.sections,function(d){return d.group==GROUPS[j]&&d.configurable}).sort(function(d,f){var g=d.name||d.id,k=f.name||f.id;return g==k?0:g>k?1:
-1}).each(function(d){function f(d,g){var j=_.filter(_.keys(g),function(d){return!!g[d].name});if(!j.length)return null;var l=0,n=d;_.each(j,function(d){l++<Math.min(j.length,8)&&(1<l&&(n=l==Math.min(j.length,8)?n+" and ":n+", "),n=8==l&&8<j.length?n+"more":n+(k.sectionMap[d].name||k.sectionMap[d].id))});return n+="."}var j=f("Required by ",d.requiredBy),q=f("Requires ",d.requires);u.add(EE("div",{className:"sectionDescriptor"},[v=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+d.id,
checked:"default"==d.configurable?"checked":null})(),EE("label",{"@for":"sec-"+d.id},d.name||d.id),EE("div",{className:"requirements"},[j?[j,EE("br")]:null,q])]));$(v).on("change",function(){l(this);g();return!0})})}}
$(function(){var k=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);k&&10>parseInt(k[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(g){setUpConfigurationUI(prepareSections(g))}).error(function(g){window.console&&console.log(g)})});
