if(/^u/.test(typeof define)){var def={};this.define=function(d,h){def[d]=h()};this.require=function(d){return def[d]}}
define("minifiedUtil",function(){function d(j){return j.substr(0,3)}function h(j){return null!=j?""+j:""}function k(j){return"string"==typeof j}function n(j){return!!j&&"object"==typeof j}function m(j){return"number"==typeof j}function q(j){return n(j)&&!!j.getDay}function v(j){return!0===j||!1===j}function l(j){var a=typeof j;return"object"==a?!(!j||!j.getDay):"string"==a||"number"==a||v(j)}function p(j){return!!j&&null!=j.length&&!k(j)&&!(j&&j.nodeType)&&!Q(j)}function g(j){return j}function r(j){return j+
1}function t(j,a,b){return h(j).replace(a,null!=b?b:"")}function D(j){return t(j,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function G(j){return t(j,/^\s+|\s+$/g)}function x(j,a){for(var b in j)j.hasOwnProperty(b)&&a(b,j[b]);return j}function A(j,a){if(j)for(var b=0;b<j.length;b++)a(j[b],b);return j}function K(j,a){var b=[],c=Q(a)?a:function(j){return a!=j};A(j,function(j,a){c(j,a)&&b.push(j)});return b}function W(j,a,b){var c=[];j(a,function(j,a){p(j=b(j,a))?A(j,function(j){c.push(j)}):null!=j&&c.push(j)});
return c}function S(j,a){return W(A,j,a)}function X(j){var a=[];x(j,function(j){a.push(j)});return a}function B(j,a){var b=[];A(j,function(j,c){b.push(a(j,c))});return b}function T(j,a){if(p(j)){var b=R(a);return z(R(j).sub(0,b.length),b)}return null!=a&&j.substr(0,a.length)==a}function Y(j,a){if(p(j)){var b=R(a);return R(j).sub(-b.length).equals(b)||!b.length}return null!=a&&j.substr(j.length-a.length)==a}function Z(j){var a=j.length;return B(j,function(){return j[--a]})}function y(a,b,c){if(!a)return[];
var f=C(a,b,0),e=C(a,c,a.length);return K(a,function(a,j){return j>=f&&j<e})}function E(a,b){var c={};A(a,function(a){c[a]=b});return c}function L(a,b,c){x(a,function(a,j){if(null==b[a]||!c)b[a]=j});return b}function U(a){return Q(a)?a:function(b,c){if(a===b)return c}}function C(a,b,c){return null==b?c:0>b?a.length+b:b}function w(a,b,c,f){b=U(b);f=C(a,f,a.length);for(var e=C(a,c,0);e<f;e++)if(null!=(c=b(a[e],e)))return c}function F(a,b,c,f){b=U(b);f=C(a,f,-1);for(var e=C(a,c,a.length-1);e>f;e--)if(null!=
(c=b(a[e],e)))return c}function ba(a){return B(a,g)}function I(b){return function(){return new M(a(b,arguments))}}function N(a){var b={};return K(a,function(a){if(b[a])return!1;b[a]=1;return!0})}function V(a,b){var c=E(b,1);return K(a,function(a){var b=c[a];c[a]=0;return b})}function ca(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function z(a,b){var c=Q(a)?a():a,e=Q(b)?b():b;if(c==e)return!0;if(null==c||null==e)return!1;if(l(c)||l(e))return q(c)&&q(e)&&c.getTime()==e.getTime();if(p(c))return c.length!=
e.length?!1:!w(c,function(a,b){if(!z(a,e[b]))return!0});if(p(e))return!1;var f=X(c),g=f.length,u=0;x(e,function(){u++});return g!=u?!1:!w(f,function(a){if(!z(c[a],e[a]))return!0})}function aa(a,b,c){return a.apply(c&&b,B(c||b,g))}function a(a,b,c){return B(a,function(a){return Q(a)?aa(a,b,c):da})}function b(a,b,c,e){return function(){return aa(a,b,S([c,arguments,e],g))}}function c(a,b){return e(b,0,0,0,a)}function e(a,b,c,e,f,p,g){function u(a){var b=a.length;return b>g?u(a.substr(0,b-g))+(p||",")+
a.substr(b-g):a}var s=0>a,l=/(\d+)(\.(.*))?/.exec((s?-a:a).toFixed(b));a=l[1];for(e=(e||".")+l[3];a.length<(f||1);)a="0"+a;g&&(a=u(a));return(s?"-":"")+a+(b?c?t(e,/[.,]?0+$/):e:"")}function f(a,b,c){return null==b||!a?0:60*parseInt(a[b])+parseInt(a[b+1])+c.getTimezoneOffset()}function s(a,b){if(1==arguments.length)return s(null,a);if(/^\?/.test(a)){if(""==G(b))return null;a=a.substr(1)}var c,e=(c=/[0#]([.,])[_9]/.exec(a))?c[1]:(c=/^[.,]$/.exec(a))?c[0]:".";c=parseFloat(t(t(t(b,","==e?/\./g:/,/g),
e,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?da:c}function u(a){return new Date(a.getTime())}function O(a,b,c){a["set"+b].call(a,a["get"+b].call(a)+c);return a}function ea(a,b,c){return 3>arguments.length?ea(new Date,a,b):O(u(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function ja(a,b,c){var e=b.getTime(),f=c.getTime(),g=f-e;if(0>g)return-ja(a,c,b);if(b={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return g/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(g/{fullYear:31536E6,month:2628E6,
date:864E5}[a]-2);e=O(new Date(e),b,a);for(g=a;g<1.2*a+4;g++)if(O(e,b,1).getTime()>f)return g}function fa(a){return t(a,/['"\t\n\r]/g,function(a){return oa[a]})}function ga(a,b){if(ha[a])return ha[a];var c="with(_.isObject(obj)?obj:{}){"+B(a.split(/{{|}}}?/),function(a,b){var c,j=G(a),e=t(j,/^{/),j=j==e?"esc(":"";if(b%2)return(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(e))?"each("+(""==G(c[4])?"this":c[4])+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(e))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(e))?
"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(e))?c[1]?"}\n":"});\n":(c=/^(var\s.*)/.exec(e))?c[1]+";":(c=/^#(.*)/.exec(e))?c[1]:(c=/(.*)::\s*(.*)/.exec(e))?"print("+j+'_.formatValue("'+fa(c[2])+'",'+(""==G(c[1])?"this":c[1])+(j&&")")+"));\n":"print("+j+(""==G(e)?"this":e)+(j&&")")+");\n";if(""!=a)return'print("'+fa(a)+'");\n'}).join("")+"}",e=new Function("obj","each","esc","print","_",c);return ha[a]=function(a,c){var j=[];e.call(c||a,a,function(a,b){p(a)?A(a,function(a,c){b.call(a,a,
c)}):x(a,function(a,c){b.call(c,a,c)})},b||g,function(){aa(j.push,j,arguments)},R);return j.join("")}}function ka(a){return t(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function P(a){return function(b,c){return new M(a(this,b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function H(a){return function(b,c,e){return new M(a(b,c,e))}}function Q(a){return"function"==typeof a}function M(a,b){for(var c=0,e=0;e<a.length;e++){var f=a[e];if(b&&p(f))for(var g=0;g<f.length;g++)this[c++]=
f[g];else this[c++]=f}this.length=c;this._=!0}function R(){return new M(arguments,!0)}var da,ia="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),la=B(ia,d),ma="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),pa=B(ma,d),na=["am","pm"],oa={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ha={};L({each:J(A),filter:P(K),collect:P(S),map:P(B),toObject:J(E),equals:J(z),sub:P(y),reverse:P(Z),find:J(w),findLast:J(F),startsWith:J(T),
endsWith:J(Y),contains:J(ca),call:P(a),array:J(ba),unite:J(I),uniq:P(N),intersection:P(V),join:function(a){return B(this,g).join(a)},sort:function(a){return new M(B(this,g).sort(a))}},M.prototype);L({filter:H(K),collect:H(S),collectObj:H(function(a,b){return W(x,a,b)}),map:H(B),sub:H(y),reverse:H(Z),each:A,toObject:E,find:w,findLast:F,contains:ca,startsWith:T,endsWith:Y,equals:z,keys:H(X),values:H(function(a,b){var c=[];b?A(b,function(b){c.push(a[b])}):x(a,function(a,b){c.push(b)});return c}),call:H(a),
array:ba,unite:I,uniq:H(N),intersection:H(V),copyObj:L,range:function(a,b){for(var c=[],e=null==b?a:b,f=null!=b?a:0;f<e;f++)c.push(f);return new M(c)},bind:b,partial:function(a,c,e){return b(a,null,c,e)},eachObj:x,mapObj:function(a,b){var c={};x(a,function(a,e){c[a]=b(a,e)});return c},filterObj:function(a,b){var c={};x(a,function(a,e){b(a,e)&&(c[a]=e)});return c},isList:p,isFunction:Q,isObject:n,isNumber:m,isBool:v,isDate:q,isValue:l,isString:k,toString:h,dateClone:u,dateAdd:ea,dateDiff:ja,dateMidnight:function(a){a=
a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:c,formatValue:function(a,b){a=t(a,/^\?/);if(q(b)){var u,s,l=a,d=b,O={y:["FullYear",g],Y:["FullYear",function(a){return a%100}],M:["Month",r],n:["Month",la],N:["Month",ia],d:["Date",g],m:["Minutes",g],H:["Hours",g],h:["Hours",function(a){return a%12||12}],k:["Hours",r],K:["Hours",function(a){return a%12}],s:["Seconds",g],S:["Milliseconds",g],a:["Hours",function(a,b){return(b||na)[12>a?0:1]}],w:["Day",pa],W:["Day",ma],z:["TimezoneOffset",
function(a){if(u)return u;var b=0<a?a:-a;return(0>a?"+":"-")+c(2,Math.floor(b/60))+c(2,b%60)}]};if(s=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))u=s[1],d=ea(b,"minutes",f(s,2,b)),l=s[4];return t(l,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,e,f){if(b=O[b])a=d["get"+(p(b)?b[0]:b)].call(d),f=f&&f.split(","),a=p(b[1])?(f||b[1])[a]:b[1](a,f),null!=a&&!k(a)&&(a=c(e.length+1,a));return a})}return w(a.split(/\s*\|\s*/),function(a){var c,f;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var j=parseFloat(c[3]);
if(isNaN(j)||!m(a))a=null==a?"null":h(a),j=c[3];if(c[1]){if(!c[2]&&a==j||"<"==c[1]&&a>j||">"==c[1]&&a<j)return null}else if(a!=j)return null;a=c[4]}if(m(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){f=h(c[1])+h(c[2]);var j=h(c[1]).length?t(f,/[.,]/g).length:1,g=t(t(f,/^.*[0#]/),/[^,.]/g),p=h(c[3]).length+h(c[4]).length,u,s;if(f=/([.,])[^.,]+[.,]/.exec(c[0]))u=f[1],s=f[0].length-2;u=e(b,p,h(c[3]).length,g,j,u,s);s=a;a=c.index;c=h(c[0]).length;return s.substr(0,a)+u+s.substr(a+c)}return a})},parseDate:function(a,
b){var c={y:0,Y:[0,-2E3],M:[1,1],n:[1,la],N:[1,ia],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,na]},e={},g=1,u,s,l;if(/^\?/.test(a)){if(""==G(b))return null;a=a.substr(1)}if(l=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))u=l,a=l[3];if(!(l=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,f){return/[dmhkyhs]/i.test(b)?(e[g++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(s=g,g+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(e[g++]=[b,f&&f.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?
"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":D(a)})).exec(b)))return da;for(var d=[0,0,0,0,0,0,0],h=1;h<g;h++){var O=l[h],k=e[h];if(p(k)){var m=k[0],n=c[m],r=n[0],k=w(k[1]||n[1],function(a,b){return T(O.toLowerCase(),a.toLowerCase())?b:null});if(null==k)return da;d[r]="a"==m?d[r]+12*k:k}else k&&(m=parseInt(O),n=c[k],p(n)?d[n[0]]+=m-n[1]:d[n]+=m)}c=new Date(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);return ea(c,"minutes",-f(u,1,c)-f(l,s,c))},parseNumber:s,trim:G,escapeRegExp:D,escapeHtml:ka,format:function(a,
b){return ga(a)(b)},template:ga,formatHtml:function(a,b){return ga(a,ka)(b)}},R);return{_:R,M:M}});/^u/.test(typeof define)&&(def={},this.define=function(d,h){def[d]=h()},this.require=function(d){return def[d]});
define("minified",function(){function d(a){return null!=a?""+a:""}function h(a){return"string"==typeof a}function k(a){return a&&a.nodeType}function n(a){return a&&null!=a.length&&!h(a)&&!k(a)&&!r(a)}function m(a){return a}function q(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function v(a,b){var c=[];g(a,function(a,f){b(a,f)&&c.push(a)});return c}function l(a,b,c){var e=[];a(b,function(a,b){g(c(a,b),function(a){e.push(a)})});return e}function p(a,b,c){return d(a).replace(b,c||"")}function g(a,
b){if(n(a))for(var c=0;c<a.length;c++)b(a[c],c);else null!=a&&b(a,0);return a}function r(a){return"function"==typeof a&&!a.item}function t(){return 1}function D(a,b){var c=RegExp("\\b"+a+"\\b","i");return a?function(a){return c.test(a[b])}:t}function G(a,b){for(var c=0;a&&c<a.length;c++)a[c]===b&&a.splice(c--,1)}function x(a){return parseFloat(p(a,/^[^\d-]+/))}function A(a){return a.minified=a.minified||++ba}function K(a,b){var c=[],e={},f;g(a,function(a){g(b(a),function(a){if(k(a)&&!e[f=A(a)])c.push(a),
e[f]=!0})});return c}function W(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function S(a){a()}function X(a,b){g(b,function(a){a.e.detachEvent("on"+a.n,a.h)})}function B(){g(N,S);N=null}function T(a){N?N.push(a):w.setTimeout(a,0)}function Y(a,b,c,e){return function(){var f=y(F.createElement(a));n(b)||null!=b&&"object"!=typeof b?f.add(b):f.set(b).add(c);e&&e(f);return f}}function Z(a){return aa[a]||"\\u"+
("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function y(a,b,c){return r(a)?T(a):new C(E(a,b,c))}function E(a,b,c){function e(a){a=l(g,a,function fa(a){return n(a)?l(g,a,fa):a});return f?v(a,function(a){for(;a=a.parentNode;){if(a===f)return!0;if(c)return!1}}):a}var f,s,u,d;if(b&&1!=(b=E(b)).length)return K(b,function(b){return E(a,b,c)});f=b&&b[0];if(!h(a))return e(a);if(1<(b=a.split(/\s*,\s*/)).length)return K(b,function(a){return E(a,f,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return E(b[2],E(b[1],f),
c);if(a!=(b=p(a,/^#/)))return e(F.getElementById(b));f=f||F;s=(b=/([\w-]*)\.?([\w-]*)/.exec(a))[1];d=b[2];b=(u=f.getElementsByClassName&&d)?f.getElementsByClassName(d):f.getElementsByTagName(s||"*");if(s=u?s:d)b=v(b,D(s,u?"nodeName":"className"));return f?e(b):b}function L(a,b){var c,e={};if(r(a))return a;if(!a||h(a)&&("*"==a||(c=/^([\w-]*)\.([\w-]+)$/.exec(a))||(c=/^([\w-]+)$/.exec(a)))){var f=D(c&&c[1],"nodeName"),g=D(c&&c[2],"className");return function(a){return 1==k(a)&&f(a)&&g(a)}}if(b)return function(c){return null!=
y(a,b).find(c)};y(a).each(function(a){e[A(a)]=!0});return function(a){return e[A(a)]}}function U(){var a,b=[],c=[],e=function(e,f){null==a&&(a=e,b=f,w.setTimeout(function(){g(c,S)},0))},f=e.then=function(e,f){var g=U(),p=function(){try{var c=a?e:f;if(r(c)){var p=c.apply(null,b);p&&r(p.then)?p.then(function(a){g(!0,[a])},function(a){g(!1,[a])}):g(!0,[p])}else g(a,b)}catch(d){g(!1,[d])}};null!=a?w.setTimeout(p,0):c.push(p);return g};e.error=function(a){return f(0,a)};return e}function C(a){for(var b=
this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var w=this,F=document,ba=1,I={},N=[],V=[],ca=w.requestAnimationFrame||function(a){w.setTimeout(a,33)},z=!!F.all&&!N.map,aa={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};q({each:function(a){return g(this,a)},filter:function(a){return new C(v(this,a))},collect:function(a){return new C(l(g,this,a))},sub:function(a,b){var c=0>a?this.length+a:a,e=0<=b?b:this.length+(b||0);return this.filter(function(a,b){return b>=c&&b<e})},find:function(a,b){for(var c,
e=r(a)?a:function(b,c){if(a===b)return c},f=b;f<this.length;f++)if(null!=(c=e(this[f],f)))return c},remove:function(){g(this,function(a){z&&1==k(a)&&(g(E("*",a),function(a){X(0,I[a.minified]);delete I[a.minified]}),removeEvents(a));a.parentNode.removeChild(a)})},text:function(){function a(b){var c=k(b);return 1==c?l(g,b.childNodes,a):5>c?b.data:null}return l(g,this,a).join("")},trav:function(a,b,c){var e=L("number"==typeof b?null:b),f="number"==typeof b?b:c||1E9;return new C(K(this,function(b){for(var c=
[];(b=b[a])&&c.length<f;)e(b)&&c.push(b);return c}))},select:function(a,b){return y(a,this,b)},is:function(a){var b=L(a);return!this.find(function(a){if(!b(a))return!0})},only:function(a){return this.filter(L(a))},get:function(a,b){var c=this,e=c[0];if(e){if(h(a)){var f=p(p(a,/^%/,"data-"),/^[$@]/),d;d="$"==a?e.className:"$$"==a?z?e.style.cssText:e.getAttribute("style"):/\$\$/.test(a)&&("hidden"==e.style.visibility||"none"==e.style.display)?0:"$$fade"==a?isNaN(d=z?x(e.style.filter)/100:x(e.style.opacity))?
1:d:"$$slide"==a?c.get("$height"):/^\$/.test(a)?w.getComputedStyle?w.getComputedStyle(e,null).getPropertyValue(p(f,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(e.currentStyle||e.style)[f]:/^[@%]/.test(a)?e.getAttribute(f):e[f];return b?x(d):d}var l={};(n(a)?g:q)(a,function(a){l[a]=c.get(a,b)});return l}},set:function(a,b){var c=this,e;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(e=x(b))?"visible":"hidden",$display:"block"}).set("$$fade"==a?z?{$filter:"alpha(opacity = "+100*e+")",
$zoom:1}:{$opacity:e}:{$height:/px/.test(b)?b:function(a,b,c){return e*(e&&W(y(c)))+"px"},$overflow:"hidden"}):g(c,function(c,e){var d=p(p(a,/^%/,"data-"),/^[@$]/),l=c.className||"",h=/^\$/.test(a)?c.style:c,k=r(b)?b(y(c).get(a),e,c):b;"$"==a?null!=k&&(g(k.split(/\s+/),function(a){var b=p(a,/^[+-]/),c=l;l=p(l,RegExp("\\b"+b+"\\b","i"));if(/^\+/.test(a)||b==a&&c==l)l+=" "+b}),c.className=p(l,/^\s+|\s+(?=\s|$)/g)):"$$"==a?z?h.cssText=k:null!=k?c.setAttribute("style",k):c.removeAttribute("style"):/^[@%]/.test(a)?
null!=k?h.setAttribute(d,k):h.removeAttribute(d):h[d]=k}):h(a)||r(a)?c.set("$",a):q(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return this.each(function(c,e){var f;(function u(a){n(a)?g(a,u):r(a)?u(a(c,e)):null!=a&&(a=k(a)?a:F.createTextNode(a),f?f.parentNode.insertBefore(a,f.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),f=a)})(k(a)&&e?null:a)})},fill:function(a){return this.each(function(a){y(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,function(a,
c,e){e.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,e){e.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,e){e.replaceChild(a,c)})},clone:function(a){return this.collect(function(b){var c=k(b);if(1==c){var e={$:b.className||null,$$:z?b.style.cssText:b.getAttribute("style")};g(b.attributes,function(a){var c=a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&
(e["@"+c]=a.value)});return Y(b.tagName,e,y(b.childNodes).clone(),a)}return 5>c?b.data:null})},animate:function(a,b,c,e){var f=this,l=[],k=/-?[\d.]+/,h,n=U(),m=r(c)?c:function(a,b,e){return a+e*(b-a)*(c+(1-c)*e*(3-2*e))};e=e||{};e.time=0;e.stop=function(){h();n(!1)};b=b||500;c=c||0;g(f,function(b){var c={o:y(b),e:{}};q(c.s=c.o.get(a),function(b,e){var f=a[b];"$$slide"==b&&(f=f*W(c.o)+"px");c.e[b]=/^[+-]=/.test(f)?p(f.substr(2),k,x(e)+x(p(f,/\+?=/))):f});l.push(c)});h=y.loop(function(a){function c(a,
b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(p(a,/[^\d,]+/g).split(",")[b])}e.time=a;a>=b||0>a?(g(l,function(a){a.o.set(a.e)}),h(),e.time=null,n(!0,[f])):g(l,function(e){q(e.s,function(f,g){var l="rgb(",h=e.e[f],n=a/b;if(/^#|rgb\(/.test(h))for(var s=0;3>s;s++)l+=Math.round(m(c(g,s),c(h,s),n))+(2>s?",":")");else l=p(h,k,d(m(x(g),x(h),n)));e.o.set(f,l)})})});return n},toggle:function(a,b,c,e){var f=this,g={},l=!1,d=/\b(?=\w)/g,h;return b?f.set(a)&&function(d){if(d!==
l)return h=(l=!0===d||!1===d?d:!l)?b:a,r(h)?h(f,c,e):c?f.animate(h,g.stop?g.stop()||g.time:c,e,g):f.set(h)&&void 0}:f.toggle(p(a,d,"-"),p(a,d,"+"))},values:function(a){var b=a||{};this.each(function(a){var e=a.name,f=d(a.value);if(/form/i.test(a.tagName))y(l(g,a.elements,m)).values(b);else if(e&&(!/kbox|dio/i.test(a.type)||a.checked))b[e]=l(g,[b[e],f],m)});return b},offset:function(){for(var a=this[0],b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},on:function(a,b,c,e){return this.each(function(f,
l){g(a.split(/\s/),function(a){var g=p(a,/\|/),d=r(b)||null,h=d?b:c,k=d&&e&&c,n=d&&(e||c),m=g==a,q=d?t:L(b,f),d=function(a,b){var c=a||w.event,e,f=b||c.target;if(q(f)&&(e=(!h.apply(k||f,n||[c,l])||n)&&m)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return e};a={e:f,h:d,n:g};(h.M=h.M||[]).push(a);z?(f.attachEvent("on"+g,d),g=A(f),(I[g]=I[g]||[]).push(a)):(f.addEventListener(g,d,!1),(f.minified2=f.minified2||[]).push(a))})})},onOver:function(a){var b=
this,c=[];return b.on("|mouseover |mouseout",function(e,f){var g="mouseout"!=e.type,d=e.relatedTarget||e.toElement;if(c[f]!==g&&(g||!d||d!=b[f]&&!y(d).trav("parentNode",b[f]).length))c[f]=g,a.call(this,g,f)})},trigger:function(a,b){return this.each(function(c){for(var e,f=c;f&&!e;)g(z?I[f.minified]:f.minified2,function(f){f.n==a&&(e=e||f.h(b,c))}),f=f.parentNode})}},function(a,b){C.prototype[a]=b});q({request:function(a,b,c,e,f,p){var n,m=c,r=0,t=U();try{n=w.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),
null!=c&&(e=e||{},!h(c)&&!k(c)&&(m=l(q,c,function(a,b){return l(g,b,function(b){return encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")})}).join("&")),/post/i.test(a)?!k(c)&&(!h(c)&&!e["Content-Type"])&&(e["Content-Type"]="application/x-www-form-urlencoded"):(b+="?"+m,m=null)),n.open(a,b,!0,f,p),q(e,function(a,b){n.setRequestHeader(a,b)}),n.onreadystatechange=function(){4==n.readyState&&!r++&&(200==n.status?t(!0,[n.responseText,n.responseXML]):t(!1,[n.status,n.statusText,n.responseText]))},
n.send(m)}catch(v){r||t(!1,[0,null,d(v)])}return t},toJSON:function b(c){return null==c?""+c:h(c=c.valueOf())?'"'+p(c,/[\\\"\x00-\x1f\x22\x5c]/g,Z)+'"':n(c)?"["+l(g,c,b).join()+"]":"object"==typeof c?"{"+l(q,c,function(c,f){return b(c)+":"+b(f)}).join()+"}":d(c)},parseJSON:w.JSON?w.JSON.parse:function(b){b=p(b,/[\x00\xad\u0600-\uffff]/g,Z);if(/^[[\],:{}\s]*$/.test(p(p(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:T,setCookie:function(b,c,e,f,g,d){F.cookie=
b+"="+(d?c:escape(c))+(e?"; expires="+("object"==typeof e?e:new Date((new Date).getTime()+864E5*e)).toUTCString():"")+"; path="+(f?escapeURI(f):"/")+(g?"; domain="+escape(g):"")},getCookie:function(b,c){var e,f=(e=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(F.cookie))&&e[2];return c?f:f&&unescape(f)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){G(V,c)}};2>V.push(c)&&function f(){g(V,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&ca(f)}();return c.s},off:function(b){g(b.M,
function(b){z?(b.e.detachEvent("on"+b.n,b.h),G(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),G(b.e.minified2,b))});b.M=null}},function(b,c){y[b]=c});w.onload=B;F.addEventListener&&F.addEventListener("DOMContentLoaded",B,!1);w.unload=function(){g(I,X)};return{$:y,$$:function(b){return E(b)[0]},EE:Y,M:C}});var _=(require("minifiedUtil")||require("minified"))._;
function parseSourceSections(d){function h(){return{id:"anon"+k++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}d=d.split("\n");var k=100,n=[],m=h(),q=!1;_.each(d,function(d){if(q&&/^.*\*\/\s*$/.test(d))q=!1;else if(q){var l=d.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),p=l.match(/^\s*@([a-z]+)/);p?(p=p[1],l=_.trim(l.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==p||"example"==p?m[p].push(l):"requires"==p?l.length&&_.each(l.split(/\s+/),function(g){m.requires[g]=1}):"param"==
p?m.params.push({name:l.replace(/\s.*$/,""),desc:l.replace(/^\S+\s+/,"")}):"return"==p?m.params.push({name:"@return",desc:l}):"function"==p?m.params[m.params.length-1].funcs.push(l):m[p]=""!=l?l:1):m.params.length?m.params[m.params.length-1].desc+="\n"+_.trim(l):m.example.length?m.example[m.example.length-1]+="\n"+l:m.desc+=l+"\n"}else/^\s*\/\*\$/.test(d)&&!/\*\/\s*$/.test(d)&&(q=!0,n.push(m),m=h());m.src.push(d)});n.push(m);return n}
function createSectionMap(d){var h={};_.each(d,function(d){h[d.id]=d});return h}function completeRequirements(d,h){var k=0;_.each(d,function(d){_.eachObj(d.requires,function(m){var q=h[m];if(!q)throw Error('Unknown id in requirement: "'+m+'"');_.eachObj(q.requires,function(h){d.requires[h]||(k++,d.requires[h]=1)})})});0<k?completeRequirements(d,h):_.each(d,function(d){_.eachObj(d.requires,function(k){h[k].requiredBy[d.id]=1})})}
function calculateDependencies(d,h){var k={};_.eachObj(h,function(n){h[n]&&(k[n]=1,_.eachObj(d[n].requires,function(d){k[d]=1}))});return k}function createDefaultConfigurationMap(d,h){var k={};_.each(d,function(d){if(d.configurable&&("default"==d.configurable||h))k[d.id]=1});return k}
function compile(d,h,k){var n="",m=calculateDependencies(h,k),q=[],v=!0;_.filter(d,function(d){return m[d.id]||!(d.configurable||d.dependency)}).each(function(d){_.each(d.src,function(d){if(/^\s*$/.test(d))v||(n+="\n"),v=!0;else{var g=d.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(g&&"cond"==g[2]&&!!m[g[4]]!=("!"==g[3]))n+=g[1]+g[5]+"\n";else{var l=!1,h=!0;g&&"condblock"==g[2]?q.push(!!m[g[4]]!=("!"==g[3])):/^\s*\/\/\s*@condend\b/.test(d)&&(l=!0);for(g=0;g<q.length;g++)if(!q[g]){h=
!1;break}h&&(n+=d+"\n");l&&q.pop()}v=!1}})});return n}function prepareSections(d){d=parseSourceSections(d);var h=createSectionMap(d);completeRequirements(d,h);var k=createDefaultConfigurationMap(d);return{sections:d,sectionMap:h,enabledSections:k}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(d,h){var k=_.filter(d,function(d){return d.configurable}),n=_.filter(_.keys(h),function(d){return h[d]}),m,q=[];n.length==k.length?(m=CONFIG_COMMENT+CONFIG_ALL,q=[]):n.length/3>k.length/2?(m=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,q=_.filter(k,function(d){return!h[d.id]}).collect(function(d){return d.id})):(m=CONFIG_COMMENT+CONFIG_ONLY,q=n);var v="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+m,l=50;_(q).sort().each(function(d){l<d.length?
(l=70,v+="\n// - "+d+", "):(v+=d+", ",l-=d.length+2)});return v=v.replace(/,\s*$/,".\n")}function fixConfig(d,h){_.eachObj(h,function(k){d[k]?_.copyObj(d[k].requires,h):delete h[k]});return h}
function deserializeEnabledSections(d,h,k){function n(d){return RegExp("^"+d.replace(/ /g,"\\s+"))}var m=n(CONFIG_START+".*"),q=n(CONFIG_ALL.replace(/\./,"\\.")),v=n(CONFIG_ALL_EXCEPT+"\\s*"),l=n(CONFIG_ONLY+"\\s*"),p=n(CONFIG_COMMENT);k=k.split("\n");for(var g=0;g<k.length;g++){var r=k[g];if(/^\s*\/\/s*/.test(r)&&(r=r.replace(/^\s*\/\/\s*/,""),m.test(r)&&g+1<k.length)){for(var r="",t=g+1;t<k.length;t++)if(p.test(k[t])){if(r+=k[t].replace(p,""),/\s*\.\s*$/.test(k[t]))break}else break;if(q.test(r))return createDefaultConfigurationMap(d,
!0);r=r.replace(/\s*\.\s*$/,"");if(v.test(r)){var D=createDefaultConfigurationMap(d,!0);_.each(r.replace(v,"").split(/\s*,\s*/),function(d){delete D[d]});return fixConfig(h,D)}if(l.test(r))return D={},_.each(r.replace(l,"").split(/\s*,\s*/),function(d){h[d]&&(D[d]=1)}),fixConfig(h,D)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(d,h,k){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:d,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:h?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(d){k&&k($.parseJSON(d))},function(d,h,q){window.console&&console.log("error",d,h,q);k&&k(null)}).error(function(d){window.console&&console.log(d)})}
function setUpConfigurationUI(d){function h(){$(".modCheck").each(function(d){var h=0;$(".secCheck",d.parentNode.parentNode).each(function(d){d.checked&&h++});d.checked=0<h})}function k(h){var k=d.sectionMap[h.id.substr(4)];h.checked?_.eachObj(k.requires,function(d){$("#sec-"+d).set("checked",!0)}):_.eachObj(k.requiredBy,function(d){$("#sec-"+d).set("checked",!1)})}$("#compile").on("click",function(){var h={};$(".secCheck").each(function(d){d.checked&&(h[d.id.substr(4)]=1)});var k=compile(d.sections,
d.sectionMap,h),g=serializeEnabledSections(d.sections,h);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(k,!0,function(d){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});d?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=g+"\n"+d.compiledCode,$("#resultPlain").fill((d.statistics.compressedSize/1024).toFixed(2)+"kb ("+d.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((d.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+d.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+d.outputFilePath),$("#resultGzippedComment").set({$$fade:d.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=g+k,$("#resultPlain").fill((k.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(n){console.log(n)}return!1});
var n=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",n,[!1]);$("#loadConfig").on("|click",n,[!0]);$("#recreate").on("click",function(){try{var l=$$("#configSrc").value,k=deserializeEnabledSections(d.sections,d.sectionMap,l);k?(_.eachObj(d.sectionMap,function(d){var g=$$("#sec-"+d);g&&(g.checked=!!k[d])}),h()):alert("Can not find configuration in source.")}catch(g){console.log(g)}});$("#sectionCheckboxes").fill();for(var m=1;m<GROUPS.length;m++){var q;$("#sectionCheckboxes").add(q=
EE("div",{"@id":"divMod-"+m},EE("div",{className:"groupDescriptor"},[n=EE("input",{"@id":"mod-"+m,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+m},GROUPS[m])]))());$(n).on("change",function(){var d=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(h){h.checked=d;k(h)});h();return!0});var v;_.filter(d.sections,function(d){return d.group==GROUPS[m]&&d.configurable}).sort(function(d,h){var g=d.name||d.id,k=h.name||h.id;return g==k?0:g>k?1:
-1}).each(function(l){function n(g,h){var k=_.filter(_.keys(h),function(d){return!!h[d].name});if(!k.length)return null;var l=0,m=g;_.each(k,function(g){l++<Math.min(k.length,8)&&(1<l&&(m=l==Math.min(k.length,8)?m+" and ":m+", "),m=8==l&&8<k.length?m+"more":m+(d.sectionMap[g].name||d.sectionMap[g].id))});return m+="."}var g=n("Required by ",l.requiredBy),m=n("Requires ",l.requires);q.add(EE("div",{className:"sectionDescriptor"},[v=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+l.id,
checked:"default"==l.configurable?"checked":null})(),EE("label",{"@for":"sec-"+l.id},l.name||l.id),EE("div",{className:"requirements"},[g?[g,EE("br")]:null,m])]));$(v).on("change",function(){k(this);h();return!0})})}}
$(function(){var d=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);d&&10>parseInt(d[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(d){setUpConfigurationUI(prepareSections(d))}).error(function(d){window.console&&console.log(d)})});
