if(/^u/.test(typeof define)){var def={};this.define=function(f,k){def[f]=k()};this.require=function(f){return def[f]}}
define("minifiedUtil",function(){function f(j){return j.substr(0,3)}function k(j){return null!=j?""+j:""}function n(j){return"string"==typeof j}function h(j){return!!j&&"object"==typeof j}function l(j){return"number"==typeof j}function s(j){return h(j)&&!!j.getDay}function p(j){return!0===j||!1===j}function e(j){var a=typeof j;return"object"==a?!(!j||!j.getDay):"string"==a||"number"==a||p(j)}function m(j){return!!j&&null!=j.length&&!n(j)&&!(j&&j.nodeType)&&!R(j)}function t(j){return j}function q(j){return j+
1}function v(j,a,c){return k(j).replace(a,null!=c?c:"")}function w(j){return v(j,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function x(j){return v(j,/^\s+|\s+$/g)}function A(j,a){for(var c in j)j.hasOwnProperty(c)&&a(c,j[c]);return j}function D(j,a){if(j)for(var c=0;c<j.length;c++)a(j[c],c);return j}function M(j,a){var c=[],b=R(a)?a:function(j){return a!=j};D(j,function(j,a){b(j,a)&&c.push(j)});return c}function W(j,a,c){var b=[];j(a,function(j,a){m(j=c(j,a))?D(j,function(j){b.push(j)}):null!=j&&b.push(j)});
return b}function U(j,a){return W(D,j,a)}function X(j){var a=[];A(j,function(j){a.push(j)});return a}function B(j,a){var c=[];D(j,function(j,b){c.push(a(j,b))});return c}function V(j,a){if(m(j)){var c=S(a);return G(S(j).sub(0,c.length),c)}return null!=a&&j.substr(0,a.length)==a}function Y(a,c){if(m(a)){var b=S(c);return S(a).sub(-b.length).equals(b)||!b.length}return null!=c&&a.substr(a.length-c.length)==c}function y(a){var c=a.length;return B(a,function(){return a[--c]})}function H(a,c,b){if(!a)return[];
var d=a.length,g=0>c?d+c:c,r=null==b?d:0<=b?b:d+b;return M(a,function(a,j){return j>=g&&j<r})}function N(a,c){var b={};D(a,function(a){b[a]=c});return b}function T(a,c,b){A(a,function(a,j){if(null==c[a]||!b)c[a]=j});return c}function C(a,c){for(var b=R(c)?c:function(a,j){if(c===a)return j},d,g=0;g<a.length;g++)if(null!=(d=b(a[g],g)))return d}function z(a){return B(a,t)}function F(a){return function(){return new O(E(a,arguments))}}function aa(a){var c={};return M(a,function(a){if(c[a])return!1;c[a]=
1;return!0})}function I(a,c){var b=N(c,1);return M(a,function(a){var c=b[a];b[a]=0;return c})}function P(a,c){for(var b=0;b<a.length;b++)if(a[b]==c)return!0;return!1}function G(a,c){var b=R(a)?a():a,d=R(c)?c():c;if(b==d)return!0;if(null==b||null==d)return!1;if(e(b)||e(d))return s(b)&&s(d)&&b.getTime()==d.getTime();if(m(b))return b.length!=d.length?!1:!C(b,function(a,c){if(!G(a,d[c]))return!0});if(m(d))return!1;var g=X(b),r=g.length,u=0;A(d,function(){u++});return r!=u?!1:!C(g,function(a){if(!G(b[a],
d[a]))return!0})}function Z(a,c,b){return a.apply(b&&c,B(b||c,t))}function E(a,c,b){return B(a,function(a){return R(a)?Z(a,c,b):ba})}function ca(a,c,b,d){return function(){return Z(a,c,U([b,arguments,d],t))}}function a(a,b){return c(b,0,0,0,a)}function c(a,c,b,d,g,r,u){function m(a){var c=a.length;return c>u?m(a.substr(0,c-u))+(r||",")+a.substr(c-u):a}var e=0>a,k=/(\d+)(\.(.*))?/.exec((e?-a:a).toFixed(c));a=k[1];for(d=(d||".")+k[3];a.length<(g||1);)a="0"+a;u&&(a=m(a));return(e?"-":"")+a+(c?b?v(d,
/[.,]?0+$/):d:"")}function b(a,c,b){return null==c||!a?0:60*parseInt(a[c])+parseInt(a[c+1])+b.getTimezoneOffset()}function d(a,c){if(1==arguments.length)return d(null,a);if(/^\?/.test(a)){if(""==x(c))return null;a=a.substr(1)}var b,g=(b=/[0#]([.,])[_9]/.exec(a))?b[1]:(b=/^[.,]$/.exec(a))?b[0]:".";b=parseFloat(v(v(v(c,","==g?/\./g:/,/g),g,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(b)?ba:b}function g(a){return new Date(a.getTime())}function r(a,c,b){a["set"+c].call(a,a["get"+c].call(a)+b);return a}function u(a,
c,b){return 3>arguments.length?u(new Date,a,c):r(g(a),c.charAt(0).toUpperCase()+c.substr(1),b)}function L(a,c,b){var d=c.getTime(),g=b.getTime(),u=g-d;if(0>u)return-L(a,b,c);if(c={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[a])return u/c;c=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(u/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);d=r(new Date(d),c,a);for(u=a;u<1.2*a+4;u++)if(r(d,c,1).getTime()>g)return u}function ha(a){return v(a,/['"\t\n\r]/g,function(a){return la[a]})}function ea(a,
c){if(fa[a])return fa[a];var b="with(_.isObject(obj)?obj:{}){"+B(a.split(/{{|}}}?/),function(a,c){var b,d=x(a),j=v(d,/^{/),d=d==j?"esc(":"";if(c%2)return(b=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(j))?"each("+(""==x(b[4])?"this":b[4])+", function("+b[2]+"){":(b=/^if\b(.*)/.exec(j))?"if("+b[1]+"){":(b=/^else\b\s*(if\b(.*))?/.exec(j))?"}else "+(b[1]?"if("+b[2]+")":"")+"{":(b=/^\/(if)?/.exec(j))?b[1]?"}\n":"});\n":(b=/^#(.*)/.exec(j))?b[1]:(b=/(.*)::\s*(.*)/.exec(j))?"print("+d+'_.formatValue("'+
ha(b[2])+'",'+(""==x(b[1])?"this":b[1])+(d&&")")+"));\n":"print("+d+(""==x(j)?"this":j)+(d&&")")+");\n";if(""!=a)return'print("'+ha(a)+'");\n'}).join("")+"}",d=new Function("obj","each","esc","print","_",b);return fa[a]=function(a,b){var j=[];d.call(b||a,a,function(a,c){m(a)?D(a,function(a,b){c.call(a,a,b)}):A(a,function(a,b){c.call(b,a,b)})},c||t,function(){Z(j.push,j,arguments)},S);return j.join("")}}function da(a){return v(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function Q(a){return function(c,
b){return new O(a(this,c,b))}}function J(a){return function(c,b){return a(this,c,b)}}function K(a){return function(c,b,d){return new O(a(c,b,d))}}function R(a){return"function"==typeof a}function O(a,c){for(var b=0,d=0;d<a.length;d++){var g=a[d];if(c&&m(g))for(var u=0;u<g.length;u++)this[b++]=g[u];else this[b++]=g}this.length=b;this._=!0}function S(){return new O(arguments,!0)}var ba,ga="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ia=B(ga,f),ja=
"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ma=B(ja,f),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},fa={};T({each:J(D),filter:Q(M),collect:Q(U),map:Q(B),toObject:J(N),equals:J(G),sub:Q(H),reverse:Q(y),find:J(C),startsWith:J(V),endsWith:J(Y),contains:J(P),call:Q(E),array:J(z),unite:J(F),uniq:Q(aa),intersection:Q(I),join:function(a){return B(this,t).join(a)},sort:function(a){return new O(B(this,t).sort(a))}},O.prototype);T({filter:K(M),collect:K(U),
collectObj:K(function(a,c){return W(A,a,c)}),map:K(B),sub:K(H),reverse:K(y),each:D,toObject:N,find:C,contains:P,startsWith:V,endsWith:Y,equals:G,keys:K(X),values:K(function(a,c){var b=[];c?D(c,function(c){b.push(a[c])}):A(a,function(a,c){b.push(c)});return b}),call:K(E),array:z,unite:F,uniq:K(aa),intersection:K(I),range:function(a,c){for(var b=[],d=null==c?a:c,g=null!=c?a:0;g<d;g++)b.push(g);return new O(b)},bind:ca,partial:function(a,c,b){return ca(a,null,c,b)},eachObj:A,mapObj:function(a,c){var b=
{};A(a,function(a,d){b[a]=c(a,d)});return b},filterObj:function(a,c){var b={};A(a,function(a,d){c(a,d)&&(b[a]=d)});return b},isList:m,isFunction:R,isObject:h,isNumber:l,isBool:p,isDate:s,isValue:e,isString:n,toString:k,dateClone:g,dateAdd:u,dateDiff:L,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:a,formatValue:function(d,g){d=v(d,/^\?/);if(s(g)){var r,e,f=d,h=g,L={y:["FullYear",t],Y:["FullYear",function(a){return a%100}],M:["Month",q],n:["Month",
ia],N:["Month",ga],d:["Date",t],m:["Minutes",t],H:["Hours",t],h:["Hours",function(a){return a%12||12}],k:["Hours",q],K:["Hours",function(a){return a%12}],s:["Seconds",t],S:["Milliseconds",t],a:["Hours",function(a,c){return(c||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(c){if(r)return r;var b=0<c?c:-c;return(0>c?"+":"-")+a(2,Math.floor(b/60))+a(2,b%60)}]};if(e=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(d))r=e[1],h=u(g,"minutes",b(e,2,g)),f=e[4];return v(f,/(\w)(\1*)(?:\[([^\]]+)\])?/g,
function(c,b,d,g){if(b=L[b])c=h["get"+(m(b)?b[0]:b)].call(h),g=g&&g.split(","),c=m(b[1])?(g||b[1])[c]:b[1](c,g),null!=c&&!n(c)&&(c=a(d.length+1,c));return c})}return C(d.split(/\s*\|\s*/),function(a){var b,d;if(b=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=g;var j=parseFloat(b[3]);if(isNaN(j)||!l(a))a=null==a?"null":k(a),j=b[3];if(b[1]){if(!b[2]&&a==j||"<"==b[1]&&a>j||">"==b[1]&&a<j)return null}else if(a!=j)return null;a=b[4]}if(l(g)&&(b=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){d=k(b[1])+k(b[2]);
var j=k(b[1]).length?v(d,/[.,]/g).length:1,u=v(v(d,/^.*[0#]/),/[^,.]/g),r=k(b[3]).length+k(b[4]).length,m,e;if(d=/([.,])[^.,]+[.,]/.exec(b[0]))m=d[1],e=d[0].length-2;m=c(g,r,k(b[3]).length,u,j,m,e);e=a;a=b.index;b=k(b[0]).length;return e.substr(0,a)+m+e.substr(a+b)}return a})},parseDate:function(a,c){var d={y:0,Y:[0,-2E3],M:[1,1],n:[1,ia],N:[1,ga],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},g={},r=1,e,k,f;if(/^\?/.test(a)){if(""==x(c))return null;a=a.substr(1)}if(f=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))e=
f,a=f[3];if(!(f=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(g[r++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(k=r,r+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(g[r++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":w(a)})).exec(c)))return ba;for(var h=[0,0,0,0,0,0,0],L=1;L<r;L++){var n=f[L],l=g[L];if(m(l)){var p=l[0],t=d[p],q=t[0],l=C(l[1]||t[1],function(a,b){return V(n.toLowerCase(),
a.toLowerCase())?b:null});if(null==l)return ba;h[q]="a"==p?h[q]+12*l:l}else l&&(p=parseInt(n),t=d[l],m(t)?h[t[0]]+=p-t[1]:h[t]+=p)}d=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);return u(d,"minutes",-b(e,1,d)-b(f,k,d))},parseNumber:d,copyObj:T,trim:x,escapeRegExp:w,escapeHtml:da,format:function(a,b){return ea(a)(b)},template:ea,htmlTemlplate:function(a){return ea(a,da)}},S);return{_:S,M:O}});/^u/.test(typeof define)&&(def={},this.define=function(f,k){def[f]=k()},this.require=function(f){return def[f]});
define("minified",function(){function f(a){return null!=a?""+a:""}function k(a){return"string"==typeof a}function n(a){return a&&a.nodeType}function h(a){return a&&null!=a.length&&!k(a)&&!n(a)&&!w(a)}function l(a){return a}function s(a,c){for(var b in a)a.hasOwnProperty(b)&&c(b,a[b]);return a}function p(a,c){for(var b=0;a&&b<a.length;b++)c(a[b],b);return a}function e(a,c){var b=[],d=w(c)?c:function(a){return c!=a};p(a,function(a,c){d(a,c)&&b.push(a)});return b}function m(a,c){var b=[];p(a,function(a,
g){h(a=c(a,g))?p(a,function(a){b.push(a)}):null!=a&&b.push(a)});return b}function t(a,c){var b=[];s(a,function(a,g){h(a=c(a,g))?p(a,function(a){b.push(a)}):null!=a&&b.push(a)});return b}function q(a,c,b){return f(a).replace(c,b||"")}function v(a,c){var b=null!=a&&RegExp("\\b"+a+"\\b","i");return function(a){return!b||b.test(a[c])}}function w(a){return"function"==typeof a&&!a.item}function x(a){return parseFloat(q(a,/^[^\d-]+/))}function A(a){return a.minified=a.minified||++aa}function D(a,c){function b(a){if(n(a)&&
!g[r=A(a)])d.push(a),g[r]=!0}var d=[],g={},r;p(a,function(a){a=c(a);h(a)?p(a,b):b(a)});return d}function M(a){var c={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},b=a.get(c);a.set(c);c=a.get("$height",!0);a.set(b);return c}function W(a){a()}function U(a,c){p(c,function(a){a.e.detachEvent("on"+a.n,a.h)})}function X(){p(P,W);P=null}function B(a){P?P.push(a):z.setTimeout(a,0)}function V(a,c,b,d){return function(){var g=y(F.createElement(a));h(c)||"object"!=typeof c?g.add(c):
g.set(c).add(b);d&&d(g);return g}}function Y(a){return ca[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function y(a,c,b){return w(a)?B(a):new C(H(a,c,b))}function H(a,c,b){function d(a){a=function da(a){return h(a)?m(a,da):a}(a);return g?e(a,function(a){for(;a=a.parentNode;){if(a===g)return!0;if(b)return!1}}):a}var g,r,u,f;if(c&&1!=(c=H(c)).length)return D(c,function(c){return H(a,c,b)});g=c&&c[0];if(!k(a))return d(h(a)?a:[a]);if(1<(c=a.split(/\s*,\s*/)).length)return D(c,function(a){return H(a,
g,b)});if(c=/(\S+)\s+(.+)$/.exec(a))return H(c[2],H(c[1],g),b);if(a!=(c=q(a,/^#/)))return d([F.getElementById(c)]);g=g||F;r=(c=/([\w-]*)\.?([\w-]*)/.exec(a))[1];f=c[2];c=(u=g.getElementsByClassName&&f)?g.getElementsByClassName(f):g.getElementsByTagName(r||"*");if(r=u?r:f)c=e(c,v(r,u?"nodeName":"className"));return g?d(c):c}function N(a,c){var b;if(w(a))return a;if(!a||k(a)&&("*"==a||(b=/^([\w-]*)\.([\w-]+)$/.exec(a))||(b=/^([\w-]+)$/.exec(a)))){var d=v(b&&b[1],"nodeName"),g=v(b&&b[2],"className");
return function(a){return 1==n(a)&&d(a)&&g(a)}}var r={};y(a,c).each(function(a){r[A(a)]=!0});return function(b){return c?null!=y(a,c).find(b):r[A(b)]}}function T(){var a,c=[],b=[],d=function(d,g){null==a&&(a=d,c=g,z.setTimeout(function(){p(b,W)},0))},g=d.then=function(d,g){var e=T(),m=function(){try{var b=a?d:g;if(w(b)){var m=b.apply(null,c);m&&w(m.then)?m.then(function(a){e(!0,[a])},function(a){e(!1,[a])}):e(!0,[m])}else e(a,c)}catch(h){e(!1,[h])}};null!=a?z.setTimeout(m,0):b.push(m);return e};d.error=
function(a){return g(0,a)};return d}function C(a){for(var c=this.length=a.length,b=0;b<c;b++)this[b]=a[b]}var z=this,F=document,aa=1,I={},P=[],G=[],Z=z.requestAnimationFrame||function(a){z.setTimeout(a,33)},E=!!F.all&&!P.map,ca={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};s({each:function(a){return p(this,a)},filter:function(a){return new C(e(this,a))},collect:function(a){return new C(m(this,a))},sub:function(a,c){var b=0>a?this.length+a:a,d=0<=c?c:this.length+(c||0);return this.filter(function(a,
c){return c>=b&&c<d})},find:function(a){for(var c,b=w(a)?a:function(b,c){if(a===b)return c},d=0;d<this.length;d++)if(null!=(c=b(this[d],d)))return c},remove:function(){p(this,function(a){if(E&&1==n(a)){var c=function(a){U(0,I[a.minified]);delete I[a.minified]};p(H("*",a),c);c(a)}a.parentNode.removeChild(a)})},text:function(){function a(c){var b=n(c);return 1==b?m(c.childNodes,a):5>b?c.data:null}return m(this,a).join("")},trav:function(a,c,b){var d=N("number"==typeof c?null:c),g="number"==typeof c?
c:b||1E9;return new C(D(this,function(b){for(var c=[];(b=b[a])&&c.length<g;)d(b)&&c.push(b);return c}))},select:function(a,c){return y(a,this,c)},is:function(a){var c=N(a);return!this.find(function(a){if(!c(a))return!0})},only:function(a){return this.filter(N(a))},get:function(a,c){var b=this,d=b[0];if(d){if(k(a)){var g=q(q(a,/^%/,"data-"),/^[$@]/),m;m="$"==a?d.className:"$$"==a?E?d.style.cssText:d.getAttribute("style"):/\$\$/.test(a)&&("hidden"==d.style.visibility||"none"==d.style.display)?0:"$$fade"==
a?isNaN(m=E?x(d.style.filter)/100:x(d.style.opacity))?1:m:"$$slide"==a?b.get("$height"):/^\$/.test(a)?z.getComputedStyle?z.getComputedStyle(d,null).getPropertyValue(q(g,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(d.currentStyle||d.style)[g]:/^[@%]/.test(a)?d.getAttribute(g):d[g];return c?x(m):m}var e={};(h(a)?p:s)(a,function(a){e[a]=b.get(a,c)});return e}},set:function(a,c){var b=this,d;void 0!==c?"$$fade"==a||"$$slide"==a?b.set({$visibility:0<(d=x(c))?"visible":"hidden",$display:"block"}).set("$$fade"==
a?E?{$filter:"alpha(opacity = "+100*d+")",$zoom:1}:{$opacity:d}:{$height:/px/.test(c)?c:function(a,b,c){return d*(d&&M(y(c)))+"px"},$overflow:"hidden"}):p(b,function(b,d){var m=q(q(a,/^%/,"data-"),/^[@$]/),e=b.className||"",h=/^\$/.test(a)?b.style:b,f=w(c)?c(y(b).get(a),d,b):c;"$"==a?null!=f&&(p(f.split(/\s+/),function(a){var b=q(a,/^[+-]/),c=e;e=q(e,RegExp("\\b"+b+"\\b","i"));if(/^\+/.test(a)||b==a&&c==e)e+=" "+b}),b.className=q(e,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?h.cssText=f:null!=f?b.setAttribute("style",
f):b.removeAttribute("style"):/^[@%]/.test(a)?null!=f?h.setAttribute(m,f):h.removeAttribute(m):h[m]=f}):k(a)||w(a)?b.set("$",a):s(a,function(a,c){b.set(a,c)});return b},add:function(a,c){return p(this,function(b,d){var g;(function u(a){h(a)?p(a,u):w(a)?u(a(b,d)):null!=a&&(a=n(a)?a:F.createTextNode(a),g?g.parentNode.insertBefore(a,g.nextSibling):c?c(a,b,b.parentNode):b.appendChild(a),g=a)})(n(a)&&d?null:a)})},fill:function(a){return p(this,function(a){y(a.childNodes).remove()}).add(a)},addBefore:function(a){return this.add(a,
function(a,b,d){d.insertBefore(a,b)})},addAfter:function(a){return this.add(a,function(a,b,d){d.insertBefore(a,b.nextSibling)})},addFront:function(a){return this.add(a,function(a,b){b.insertBefore(a,b.firstChild)})},replace:function(a){return this.add(a,function(a,b,d){d.replaceChild(a,b)})},clone:function(a){return new C(m(this,function(c){var b=n(c);if(1==b){var d={$:c.className||null,$$:E?c.style.cssText:c.getAttribute("style")};p(c.attributes,function(a){var b=a.name;"id"!=b&&("style"!=b&&"class"!=
b&&c.getAttribute(b))&&(d["@"+b]=a.value)});return V(c.tagName,d,y(c.childNodes).clone(),a)}return 5>b?c.data:null}))},animate:function(a,c,b,d){var g=this,e=[],m=/-?[\d.]+/,h,k=T(),l=w(b)?b:function(a,c,d){return a+d*(c-a)*(b+(1-b)*d*(3-2*d))};d=d||{};d.time=0;d.stop=function(){h();k(!1)};c=c||500;b=b||0;p(g,function(b){var c={o:y(b),e:{}};s(c.s=c.o.get(a),function(b,d){var g=a[b];"$$slide"==b&&(g=g*M(c.o)+"px");c.e[b]=/^[+-]=/.test(g)?q(g.substr(2),m,x(d)+x(q(g,/\+?=/))):g});e.push(c)});h=y.loop(function(a){function b(a,
c){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*c,2):(a=a.charAt(1+c))+a,16):parseInt(q(a,/[^\d,]+/g).split(",")[c])}d.time=a;a>=c||0>a?(p(e,function(a){a.o.set(a.e)}),h(),d.time=null,k(!0,[g])):p(e,function(d){s(d.s,function(g,e){var h="rgb(",k=d.e[g],t=a/c;if(/^#|rgb\(/.test(k))for(var r=0;3>r;r++)h+=Math.round(l(b(e,r),b(k,r),t))+(2>r?",":")");else h=q(k,m,f(l(x(e),x(k),t)));d.o.set(g,h)})})});return k},toggle:function(a,c,b,d){var g=this,e={},m=!1,h=/\b(?=\w)/g,f;return c?g.set(a)&&function(h){if(h!==
m)return f=(m=!0===h||!1===h?h:!m)?c:a,w(f)?f(g,b,d):b?g.animate(f,e.stop?e.stop()||e.time:b,d,e):g.set(f)&&void 0}:g.toggle(q(a,h,"-"),q(a,h,"+"))},values:function(a){var c=a||{};this.each(function(a){var d=a.name,g=f(a.value),e=c[d];if(/form/i.test(a.tagName))y(m(a.elements,l)).values(c);else if(d&&(!/kbox|dio/i.test(a.type)||a.checked))h(e)?e.push(g):c[d]=null==e?g:[e,g]});return c},on:function(a,c,b,d){return this.each(function(g,e){p(a.split(/\s/),function(a){var m=q(a,/\|/),h=w(c)||null,f=h?
c:b,k=h&&d&&b,l=h&&(d||b),t=m==a,n=h?null:N(c,g),h=function(a,b){var c=a||z.event,d,g=b||c.target;if(!n||n(g))if((d=(!f.apply(k||g,l||[c,e])||l)&&t)&&!b)c.stopPropagation&&(c.preventDefault(),c.stopPropagation()),c.returnValue=!1,c.cancelBubble=!0;return d};a={e:g,h:h,n:m};(f.M=f.M||[]).push(a);E?(g.attachEvent("on"+m,h),m=A(g),(I[m]=I[m]||[]).push(a)):(g.addEventListener(m,h,!1),(g.minified2=g.minified2||[]).push(a))})})},onOver:function(a){var c=this,b=[];return c.on("|mouseover |mouseout",function(d,
g){var e="mouseout"!=d.type,m=d.relatedTarget||d.toElement;if(b[g]!==e&&(e||!m||m!=c[g]&&!y(m).trav("parentNode",c[g]).length))b[g]=e,a.call(this,e,g)})},trigger:function(a,c){return this.each(function(b){for(var d,g=b;g&&!d;)p(E?I[g.minified]:g.minified2,function(g){g.n==a&&(d=d||g.h(c,b))}),g=g.parentNode})}},function(a,c){C.prototype[a]=c});s({request:function(a,c,b,d,g,e){var l,p=b,q=0,v=T();try{l=z.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=b&&(d=d||{},!k(b)&&
!n(b)&&(p=t(b,function J(a,b){return h(b)?m(b,function(b){return J(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!n(b)&&(!k(b)&&!d["Content-Type"])&&(d["Content-Type"]="application/x-www-form-urlencoded"):(c+="?"+p,p=null)),l.open(a,c,!0,g,e),s(d,function(a,b){l.setRequestHeader(a,b)}),l.onreadystatechange=function(){4==l.readyState&&!q++&&(200==l.status?v(!0,[l.responseText,l.responseXML]):v(!1,[l.status,l.statusText,l.responseText]))},l.send(p)}catch(x){q||
v(!1,[0,null,f(x)])}return v},toJSON:function c(b){return null==b?""+b:k(b=b.valueOf())?'"'+q(b,/[\\\"\x00-\x1f\x22\x5c]/g,Y)+'"':h(b)?"["+m(b,c).join()+"]":"object"==typeof b?"{"+t(b,function(b,g){return c(b)+":"+c(g)}).join()+"}":f(b)},parseJSON:z.JSON?z.JSON.parse:function(c){c=q(c,/[\x00\xad\u0600-\uffff]/g,Y);if(/^[[\],:{}\s]*$/.test(q(q(c,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+c+")")},ready:B,setCookie:function(c,b,d,g,e,m){F.cookie=c+"="+(m?b:escape(b))+
(d?"; expires="+("object"==typeof d?d:new Date((new Date).getTime()+864E5*d)).toUTCString():"")+"; path="+(g?escapeURI(g):"/")+(e?"; domain="+escape(e):"")},getCookie:function(c,b){var d,g=(d=RegExp("(^|;)\\s*"+c+"=([^;]*)").exec(F.cookie))&&d[2];return b?g:g&&unescape(g)},loop:function(c){var b={c:c,t:(new Date).getTime(),s:function(){for(var c=0;c<G.length;c++)G[c]===b&&G.splice(c--,1)}};2>G.push(b)&&function g(){p(G,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&Z(g)}();return b.s},
off:function(c){p(c.M,function(b){E?(b.e.detachEvent("on"+b.n,b.h),I[b.e.minified]=e(I[b.e.minified],b)):(b.e.removeEventListener(b.n,b.h,!1),b.e.minified2=e(b.e.minified2,b))});c.M=null}},function(c,b){y[c]=b});z.onload=X;F.addEventListener&&F.addEventListener("DOMContentLoaded",X,!1);z.unload=function(){p(I,U)};return{$:y,$$:function(c){return H(c)[0]},EE:V,M:C}});var _=(require("minifiedUtil")||require("minified"))._;
function parseSourceSections(f){function k(){return{id:"anon"+n++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}f=f.split("\n");var n=100,h=[],l=k(),s=!1;_.each(f,function(f){if(s&&/^.*\*\/\s*$/.test(f))s=!1;else if(s){var e=f.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),m=e.match(/^\s*@([a-z]+)/);m?(m=m[1],e=_.trim(e.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==m||"example"==m?l[m].push(e):"requires"==m?e.length&&_.each(e.split(/\s+/),function(e){l.requires[e]=1}):"param"==
m?l.params.push({name:e.replace(/\s.*$/,""),desc:e.replace(/^\S+\s+/,"")}):"return"==m?l.params.push({name:"@return",desc:e}):"function"==m?l.params[l.params.length-1].funcs.push(e):l[m]=""!=e?e:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(e):l.example.length?l.example[l.example.length-1]+="\n"+e:l.desc+=e+"\n"}else/^\s*\/\*\$/.test(f)&&!/\*\/\s*$/.test(f)&&(s=!0,h.push(l),l=k());l.src.push(f)});h.push(l);return h}
function createSectionMap(f){var k={};_.each(f,function(f){k[f.id]=f});return k}function completeRequirements(f,k){var n=0;_.each(f,function(h){_.eachObj(h.requires,function(f){var s=k[f];if(!s)throw Error('Unknown id in requirement: "'+f+'"');_.eachObj(s.requires,function(f){h.requires[f]||(n++,h.requires[f]=1)})})});0<n?completeRequirements(f,k):_.each(f,function(h){_.eachObj(h.requires,function(f){k[f].requiredBy[h.id]=1})})}
function calculateDependencies(f,k){var n={};_.eachObj(k,function(h){k[h]&&(n[h]=1,_.eachObj(f[h].requires,function(f){n[f]=1}))});return n}function createDefaultConfigurationMap(f,k){var n={};_.each(f,function(f){if(f.configurable&&("default"==f.configurable||k))n[f.id]=1});return n}
function compile(f,k,n){var h="",l=calculateDependencies(k,n),s=[],p=!0;_.filter(f,function(e){return l[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))p||(h+="\n"),p=!0;else{var f=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(f&&"cond"==f[2]&&!!l[f[4]]!=("!"==f[3]))h+=f[1]+f[5]+"\n";else{var k=!1,n=!0;f&&"condblock"==f[2]?s.push(!!l[f[4]]!=("!"==f[3])):/^\s*\/\/\s*@condend\b/.test(e)&&(k=!0);for(f=0;f<s.length;f++)if(!s[f]){n=
!1;break}n&&(h+=e+"\n");k&&s.pop()}p=!1}})});return h}function prepareSections(f){f=parseSourceSections(f);var k=createSectionMap(f);completeRequirements(f,k);var n=createDefaultConfigurationMap(f);return{sections:f,sectionMap:k,enabledSections:n}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(f,k){var n=_.filter(f,function(e){return e.configurable}),h=_.filter(_.keys(k),function(e){return k[e]}),l,s=[];h.length==n.length?(l=CONFIG_COMMENT+CONFIG_ALL,s=[]):h.length/3>n.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,s=_.filter(n,function(e){return!k[e.id]}).collect(function(e){return e.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,s=h);var p="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,e=50;_(s).sort().each(function(f){e<f.length?
(e=70,p+="\n// - "+f+", "):(p+=f+", ",e-=f.length+2)});return p=p.replace(/,\s*$/,".\n")}function fixConfig(f,k){_.eachObj(k,function(n){f[n]?_.copyObj(f[n].requires,k):delete k[n]});return k}
function deserializeEnabledSections(f,k,n){function h(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var l=h(CONFIG_START+".*"),s=h(CONFIG_ALL.replace(/\./,"\\.")),p=h(CONFIG_ALL_EXCEPT+"\\s*"),e=h(CONFIG_ONLY+"\\s*"),m=h(CONFIG_COMMENT);n=n.split("\n");for(var t=0;t<n.length;t++){var q=n[t];if(/^\s*\/\/s*/.test(q)&&(q=q.replace(/^\s*\/\/\s*/,""),l.test(q)&&t+1<n.length)){for(var q="",v=t+1;v<n.length;v++)if(m.test(n[v])){if(q+=n[v].replace(m,""),/\s*\.\s*$/.test(n[v]))break}else break;if(s.test(q))return createDefaultConfigurationMap(f,
!0);q=q.replace(/\s*\.\s*$/,"");if(p.test(q)){var w=createDefaultConfigurationMap(f,!0);_.each(q.replace(p,"").split(/\s*,\s*/),function(e){delete w[e]});return fixConfig(k,w)}if(e.test(q))return w={},_.each(q.replace(e,"").split(/\s*,\s*/),function(e){k[e]&&(w[e]=1)}),fixConfig(k,w)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(f,k,n){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:f,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:k?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){n&&n($.parseJSON(f))},function(f,k,s){window.console&&console.log("error",f,k,s);n&&n(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(f){function k(){$(".modCheck").each(function(e){var f=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&f++});e.checked=0<f})}function n(e){var h=f.sectionMap[e.id.substr(4)];e.checked?_.eachObj(h.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(h.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(f){f.checked&&(e[f.id.substr(4)]=1)});var h=compile(f.sections,
f.sectionMap,e),k=serializeEnabledSections(f.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(h,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=k+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=k+h,$("#resultPlain").fill((h.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(l){console.log(l)}return!1});
var h=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",h,[!1]);$("#loadConfig").on("|click",h,[!0]);$("#recreate").on("click",function(){try{var e=$$("#configSrc").value,h=deserializeEnabledSections(f.sections,f.sectionMap,e);h?(_.eachObj(f.sectionMap,function(e){var f=$$("#sec-"+e);f&&(f.checked=!!h[e])}),k()):alert("Can not find configuration in source.")}catch(l){console.log(l)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var s;$("#sectionCheckboxes").add(s=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[h=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(h).on("change",function(){var e=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=e;n(f)});k();return!0});var p;_.filter(f.sections,function(e){return e.group==GROUPS[l]&&e.configurable}).sort(function(e,f){var h=e.name||e.id,k=f.name||f.id;return h==k?0:h>k?1:
-1}).each(function(e){function h(e,k){var l=_.filter(_.keys(k),function(e){return!!k[e].name});if(!l.length)return null;var m=0,n=e;_.each(l,function(e){m++<Math.min(l.length,8)&&(1<m&&(n=m==Math.min(l.length,8)?n+" and ":n+", "),n=8==m&&8<l.length?n+"more":n+(f.sectionMap[e].name||f.sectionMap[e].id))});return n+="."}var l=h("Required by ",e.requiredBy),q=h("Requires ",e.requires);s.add(EE("div",{className:"sectionDescriptor"},[p=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+e.id,
checked:"default"==e.configurable?"checked":null})(),EE("label",{"@for":"sec-"+e.id},e.name||e.id),EE("div",{className:"requirements"},[l?[l,EE("br")]:null,q])]));$(p).on("change",function(){n(this);k();return!0})})}}
$(function(){var f=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);f&&10>parseInt(f[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(f){setUpConfigurationUI(prepareSections(f))}).error(function(f){window.console&&console.log(f)})});
